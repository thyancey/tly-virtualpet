(this["webpackJsonptly-virtualpet"]=this["webpackJsonptly-virtualpet"]||[]).push([[0],{101:function(t,e,n){"use strict";(function(t){var i=n(7),r=n(8),o=n(10),a=n(9),c=n(0),s=n(14),l=n(21),u=n(73),d=n.n(u),b=n(74),f=n(13),h=n(11),p=function(e){Object(o.a)(c,e);var n=Object(a.a)(c);function c(){var t;return Object(i.a)(this,c),(t=n.call(this)).loadAllData(),t}return Object(r.a)(c,[{key:"componentDidUpdate",value:function(e,n){var i=this,r=this.props.nextManifestItem;r&&(e.nextManifestItem&&e.nextManifestItem.id===r.id||this.loadManifestItem(r));var o=this.props.nextExternalItem;o&&(e.nextExternalItem&&e.nextExternalItem.url===o.url||(this.loadManifestItem(o),t.setTimeout((function(){i.props.setActivePetId(o.id)}),500)))}},{key:"loadAllData",value:function(){this.loadManifestData("manifest","manifest.jsonc")}},{key:"loadManifestItem",value:function(t){var e=this;t||console.error("Loader.loadManifestItem, received null manifestItemObj");var n="".concat(t.url,"/data.jsonc");d()(n,{mode:"cors"}).then((function(t){return t.text()})).then((function(t){return b.jsonc.parse(t)}),(function(e){console.error("Error fretching item from manifestObj ".concat(t," from ").concat(n),e)})).then((function(n){return e.props.storeManifestItem({manifest:t,data:n}),!0}),(function(e){console.error("Error parsing data from manifestObj ".concat(t," (or the url (").concat(n,") was bad), skipping"),(null===e||void 0===e?void 0:e.stack)||e)}))}},{key:"loadManifestData",value:function(t,e){var n=this,i="".concat("./data","/").concat(e);console.log("reading ".concat(t," data from '").concat(i,"'")),d()(i).then((function(t){return t.text()})).then((function(t){return b.jsonc.parse(t)}),(function(e){console.error("Error fretching ".concat(t," data from ").concat(i),e)})).then((function(t){return n.props.setManifest(t),!0}),(function(e){console.error("Error parsing ".concat(t," data (or the url was bad), skipping"),(null===e||void 0===e?void 0:e.stack)||e)}))}},{key:"render",value:function(){return null}}]),c}(c.Component);e.a=Object(l.b)((function(t,e){return{nextManifestItem:Object(h.t)(t),nextExternalItem:Object(h.s)(t)}}),(function(t){return Object(s.b)({setManifest:f.e,storeManifestItem:f.g,setActivePetId:f.c},t)}))(p)}).call(this,n(18))},102:function(t,e,n){"use strict";(function(t){var i=n(7),r=n(8),o=n(10),a=n(9),c=n(0),s=n(14),l=n(21),u=n(13),d=n(11);n(93);var b=function(e){Object(o.a)(c,e);var n=Object(a.a)(c);function c(){var t;return Object(i.a)(this,c),(t=n.call(this)).statPinger=null,t.state={pingIdx:0},t}return Object(r.a)(c,[{key:"componentDidMount",value:function(){this.props.ping(),this.startStatPinger()}},{key:"onPing",value:function(){this.props.ping(),this.props.pingRate&&this.props.pingRate>0?this.startStatPinger(this.props.pingRate):this.killStatPinger()}},{key:"startStatPinger",value:function(e){var n=this;this.killStatPinger(),this.statPinger=t.setTimeout((function(){n.onPing()}),this.props.pingRate)}},{key:"killStatPinger",value:function(){this.statPinger&&(t.clearInterval(this.statPinger),this.statPinger=null)}},{key:"render",value:function(){return null}}]),c}(c.Component);e.a=Object(l.b)((function(t){return{pingRate:Object(d.w)(t)}}),(function(t){return Object(s.b)({ping:u.b},t)}))(b)}).call(this,n(18))},103:function(t,e,n){"use strict";(function(t){var i,r,o,a,c,s,l,u=n(7),d=n(8),b=n(29),f=n(10),h=n(9),p=n(4),j=n(0),v=n(3),m=n(14),O=n(21),g=n(124),x=n(104),y=n(105),k=n(12),w=n(75),I=n(26),S=n(11),C=n(1),T={};T.PetContainer=v.c.div(i||(i=Object(p.a)(["\n  position:absolute;\n  width:0;\n  height:0;\n"]))),T.Centerer=v.c.div(r||(r=Object(p.a)(["\n  left:50%;\n  top:50%;\n  transform:translate(-50%, -50%);\n"])));var D=function(e){Object(f.a)(i,e);var n=Object(h.a)(i);function i(e){var r;return Object(u.a)(this,i),(r=n.call(this,e)).idleTimer=null,r.thinkTimer=null,r.onKeyUp=r.onKeyUp.bind(Object(b.a)(r)),r.onKeyDown=r.onKeyDown.bind(Object(b.a)(r)),r.vX=0,r.vY=0,r.aY=1.08,r.frames=0,r.petBrain=new y.a(r.onBrainDoComplete.bind(Object(b.a)(r)),r.onBrainThinkComplete.bind(Object(b.a)(r))),r.rAF=0,r.keysDown=[],r.state={tick:0,petSize:[0,0],posX:0,posY:0,minY:0,maxY:0,minX:0,maxX:0,isOnGround:!1,cssX:"0px",cssY:"0px",adjustedWidth:0,adjustedHeight:0,adjustedRotation:0,direction:1,debugDraws:[]},t.document.addEventListener("keyup",r.onKeyUp),t.document.addEventListener("keydown",r.onKeyDown),r.throttledThink=Object(w.a)(200,!0,(function(){r.onThrottledThink()})),r.throttledLogic=Object(w.a)(200,!0,(function(){r.onThrottledLogic()})),r.thinkInterval=window.setInterval(r.onPetInterval.bind(Object(b.a)(r)),10),r}return Object(d.a)(i,[{key:"onBrainDoComplete",value:function(){this.stopRoaming()}},{key:"onBrainThinkComplete",value:function(){this.startRoaming()}},{key:"componentDidMount",value:function(){o=1e3/60,a=Date.now(),this.resetPetPosition(),this.petBrain.setPersonality(this.props.personality)}},{key:"onPetInterval",value:function(){this.onThrottledLogic(),this.throttledThink()}},{key:"onThrottledThink",value:function(){"DEAD"!==this.props.behavior&&(this.keysDown.length>0?(this.hasActivity("ROAMING")&&this.props.removeActivity("ROAMING"),this.petBrain.pullThePlug()):this.petBrain.think([],this.keysDown))}},{key:"onThrottledLogic",value:function(){var t=this;c=Date.now(),l=(s=c-a)/o,this.checkKeys(l),l>1&&(a=c-s%o,this.frames++,this.setState((function(e){return{tick:t.frames}}))),"DEAD"!==this.props.behavior&&this.hasActivity("ROAMING")&&this.checkRoamingStuff(l),this.affectPetGravity(l)}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.rAF)}},{key:"jumpPet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.state.isOnGround&&(this.props.addActivity("JUMPING"),this.vY-=t*this.props.personality.jumpForce)}},{key:"startRoaming",value:function(){this.props.addActivity("ROAMING")}},{key:"stopRoaming",value:function(t){this.props.removeActivity("ROAMING")}},{key:"startDucking",value:function(){console.log("start ducking"),this.props.addActivity("DUCKING"),this.startIdleTimer()}},{key:"stopDucking",value:function(){this.props.activities.indexOf("DUCKING")>-1&&this.props.removeActivity("DUCKING")}},{key:"movePet",value:function(t,e,n){this.vX+=t*n*this.props.personality.xForce,this.vY+=e*n*this.props.personality.yForce,t<0?this.setState({direction:-1}):t>0&&this.setState({direction:1}),this.startWalking()}},{key:"stopWalking",value:function(){this.props.activities.indexOf("WALKING")>-1&&this.props.removeActivity("WALKING")}},{key:"startWalking",value:function(t){this.props.addActivity("WALKING"),this.startIdleTimer()}},{key:"startIdleTimer",value:function(){var e=this;this.killTimer(this.idleTimer),this.idleTimer=t.setTimeout((function(){e.stopWalking(),e.stopDucking()}),200)}},{key:"killTimer",value:function(e){e&&(t.clearTimeout(e),e=null)}},{key:"hasActivity",value:function(t){return this.props.activities.indexOf(t)>-1}},{key:"roamLeft",value:function(t){-1===this.getPetOnWall()?this.movePet(1,0,t):this.movePet(-1,0,t)}},{key:"roamRight",value:function(t){1===this.getPetOnWall()?this.movePet(-1,0,t):this.movePet(1,0,t)}},{key:"checkRoamingStuff",value:function(t){this.hasActivity("ROAMING")&&(Math.random()<this.props.personality.jumpChance&&this.jumpPet(20),-1===this.state.direction?this.roamLeft(t):this.roamRight(t))}},{key:"checkKeys",value:function(t){var e=this;this.keysDown.forEach((function(n){switch(n){case"ArrowRight":e.movePet(1,0,t);break;case"ArrowLeft":e.movePet(-1,0,t);break;case"ArrowUp":e.jumpPet(20);break;case"ArrowDown":e.startDucking()}}))}},{key:"onKeyUp",value:function(t){var e=this.keysDown.indexOf(t.code);e>-1&&this.keysDown.splice(e,1)}},{key:"onKeyDown",value:function(t){-1===this.keysDown.indexOf(t.code)&&this.keysDown.push(t.code)}},{key:"getDrawCommand",value:function(t,e,n,i){return function(r,o){return Object(x.a)(t)(r,e,n,i,o)}}},{key:"affectPetGravity",value:function(t){this.vY=this.vY+.5,this.vY>0&&this.vY<.25?this.vY=0:this.vY*=.97,this.vX>-1&&this.vX<1?this.vX=0:this.vX=Object(k.a)(.7*this.vX,-this.props.personality.maxVx,this.props.personality.maxVx);var e=this.state.posY+this.vY*t;e>=this.state.maxY&&(this.vY=0);var n=this.state.posX+this.vX*t;(n>=this.state.maxX||n<this.state.minX)&&(this.vX=0);var i=Object(k.a)(n,this.state.minX,this.state.maxX),r=Math.min(e,this.state.maxY);this.attemptToUpdatePosition({posX:i,posY:r,isOnGround:r>=this.state.maxY})}},{key:"attemptToUpdatePosition",value:function(t){for(var e in t)if(this.state[e]!==t[e])return void this.setState(t)}},{key:"recalcMaxBounds",value:function(e){var n,i=(null===(n=this.props.animation)||void 0===n?void 0:n.spriteInfo)||null,r=this.props.activeCage,o=this.props.activeSceneType;if(i&&r){var a,c,s,l,u=i.scale*t.spriteScale,d=i.cells.map((function(t){return t*u})),b=this.props.containerWidth,f=this.props.containerHeight;if(a=isNaN(r.width)&&r.width.indexOf("%")>-1?Number(r.width.split("%")[0])/100*b:r.width,c=isNaN(r.height)&&r.height.indexOf("%")>-1?Number(r.height.split("%")[0])/100*f:r.height,"responsive"===o){var h=r.x+a/2,p=r.y+c/2;s="".concat(h,"px"),l="".concat(p,"px")}else"static"===o?(s="calc(50% + ".concat(r.xCenter,"px)"),l="calc(50% + ".concat(r.yCenter,"px)")):(s="".concat(r.x,"px"),l="".concat(r.y,"px"));var j="responsive"===o?b:r.width,v="responsive"===o?f:r.height,m=[d[0]+i.hitboxOffset[0],d[1]+i.hitboxOffset[1]],O={petSize:m,minX:0-i.hitboxOffset[0],minY:0-i.hitboxOffset[1],maxX:j-m[0],maxY:v-m[1]+this.props.activeCage.floor,cssX:s,cssY:l,adjustedWidth:a,adjustedHeight:c,adjustedRotation:this.props.activeCage.rotation};e&&(O.posX=O.maxX/2),this.setState(O)}}},{key:"resetPetPosition",value:function(){var t=this;window.setTimeout((function(){t.recalcMaxBounds(!0)}),0)}},{key:"componentDidUpdate",value:function(t,e){t.activePetId!==this.props.activePetId&&(this.resetPetPosition(),this.setState({debugDraws:[]}),this.petBrain.setPersonality(this.props.personality)),t.containerWidth===this.props.containerWidth&&t.containerHeight===this.props.containerHeight||this.recalcMaxBounds(),!e.isOnGround&&this.state.isOnGround&&this.props.removeActivity("JUMPING"),"DEAD"!==t.behavior&&"DEAD"===this.props.behavior&&this.jumpPet(20)}},{key:"checkForPetClicked",value:function(t,e){var n=[[this.state.posX,this.state.posY],[this.state.posX+this.state.petSize[0],this.state.posY+this.state.petSize[1]]];t>n[0][0]&&t<n[1][0]&&e>n[0][1]&&e<n[1][1]&&this.props.clickPet(this.props.petId)}},{key:"onStageClick",value:function(t){"responsive"===this.props.activeSceneType&&this.checkForPetClicked(t.clientX,t.clientY)}},{key:"getPetOnWall",value:function(){return this.state.posX+50>=this.state.maxX?1:this.state.posX-50<=this.state.minX?-1:0}},{key:"render",value:function(){var e=this,n=this.props,i=n.animation,r=n.petId;if(!i)return null;window.ani=i;var o=this.state.adjustedWidth,a=this.state.adjustedHeight;t.p=this;var c=[];return i.type&&(i.spriteInfo.faceDirection?c.push(this.getDrawCommand(i.type,[o,a],[this.state.posX,this.state.posY],this.state.direction*(i.spriteInfo.orientation||1))):c.push(this.getDrawCommand(i.type,[o,a],[this.state.posX,this.state.posY],i.spriteInfo.orientation||1))),this.state.debugDraws.forEach((function(t){c.push(e.getDrawCommand("DebugDraw",[o,a],[t[0],t[1]]))})),Object(C.jsx)(T.PetContainer,{style:{left:"".concat(this.state.cssX),top:"".concat(this.state.cssY),transform:"rotate(".concat(this.state.adjustedRotation,"deg)")},children:Object(C.jsx)(T.Centerer,{style:{width:o,height:a},children:Object(C.jsx)(g.a,{tick:this.state.tick,petId:r,containerWidth:o,containerHeight:a,animation:i,drawCommands:c,onStageClick:function(t){return e.onStageClick(t)}})})})}}]),i}(j.Component);e.a=Object(O.b)((function(t){return{petId:Object(S.l)(t),behavior:Object(S.k)(t),activities:Object(S.i)(t),personality:Object(S.m)(t),animation:Object(S.j)(t),activeCage:Object(S.e)(t),activeSceneType:Object(S.q)(t)}}),(function(t){return Object(m.b)({addActivity:I.a,removeActivity:I.f,clickPet:I.c},t)}))(D)}).call(this,n(18))},104:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var i=function(t){return r[t]||null},r={DebugDraw:function(t,e,n,i){t.save(),t.beginPath();t.arc(n[0],n[1],20,0,2*Math.PI),t.globalAlpha=.5,t.fillStyle="red",t.fill(),t.lineWidth=5,t.strokeStyle="#000000",t.stroke(),t.restore()},SpinSquare:function(t,e,n,i,r){t.save(),t.beginPath(),t.clearRect(0,0,e[0],e[1]),t.translate(e[0]/2,e[1]/2),t.rotate(r.tick*Math.PI/180),t.fillStyle="#4397AC",t.fillRect(-e[0]/4,-e[1]/4,e[0]/2,e[1]/2),t.restore()},SpinSquare2:function(t,e,n,i,r){t.save(),t.beginPath(),t.clearRect(0,0,e[0],e[1]),t.translate(e[0]/2,e[1]/2),t.rotate(-r.tick*Math.PI/45),t.fillStyle="#ffffff",t.fillRect(-e[0]/4,-e[1]/4,e[0]/2,e[1]/2),t.restore()},Sprite_Still:function(e,n,i,r,a){if(a.sprite){var c=o(a.spriteInfo,a.spriteInfo.frame),s=[0,0];i&&2===i.length&&(s=i);var l=(a.spriteInfo.scale||1)*(t.spriteScale||1),u=s[0],d=s[1],b=c.w*l,f=c.h*l;e.save(),e.clearRect(0,0,n[0],n[1]),-1===r&&e.translate(b,0),e.scale(r,1),e.drawImage(a.sprite,c.x,c.y,c.w,c.h,u*r,d,b,f),e.restore()}},Sprite_Animated:function(e,n,i,r,o){if(o.sprite){var c,s=o.spriteInfo.frame;if(void 0!==s)c=s;else{var l=o.spriteInfo.speed||20;c=Math.floor(o.tick/l)}var u=a(o.spriteInfo,c),d=[0,0];i&&2===i.length&&(d=i);var b=(o.spriteInfo.scale||1)*(t.spriteScale||1),f=d[0],h=d[1],p=u.w*b,j=u.h*b;e.save(),e.clearRect(0,0,n[0],n[1]),-1===r&&e.translate(p,0),e.scale(r,1),e.drawImage(o.sprite,u.x,u.y,u.w,u.h,f*r,h,p,j),o.overlaySprite&&e.drawImage(o.overlaySprite,u.x,u.y,u.w,u.h,f*r,h,p,j),e.restore()}}},o=function(t,e){var n=t.grid[0],i=t.grid[1];return{x:e%n*t.cells[0],y:Math.floor(e/i)%i*t.cells[1],w:t.cells[0],h:t.cells[1]}},a=function(t,e){var n,i=t.frames,r=t.frame;void 0!==r?n=r:(n=i[e%i.length],-1===t.dir&&(n=i.length-1-n));var o=t.grid[0];return{x:n%o*t.cells[0],y:Math.floor(n/o)*t.cells[1],w:t.cells[0],h:t.cells[1]}}}).call(this,n(18))},105:function(t,e,n){"use strict";var i=n(6),r=n(7),o=n(8),a=n(12),c=0,s=1,l=2,u={thinkRange:[500,2e3],doRange:[500,2e3],jumpChance:0},d=function(){function t(e,n){Object(r.a)(this,t),this.onThinkComplete=n,this.onDoComplete=e,this.timer=null,this.status=c}return Object(o.a)(t,[{key:"getStatus",value:function(){return this.name}},{key:"pullThePlug",value:function(){this.status=c,this.killTimer()}},{key:"startTimer",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.killTimer(),this.timer=window.setTimeout((function(){n.onTimerComplete(t,e)}),i)}},{key:"getPersonality",value:function(){return this.personality||u}},{key:"killTimer",value:function(){this.timer&&(window.clearTimeout(this.timer),this.timer=null)}},{key:"getDuration",value:function(t){return t===s?Object(a.i)(this.getPersonality().thinkRange):t===l?Object(a.i)(this.getPersonality().doRange):(console.error('unexpected duration type "'.concat(t,'"')),0)}},{key:"setPersonality",value:function(t){this.personality=Object(i.a)(Object(i.a)({},this.getPersonality()),t)}},{key:"think",value:function(t,e){e.length>0||this.status===c&&(this.timer||this.startDoing())}},{key:"startDoing",value:function(t){this.status=l,this.startTimer(this.status,t,this.getDuration(l))}},{key:"startThinking",value:function(t){this.status=s,this.startTimer(this.status,t,this.getDuration(s))}},{key:"onTimerComplete",value:function(t,e){switch(t!==this.status&&console.error("I havent really decided what to use yet, but this is unexpected"),this.status){case s:this.onThinkComplete&&this.onThinkComplete(),e&&e(),this.startDoing();break;case l:this.onDoComplete&&this.onDoComplete(),e&&e(),this.startThinking();break;case c:console.error("should not have finished a timer in a different status")}}}]),t}();e.a=d},106:function(t,e,n){"use strict";(function(t){var i,r,o,a,c,s=n(6),l=n(7),u=n(8),d=n(10),b=n(9),f=n(4),h=n(0),p=n(3),j=n(14),v=n(21),m=n(11),O=n(1),g={};g.Scene=p.c.div(i||(i=Object(f.a)(["\n  position:absolute;\n  top:0;\n  left:0;\n  right:0;\n  bottom:0;\n  z-index:-1;\n\n  .footer-image{\n    width: 100%;\n    height: 100%;\n  }\n\n  ","\n  \n  ","\n\n"])),(function(t){return"responsive"===t.type&&Object(p.b)(r||(r=Object(f.a)(["\n    .background-image{\n      width: 100%;\n      height: 100%;\n      background-size: cover;\n    }\n  "])))}),(function(t){return"static"===t.type&&Object(p.b)(o||(o=Object(f.a)(["\n    .background-image{\n      width: 100%;\n      height: 100%;\n      background-repeat: no-repeat;\n      background-position:50% 50%;\n    }\n  "])))})),g.SceneFloor=p.c.div(a||(a=Object(f.a)(["\n  position:absolute;\n  bottom:0;\n  left:0;\n  right:0;\n  height: ",";\n\n  background-image: url(",");\n  background-color: ",";\n"])),(function(t){return"".concat(t.height,"px")}),(function(t){return t.image}),(function(t){return t.color})),g.SceneBackground=p.c.div(c||(c=Object(f.a)(["\n  position:absolute;\n  top:0;\n  left:0;\n  right:0;\n  bottom:0;\n  z-index:-1;\n\n"])));var x=function(e){Object(d.a)(i,e);var n=Object(b.a)(i);function i(){return Object(l.a)(this,i),n.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){var e=this.props.activeScene;if(e){var n,i,r=e.background.imageUrl?e.background.imageUrl:null,o=e.type;return Object(O.jsxs)(g.Scene,{type:o,children:[e.floor&&Object(O.jsx)(g.SceneFloor,{height:e.floor.height,color:null===(n=e.floor)||void 0===n?void 0:n.color,children:Object(O.jsx)("div",{className:"footer-image",style:{backgroundImage:"url(".concat(null===(i=e.floor)||void 0===i?void 0:i.imageUrl,")")}})}),Object(O.jsx)(g.SceneBackground,{style:{backgroundColor:e.background.color},children:Object(O.jsx)("div",{className:"background-image",style:Object(s.a)({backgroundImage:"url(".concat(r,")")},e.background.styles)})})]})}return t.alert("ERROR: scene failed to load"),null}}]),i}(h.Component);e.a=Object(v.b)((function(t){return{activeScene:Object(m.o)(t)}}),(function(t){return Object(j.b)({},t)}))(x)}).call(this,n(18))},107:function(t,e,n){"use strict";(function(t){var i,r,o=n(7),a=n(8),c=n(10),s=n(9),l=n(4),u=n(0),d=n(3),b=n(2),f=n(17),h=n(1),p={};p.Wrapper=d.c.div(i||(i=Object(l.a)(["\n  position:relative;\n\n  &:hover{\n    .statEventDetail{\n      opacity:1;\n    }\n  }\n"]))),p.CooldownBar=d.c.div(r||(r=Object(l.a)(["\n  width:100%;\n  background-color: ",";\n  height:5px;\n\n  >div{\n    background-color: ",";\n    height:100%;\n    transition: width .1s linear;\n  }\n"])),Object(b.c)("grey"),Object(b.c)("blue"));var j=function(e){Object(c.a)(i,e);var n=Object(s.a)(i);function i(t){var e;return Object(o.a)(this,i),(e=n.call(this,t)).cooldownTimer=null,e.state={isCooling:!1,coolAt:null},e}return Object(a.a)(i,[{key:"coolDownComplete",value:function(){this.setState({isCooling:!1,coolAt:null})}},{key:"startCooldown",value:function(t){this.setState({isCooling:!0,coolAt:(new Date).getTime()+t}),this.startCooldownTimer(t)}},{key:"startCooldownTimer",value:function(e){var n=this;this.killCooldownTimer(),this.cooldownTimer=t.setTimeout((function(){n.coolDownComplete()}),e)}},{key:"killCooldownTimer",value:function(){this.cooldownTimer&&(t.clearTimeout(this.cooldownTimer),this.cooldownTimer=null)}},{key:"onButtonClick",value:function(t){this.state.isCooling?console.error("ITEM IS STILL COOLING"):(t.cooldown&&this.startCooldown(t.cooldown),this.triggerStatEffects(t.statEffects))}},{key:"triggerStatEffects",value:function(t){var e=this;t.forEach((function(t){t.immediate&&e.props.onImmediateUpdate(t.id,t.immediate)}))}},{key:"renderTooltip",value:function(t){var e="";return t.statEffects.forEach((function(t,n){n>0&&(e+="\n"),e+="".concat(t.id,":"),t.immediate&&(e+=t.immediate>0?"+".concat(t.immediate):"".concat(t.immediate))})),t.cooldown&&(e+="\ncooldown: ".concat(t.cooldown)),e}},{key:"getCooldownWidth",value:function(t){if(t){if(!this.state.isCooling)return"100%";var e=(this.state.coolAt-(new Date).getTime())/t;return Math.round(100*e)+"%"}return null}},{key:"render",value:function(){var t=this,e=this.props.statEventObj,n=this.getCooldownWidth(e.cooldown);return Object(h.jsxs)(p.Wrapper,{children:[Object(h.jsx)(f.b,{text:e.label,onClick:function(n){return t.onButtonClick(e)},isDisabled:this.state.isCooling,tooltip:this.renderTooltip(e)}),n&&Object(h.jsx)(p.CooldownBar,{children:Object(h.jsx)("div",{style:{width:n}})})]})}}]),i}(u.Component);e.a=j}).call(this,n(18))},11:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return b})),n.d(e,"w",(function(){return f})),n.d(e,"x",(function(){return h})),n.d(e,"v",(function(){return p})),n.d(e,"t",(function(){return j})),n.d(e,"s",(function(){return v})),n.d(e,"r",(function(){return m})),n.d(e,"n",(function(){return O})),n.d(e,"l",(function(){return g})),n.d(e,"h",(function(){return y})),n.d(e,"o",(function(){return k})),n.d(e,"e",(function(){return w})),n.d(e,"q",(function(){return I})),n.d(e,"i",(function(){return C})),n.d(e,"f",(function(){return T})),n.d(e,"p",(function(){return D})),n.d(e,"g",(function(){return P})),n.d(e,"m",(function(){return L})),n.d(e,"k",(function(){return U})),n.d(e,"j",(function(){return _})),n.d(e,"u",(function(){return z}));var i=n(6),r=n(19),o=n(20),a=n(46),c=n(12),s=function(t){return t.data.settings},l=function(t){return t.data.activePetType||null},u=function(t){return t.data.counter},d=function(t){return t.activePet.id||null},b=function(t){return t.activePet.forcedBehavior||null},f=Object(r.a)([s],(function(t){return t?t.pingRate:-1})),h=Object(r.a)([s],(function(t){return t?t.volume:-1})),p=Object(r.a)([s],(function(t){return t?t.animationSpeed:-1})),j=Object(r.a)([function(t){return t.data.nextManifestItem||null}],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t})),v=Object(r.a)([function(t){return t.data.nextExternalItem||null}],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t})),m=Object(r.a)([function(t){return t.data.loadingComplete||0}],(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t||!1})),O=Object(r.a)([l,o.e],(function(t,e){return t&&e?e.filter((function(e){return e.type===t})):[]})),g=Object(r.a)([d],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t})),x=Object(r.a)([d,o.e],(function(t,e){if(!t||!e)return null;var n=e.find((function(e){return e.id===t}));return n||null})),y=Object(r.a)([x,function(t){return t.activePet||null}],(function(t,e){return t?Object(i.a)(Object(i.a)({},e),{},{data:t}):null})),k=Object(r.a)([x],(function(t){if(!t)return null;var e=t.scene,n=Object(a.a)(e);return n||null})),w=Object(r.a)([x],(function(t){if(!t)return null;var e=t.scene,n=Object(a.a)(e);return n&&n.cage?n.cage:null})),I=Object(r.a)([x],(function(t){if(!t)return null;var e=t.scene,n=Object(a.a)(e);return n&&n.type?n.type:null})),S=(Object(r.a)([k],(function(t){return t?t.cage.floor||0:null})),function(t,e,n){return void 0!==t?t:void 0!==e?e:n}),C=Object(r.a)([y],(function(t){return t?t.activities:null})),T=Object(r.a)([y,function(t){return t.data.ping||0}],(function(t,e){if(!t)return null;var n=Object(o.f)(t.id);return R(t,n)})),D=Object(r.a)([k],(function(t){return t?t.styles:null})),P=Object(r.a)([y,T],(function(t,e){if(!t||!e)return[];var n=[];return e.forEach((function(t){t.effects&&0!==t.effects.length&&E(t.effects,t).forEach((function(t){-1===n.indexOf(t)&&n.push(t)}))})),n})),A=function(t,e){return Object(c.d)(t.when,e)?t.then:null},E=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=A(t[i],e);r&&-1===n.indexOf(r)&&n.push(r)}return n},M=function(t,e){return(e.effects||[]).map((function(e){return{when:e.when,then:e.then,mood:Object(i.a)({id:e.then},t[e.then])}}))},R=function(t,e){return t&&t.id?Object(o.d)(t.id,(new Date).getTime()).map((function(n,i){var r=n.current/n.max*100;return{id:n.id,type:n.type,label:n.label||n.id,cur:n.current,max:n.max,percent:r,fullIsGood:e[i].fullIsGood,doesKill:e[i].doesKill,fillType:"fill",effects:M(t.data.moods,n)}})):[]},B=function(t,e){switch(t.type){case"moods":return function(t,e){for(var n=[],i=0;i<t.length&&-1!==e.indexOf(t[i]);i++)n.push(t[i]);return n.length===t.length}(t.moods,e.activeMoods)?t:null;case"activity":return e.activities.indexOf(t.activity)>-1?t:null;case"stat":var n=e.stats.find((function(e){return e.id===t.stat}));return null===n?(console.error('evaluateWhen(): stat "'.concat(t.stat,'" does not exist for pet')),null):Object(c.d)(t.value,n)?t:null;case"status":return!0===t.isDead?!0===e.status.isDead?t:null:!1===t.isDead?!1===e.status.isDead?t:null:(console.warn('evaluateWhen(): status is missing "isDead" attribute'),null);default:return console.error('unknown when type "'.concat(t.type,'"')),null}},N=Object(r.a)([y],(function(t){return Object(o.c)(null===t||void 0===t?void 0:t.id)})),L=Object(r.a)([N],(function(t){return null===t||void 0===t?void 0:t.personality})),U=Object(r.a)([y,T,C,P,b],(function(t,e,n,i,r){if(!t||!t.id)return"PET NOT FOUND";var a=Object(o.c)(t.id);if(!a)return"PET DEFINTION NOT FOUND";if(r)return r;var c={isDead:!(!t||t.isAlive)};return function(t,e){for(var n=null,i=0;i<t.length;i++){var r=t[i],o=null;if(r.when&&0!==r.when.length)for(var a=0;a<r.when.length&&(o=B(r.when[a],e));a++);else o=!0;if(o){n=r.then;break}n="DEFAULT"}return n||"ERROR"}(a.moodSwings,{status:c,stats:e,activities:n,activeMoods:i})})),_=Object(r.a)([y,U],(function(t,e){if(!t)return null;var n=t.data,i=n.behaviors[e]||n.behaviors.DEFAULT,r=n.sprites;if(!i)return console.error("Error getting behavior ".concat(e)),null;var o=Math.floor(Math.random()*i.animations.length),a=i.animations[o],c=i.overlay||null,s=n.animations[a];if(s){var l=r[s.sprite];return a&&s&&l?function(t,e,n,i){var r,o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";i.spriteInfo=i.spriteInfo||{},r=void 0!==n.faceDirection?n.faceDirection:void 0===i.spriteInfo.faceDirection||i.spriteInfo.faceDirection,o=void 0!==n.orientation?n.orientation:void 0!==i.spriteInfo.orientation?i.spriteInfo.orientation:1;var c,s="".concat(a,"/").concat(i.imageUrl),l=null;return e&&(l=null===(c=i.overlays)||void 0===c?void 0:c[e])&&(l="".concat(a,"/").concat(l)),{type:i.type,imageUrl:s,overlayUrl:l,label:t,spriteInfo:{speed:n.speed||i.spriteInfo.speed||1,faceDirection:r,orientation:o,dir:n.dir||i.spriteInfo.dir||1,scale:S(n.scale,i.spriteInfo.scale,1),frames:S(n.frames,i.spriteInfo.frames),frame:S(n.frame,i.spriteInfo.frame),grid:i.spriteInfo.grid,cells:i.spriteInfo.cells,hitboxOffset:i.spriteInfo.hitboxOffset||[0,0]}}}(a,c,s,l,"".concat(n.dir,"/assets")):(console.error("Error getting spriteObj for ".concat(a)),null)}return console.error("Error getting graphic for ".concat(a)),null})),z=Object(r.a)([o.g],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t}))},113:function(t,e,n){"use strict";(function(t){var i,r=n(6),o=n(7),a=n(8),c=n(10),s=n(9),l=n(4),u=n(0),d=n(3),b=n(14),f=n(21),h=n(15),p=n(13),j=n(11),v=n(114),m=n(17),O=n(1),g={};g.Body=d.c.div(i||(i=Object(l.a)(["\n  ul{\n    padding:0;\n    margin: 0;\n    list-style:none;\n\n    >li{\n      display: inline-block;\n      width:100%;\n\n      &:last-of-type{\n        margin-bottom: 2rem;\n      }\n    }\n  }\n"])));var x=function(e){Object(c.a)(i,e);var n=Object(s.a)(i);function i(){return Object(o.a)(this,i),n.apply(this,arguments)}return Object(a.a)(i,[{key:"onSelectPet",value:function(t){this.props.history.push({search:"?pet=".concat(t)}),this.props.setActivePetId(t),this.props.onSelectPet(t)}},{key:"showLoadPrompt",value:function(){var e=t.prompt("Enter URL to directory containing pet manifest and assets. \n (use the provided url to load the raccoon externally)","http://thomasyancey.com/projects/virtualpet-external/pets/rizzo-raccoon");e&&this.props.loadExternalItem({type:"pets",url:e,id:"external_".concat(e)})}},{key:"render",value:function(){var t=this,e=this.props,n=e.taxonomy,i=e.activePetType,o=e.activePetId,a=e.activeObjects,c=e.setActivePetType;return Object(O.jsx)(g.Body,{children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(m.b,{text:"Load external",onClick:function(e){return t.showLoadPrompt()}})},0),n.map((function(e,n){return Object(O.jsx)("li",{children:Object(O.jsx)(v.a,{text:e.type,isActive:e.type===i,onClick:function(){return c(e.type)},onItemClick:function(e,n){return t.onSelectPet(e)},activeId:o,items:a.map((function(t){return Object(r.a)(Object(r.a)({},t),{},{text:t.name,subText:t.animal})}))})},"".concat(n,"-").concat(e.type))}))]})})}}]),i}(u.Component);e.a=Object(h.f)(Object(f.b)((function(t){return{activePetType:Object(j.b)(t),activePetId:Object(j.a)(t),counter:Object(j.c)(t),taxonomy:Object(j.u)(t),activeObjects:Object(j.n)(t)}}),(function(t){return Object(b.b)({setActivePetType:p.d,setActivePetId:p.c,loadExternalItem:p.a},t)}))(x))}).call(this,n(18))},114:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var i,r,o,a,c,s,l,u=n(7),d=n(8),b=n(10),f=n(9),h=n(4),p=n(0),j=n(3),v=n(2),m=n(115),O=n.n(m),g=n(1),x={};x.MenuLabel=j.c.div(i||(i=Object(h.a)(["\n"]))),x.DropMenu=j.c.div(r||(r=Object(h.a)(["\n  cursor: pointer;\n  padding: 1rem;\n  font-size:3rem;\n  font-weight: 600;\n  margin-top: 1rem;\n  width:100%;\n\n  overflow:hidden;\n \n  background-color: ",";\n  color: ",";\n  text-shadow: .5px .5px 1.5px ",";\n\n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-radius:1rem;\n  border-color:  rgba(0, 0, 0, .2) rgba(255, 255, 255, .2) rgba(255, 255, 255, .2) rgba(0, 0, 0, .2);\n  box-shadow: -.1rem -.1rem .5rem black;\n\n  &:hover{\n    background-color: ",";\n    text-shadow: 1.5px 1.5px 1.5px ",";\n    transform: translate(-1px, -1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n\n  &:active{\n    background-color: ",";\n    transform: translate(.5px, 1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n"])),Object(v.f)("color","blue"),Object(v.f)("color","white"),Object(v.f)("color","black"),Object(v.e)("blue",10),Object(v.f)("color","black"),Object(v.e)("blue",-10)),x.DropItem=j.c.div(o||(o=Object(h.a)(["\n  padding:2rem 2rem;\n  text-align:right;\n  margin-top: 2rem;\n  max-height:15rem;\n  position:relative;\n\n  >*{\n    :first-child{\n    }\n    :last-child{\n      flex:1;\n    }\n  }\n\n\n  color: ",";\n  text-shadow: .5px .5px 1.5px ",";\n  background-color: ",";\n\n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.2) rgba(255, 255, 255, 0.2);\n  border-radius: 1rem;\n  box-shadow: .1rem .1rem .5rem black;\n\n  transition: background-color .1s ease-out;\n\n  &:hover{\n    background-color: ",";\n    text-shadow: 1.5px 1.5px 1.5px ",";\n    transform: translate(-1px, -1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n  \n  &:active{\n    background-color: ",";\n    transform: translate(.5px, 1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n\n  ","\n\n  >div{\n    display:inline-block;\n    vertical-align:middle;\n  }\n"])),Object(v.f)("color","white"),Object(v.f)("color","black"),Object(v.f)("color","blue"),Object(v.e)("blue",10),Object(v.f)("color","black"),Object(v.e)("blue",-10),(function(t){return t.isActive&&Object(j.b)(a||(a=Object(h.a)(["\n    color: ",";\n    text-shadow: 1px 1px 1.5px ",";\n    background-color: ",";\n\n    &:hover{\n      background-color: ",";\n    }\n  "])),Object(v.f)("color","yellow"),Object(v.f)("color","black"),Object(v.f)("color","green"),Object(v.e)("green",10))})),x.DropItemImgContainer=j.c.div(c||(c=Object(h.a)(["\n  width:106px;\n  height:106px;\n\n  img{\n    box-shadow: ",";\n    border: .5rem solid ",";\n    border-radius: 50%;\n    width:auto;\n    height:100%;\n  }\n\n"])),Object(v.f)("shadow","z2"),Object(v.f)("color","white")),x.DropItemLabel=j.c.div(s||(s=Object(h.a)(["\n  width:calc(100% - 106px);\n"]))),x.DropItems=j.c.div(l||(l=Object(h.a)(["\n"])));var y=function(t){Object(b.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={isOpen:!1},i}return Object(d.a)(n,[{key:"onItemClicked",value:function(t,e){this.props.onItemClick&&this.props.onItemClick(t,e)}},{key:"render",value:function(){var t=this,e=this.props,n=e.text,i=e.isActive,r=e.activeId,o=e.onClick,a=e.style,c=e.items;return Object(g.jsxs)(x.DropMenu,{isActive:i,onClick:function(t){return o&&o(t)},style:a,children:[Object(g.jsx)(x.MenuLabel,{children:n}),Object(g.jsx)(x.DropItems,{children:i&&c.map((function(e,n){return Object(g.jsx)(k,{isActive:e.id===r,thumbnail:"".concat(e.dir,"/assets/").concat(e.thumbnail),text:e.text,subText:e.subText,onClick:function(n){return t.onItemClicked(e.id,n)}},n)}))})]})}}]),n}(p.Component),k=function(t){var e=t.text,n=t.subText,i=t.isActive,r=t.onClick,o=t.style,a=t.thumbnail;return Object(g.jsxs)(x.DropItem,{isActive:i,onClick:function(t){return r&&r(t)},style:o,children:[Object(g.jsx)(x.DropItemImgContainer,{children:Object(g.jsx)(O.a,{src:a,fallbackImage:"ui/unknown_thumbnail.jpg",initialImage:"ui/unknown_thumbnail.jpg",alt:e})}),Object(g.jsxs)(x.DropItemLabel,{children:[Object(g.jsx)("h2",{children:e}),Object(g.jsx)("h5",{children:n})]})]})}},116:function(t,e,n){"use strict";(function(t){var i,r,o,a,c,s=n(7),l=n(8),u=n(10),d=n(9),b=n(4),f=n(0),h=n(3),p=n(14),j=n(21),v=n(2),m=n(13),O=n(1),g={};g.Wrapper=h.c.div(i||(i=Object(b.a)(["\n  width: 100%;\n  margin-bottom: 1rem;\n  \n  ","\n"])),(function(t){return t.isDisabled&&Object(h.b)(r||(r=Object(b.a)(["\n    opacity:.2;\n  "])))})),g.Label=h.c.div(o||(o=Object(b.a)(["\n  margin-bottom: .5rem;\n"]))),g.RangeInput=h.c.input(a||(a=Object(b.a)(["\n\n  -webkit-appearance: none;\n  width: 100%;\n  height: 1rem;\n  border-radius: .5rem;\n  background: ",";\n  outline: none;\n  cursor: pointer;\n  ","\n\n  &:disabled{\n    opacity:.5;\n  }\n  \n  &::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n    background: ",";\n    box-shadow: ",";\n    cursor: grab;\n  }\n\n  &::-moz-range-thumb {\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n    background: ",";\n    cursor: grab;\n  }\n"])),Object(v.c)("purple"),(function(t){return t.isInverted&&Object(h.b)(c||(c=Object(b.a)(["\n    direction: rtl;\n  "])))}),Object(v.c)("blue"),Object(v.f)("shadow","z1"),Object(v.c)("blue"));var x=function(e){Object(u.a)(i,e);var n=Object(d.a)(i);function i(t){var e;return Object(s.a)(this,i),(e=n.call(this,t)).throttleTimer=null,e}return Object(l.a)(i,[{key:"killThrottleTimer",value:function(){this.throttleTimer&&(t.clearTimeout(this.throttleTimer),this.throttleTimer=null)}},{key:"startThrottleTimer",value:function(e,n){var i=this;this.throttleTimer||(this.throttleTimer=t.setTimeout((function(){n&&n(),i.killThrottleTimer()}),e))}},{key:"onChangeSlider",value:function(t){var e=this;this.startThrottleTimer(100,(function(){return e.props.setSettingsValue({id:e.props.id,value:t})}))}},{key:"render",value:function(){var t=this,e=this.props,n=e.title,i=e.value,r=e.min,o=e.max,a=e.step,c=e.isInverted,s=e.isDisabled;return Object(O.jsxs)(g.Wrapper,{isDisabled:s,children:[Object(O.jsxs)(g.Label,{children:[Object(O.jsx)("span",{children:"".concat(n,":")}),Object(O.jsx)("span",{children:" ".concat(i)})]}),Object(O.jsx)(g.RangeInput,{id:"myRange",type:"range",min:r,max:o,step:a,value:i,disabled:s,onChange:function(e){return t.onChangeSlider(e.target.value)},isInverted:c})]})}}]),i}(f.Component);e.a=Object(j.b)((function(t){return{}}),(function(t){return Object(p.b)({setSettingsValue:m.f},t)}))(x)}).call(this,n(18))},117:function(t,e,n){"use strict";e.a=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,172)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),i(t),r(t),o(t),a(t)}))}},12:function(t,e,n){"use strict";n.d(e,"j",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"i",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"h",(function(){return u})),n.d(e,"k",(function(){return d})),n.d(e,"e",(function(){return b})),n.d(e,"c",(function(){return p})),n.d(e,"f",(function(){return j})),n.d(e,"g",(function(){return O})),n.d(e,"d",(function(){return g}));var i=n(63),r=n.n(i),o=function(t,e){if(!e)return Math.round(t);var n=Math.pow(10,e);return Math.round(t*n)/n},a=function(t,e,n){return Math.min(Math.max(t,e),n)},c=function(t){return t[0]+Math.random()*(t[1]-t[0])},s=function(t){return"object"===typeof t&&null!==t},l=function t(e){var n={};for(var i in e){var r=e[i];s(r)?n[i]=t(r):isNaN(r)?n[i]=r:n[i]=Number(r)}return n},u=function t(e,n,i){var r={};for(var o in i){var a=i[o];s(a)?r[o]=t(e,n,a):r[o]=o===e?"".concat(n).concat(a):a}return r},d=function(t,e){var n="";try{e&&(n=JSON.stringify(e))}catch(i){console.error("Problem stringifying obj",e)}f(t,n)},b=function(t){var e=h(t);if(!e)return null;try{return JSON.parse(e)}catch(n){return console.error("Problem parsing cookieString",e),null}},f=function(t,e,n){var i=new Date;i.setTime(i.getTime()+(n||3e12)),n="expires="+i.toUTCString(),document.cookie=t+"="+e+";"+n+";path=/"},h=function(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return""},p=function(t){f(t,"",1)},j=function(t){return r.a.parse(t)},v=["=","<","<=",">",">="],m=function(t){switch(t){case"=":return 0;case"<":case"<=":return-1;case">":case">=":return 1;default:return 0}},O=function(t){var e=t.split("_"),n=e[0],i=e[1].split("%"),r=i[0];return{condition:n,criteria:Number(r),isPercent:i.length>1,direction:m(n)}},g=function(t,e){var n,i=O(t);return n=i.isPercent?e.percent:e.cur,i.condition||console.error("evaluateSet(), condition is not defined! ",t),function(t,e,n){if(-1===v.indexOf(t))return console.error('evaluateExpression(): invalid condition "'.concat(t,'" from valueString "').concat(n,'"')),!1;switch(t){case"=":return n===e;case"<":return n<e;case"<=":return n<=e;case">":return n>e;case">=":return n>=e;default:return!1}}(i.condition,i.criteria,n)}},120:function(t,e,n){"use strict";var i,r,o,a,c=n(7),s=n(8),l=n(10),u=n(9),d=n(4),b=n(0),f=n(3),h=n(17),p=n(2),j=n(29),v=n.p+"static/media/unfold_more.c42abd3e.svg",m=n.p+"static/media/unfold_less.7d49cd1e.svg",O=n(1),g={};g.Base=f.c.div(i||(i=Object(d.a)(["\n  overflow-y:hidden;\n  border-bottom: .5rem solid;\n  box-shadow: 2px 2px 2px black;\n\n  background-color: ",";\n  transition: background-color .5s, color .5s;\n\n  &:hover{\n    background-color: ",";\n    transition: background-color .5s, color .5s;\n  }\n  color: ",";\n"])),Object(p.e)("white",0),Object(p.f)("color","green"),Object(p.f)("color","black")),g.Header=f.c.div(r||(r=Object(d.a)(["\n  padding: 2rem 3rem;\n  display:flex;\n  align-items:center;\n  cursor:pointer;\n\n  img{\n    width: 30px;\n  }\n  h2{\n    flex:1;\n    color: ",";\n    text-shadow: .1px .1px .5px ",";\n  }\n\n  &:hover{\n    h2{\n      text-shadow: .25px .25px 1.5px ",";\n    }\n  }\n"])),Object(p.f)("color","black"),Object(p.f)("color","black"),Object(p.f)("color","black")),g.Body=f.c.div(o||(o=Object(d.a)(["\n  padding: 0 3rem;\n  max-height:0;\n  ","\n"])),(function(t){return t.isOpen&&Object(f.b)(a||(a=Object(d.a)(["\n    max-height: none;\n  "])))}));var x,y,k=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).onPanelClick=i.onPanelClick.bind(Object(j.a)(i)),i.state={isOpen:!1},i}return Object(s.a)(n,[{key:"onPanelClick",value:function(t){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return Object(O.jsxs)(g.Base,{children:[Object(O.jsxs)(g.Header,{onClick:this.onPanelClick,children:[Object(O.jsx)("h2",{children:this.props.label}),this.state.isOpen?Object(O.jsx)("img",{src:v,alt:"loading"}):Object(O.jsx)("img",{src:m,alt:"loading"})]}),Object(O.jsx)(g.Body,{isOpen:this.state.isOpen,children:this.props.children})]})}}]),n}(b.Component),w=n(113),I=n(14),S=n(21),C=n(13),T=n(11),D=n(116),P={};P.Body=f.c.div(x||(x=Object(d.a)(["\n  ul{\n    padding:0;\n    margin: 0;\n    list-style:none;\n\n    text-align:left;\n  }\n"]))),P.Item=f.c.li(y||(y=Object(d.a)(["\n  display: inline-block;\n  width:100%;\n  margin-bottom: 1rem;\n\n  span:first-of-type{\n    font-weight: bold;\n  }\n\n  span:last-of-type{\n\n  }\n\n  &:last-of-type{\n    margin-bottom: 2rem;\n  }\n"])));var A,E,M,R,B,N,L,U,_=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).onPanelClick=i.onPanelClick.bind(Object(j.a)(i)),i.state={isOpen:!1},i}return Object(s.a)(n,[{key:"onPanelClick",value:function(t){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var t=this.props,e=[{id:"pingRate",title:"Stat Update Speed",min:50,max:5e3,step:10,isDisabled:!1,isInverted:!0,value:t.pingRate},{id:"volume",title:"Volume",min:0,max:100,step:5,isDisabled:!0,isInverted:!1,value:t.volume},{id:"animationSpeed",title:"Animation Speed",min:5,max:1e3,step:1,isDisabled:!0,isInverted:!0,value:t.animationSpeed}];return Object(O.jsx)(P.Body,{children:Object(O.jsx)("ul",{children:e.map((function(t,e){return Object(O.jsx)(P.Item,{children:Object(O.jsx)(D.a,{id:t.id,title:t.title,value:t.value,min:t.min,max:t.max,step:t.step,isDisabled:t.isDisabled,isInverted:t.isInverted})},e)}))})})}}]),n}(b.Component),z=Object(S.b)((function(t){return{pingRate:Object(T.w)(t),volume:Object(T.x)(t),animationSpeed:Object(T.v)(t)}}),(function(t){return Object(I.b)({setSettingsValue:C.f},t)}))(_),G=n(20),W=n(15);n(93);var X={};X.Menu=f.c.div(A||(A=Object(d.a)(["\n  position:absolute;\n  top:0;\n  right:0;\n  width:100%;\n  height:100%;\n"]))),X.MainPanel=f.c.div(E||(E=Object(d.a)(["\n  position:fixed;\n  top:0rem;\n  bottom:0;\n  border-left: 1rem solid ",";\n  box-shadow: ",";\n\n\n  @media ","{\n    max-width: calc(100% - 15rem);\n  }\n  @media ","{\n    max-width: calc(50%);\n  }\n  width:100%;\n\n  padding-right:0;\n  \n\n  ","\n"])),Object(p.c)("white"),Object(p.f)("shadow","z3"),p.b.mobile_tiny,p.b.tablet,(function(t){return t.isOpen?Object(f.b)(M||(M=Object(d.a)(["\n      right:0%;\n      transition:right .2s ease-in;\n    "]))):Object(f.b)(R||(R=Object(d.a)(["\n      right:-100%;\n      transition:right .3s ease-in;\n    "])))})),X.PanelContainer=f.c.div(B||(B=Object(d.a)(["\n  width:100%;\n  height:100%;\n  overflow-y:auto;\n"]))),X.ResetButton=f.c.div(N||(N=Object(d.a)(["\n  /* position:absolute; */\n  /* right:1rem; */\n  /* bottom:1rem; */\n  button{\n    background-color: ",";\n\n    &:hover{\n      background-color: ",";\n    }\n    &:active{\n      background-color: ",";\n    }\n  }\n"])),Object(p.c)("black"),Object(p.c)("red"),Object(p.e)("red",-20)),X.MenuButton=f.c.div(L||(L=Object(d.a)(["\n  z-index:2;\n  position:absolute;\n\n  top:.5rem;\n  right:calc(100% + 2rem);\n"]))),X.PanelBg=f.c.div(U||(U=Object(d.a)(["\n  width:100%;\n  height:100%;\n  position:absolute;\n  left:0;\n  right:0;\n  top:0;\n  bottom:0;\n  /* border-radius: 10px 0 0 10px; */\n\n  z-index:-1;\n  background-color: ",";\n  opacity:1;\n"])),Object(p.e)("black",0));var F,Y,K=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return Object(O.jsx)(X.Menu,{id:"menu",children:Object(O.jsxs)(X.MainPanel,{id:"main-panel",isOpen:this.props.isOpen,children:[Object(O.jsx)(X.MenuButton,{children:Object(O.jsx)(h.b,{text:"menu",onClick:function(){return t.props.onToggleMenu()}})}),Object(O.jsxs)(X.PanelContainer,{children:[Object(O.jsx)(k,{label:"Pet Selection",children:Object(O.jsx)(w.a,{onSelectPet:function(){return t.props.onToggleMenu(!1)}})}),Object(O.jsx)(k,{label:"Settings",children:Object(O.jsx)(z,{})}),Object(O.jsxs)(X.ResetButton,{children:[Object(O.jsx)(h.a,{text:"pet",onClick:function(){return t.props.history.push("/pet".concat(t.props.location.search))}}),Object(O.jsx)(h.a,{text:"editor",onClick:function(){return t.props.history.push("/editor".concat(t.props.location.search))}}),Object(O.jsx)(h.a,{text:"CLEAR SAVE",onClick:function(){return Object(G.b)()},style:{backgroundColor:Object(p.c)("red")}})]})]}),Object(O.jsx)(X.PanelBg,{})]})})}}]),n}(b.Component),V=Object(W.f)(K),H={};H.MenuContainer=f.c.div(F||(F=Object(d.a)(["\n  position:fixed;\n  top:0;\n  right:0;\n  z-index:2;\n"]))),H.MenuButton=f.c.div(Y||(Y=Object(d.a)(["\n  position:absolute;\n  right:.5rem;\n  top:.5rem;\n"])));var J=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(c.a)(this,n),(t=e.call(this)).state={isOpen:!1},t}return Object(s.a)(n,[{key:"onToggleMenu",value:function(t){this.setState({isOpen:void 0!==t?t:!this.state.isOpen})}},{key:"render",value:function(){var t=this;return Object(O.jsxs)(H.MenuContainer,{id:"menu-container",children:[Object(O.jsx)(H.MenuButton,{children:Object(O.jsx)(h.b,{text:"menu",onClick:function(){return t.onToggleMenu()}})}),Object(O.jsx)(V,{isOpen:this.state.isOpen,onToggleMenu:function(e){return t.onToggleMenu(e)}})]})}}]),n}(b.Component);e.a=J},121:function(t,e,n){"use strict";var i,r,o,a,c,s,l,u,d,b,f,h,p=n(7),j=n(8),v=n(10),m=n(9),O=n(4),g=n(0),x=n(3),y=n(56),k=n(14),w=n(21),I=n(2),S=n(17),C=n(12),T=n(6),D=n(1),P={};P.EffectMarker=x.c.div(i||(i=Object(O.a)(["\n  box-shadow: ",";\n  position:absolute;\n  height:100%;\n  z-index:1;\n  opacity: .5;\n\n  transition: opacity 1s;\n\n  ","\n\n  /* &:nth-child(odd){\n    .effect-label{\n      bottom:100%;\n      border-radius: 1rem 1rem 0 0;\n      border-bottom: 0;\n    }\n  }\n  &:nth-child(even){ */\n    .effect-label{\n      top:100%;\n      border-radius: 0 0 1rem 1rem;\n      border-top: 0;\n    }\n  /* } */\n\n"])),Object(I.f)("shadow","z3"),(function(t){return t.isActive&&Object(x.b)(r||(r=Object(O.a)(["\n    opacity: 1;\n    transition: opacity 1s;\n  "])))})),P.Stick=x.c.div(o||(o=Object(O.a)(["\n  width:8px;\n  height:100%;\n  opacity:1;\n  margin-left:-4px;\n\n  >*{\n    display:inline-block;\n    width:4px;\n    height:100%;\n  }\n\n  ","\n  ","\n"])),(function(t){return 1===t.direction&&Object(x.b)(a||(a=Object(O.a)(["\n    >.left{\n      background-color: ",";\n    }\n    >.right{\n      background-color: ",";\n    }\n  "])),Object(I.c)("white"),(function(t){return t.color}))}),(function(t){return-1===t.direction&&Object(x.b)(c||(c=Object(O.a)(["\n    >.left{\n      background-color: ",";\n    }\n    >.right{\n      background-color:  ",";\n    }\n  "])),(function(t){return t.color}),Object(I.c)("white"))})),P.Bubble=x.c.div(s||(s=Object(O.a)(["\n  box-shadow: ",";\n  border: .3rem solid ",";\n  background-color: ",";\n  position:absolute;\n\n  white-space: nowrap;\n  font-size: 1rem;\n\n\n  width:3rem;\n  height:2rem;\n\n  overflow:hidden;\n\n  >*{\n    position:absolute;\n    left:0;\n    top:0;\n    width:50%;\n    height:100%;\n\n    &.left{\n    }\n\n    &.right{\n      left:calc(50%);\n    }\n  }\n\n  transform:translateX(-50%);\n\n  ","\n  ","\n  ","\n"])),Object(I.f)("shadow","z3"),(function(t){return t.color}),(function(t){return t.color}),(function(t){return 1===t.direction&&Object(x.b)(l||(l=Object(O.a)(["\n    >.left{\n      background-color: ",";\n    }\n    >.right{\n      background-color: ",";\n    }\n  "])),Object(I.c)("white"),(function(t){return t.color}))}),(function(t){return-1===t.direction&&Object(x.b)(u||(u=Object(O.a)(["\n\n    >.left{\n      background-color: ",";\n    }\n    >.right{\n      background-color: ",";\n    }\n  "])),(function(t){return t.color}),Object(I.c)("white"))}),(function(t){return 0===t.direction&&Object(x.b)(d||(d=Object(O.a)(["\n    background-color: ",";\n  "])),Object(I.c)("white"))})),P.BubbleTip=x.c.div(b||(b=Object(O.a)(["\n\n  ","\n\n  pointer-events: none;\n  position:absolute;\n  background-color: ",";\n  border-radius: 1rem;\n  padding: 1rem;\n  box-shadow: ",";\n  font-size:1.25rem;\n  left:50%;\n  transform:translateX(-50%);\n\n  margin-top:3rem;\n\n  min-width: 15rem;\n\n  transition: opacity .3s, top .2s;\n"])),(function(t){return t.isShowing?Object(x.b)(f||(f=Object(O.a)(["\n    top:100%;\n    opacity: 1;\n  "]))):Object(x.b)(h||(h=Object(O.a)(["\n    top:0%;\n    opacity: 0;\n  "])))}),(function(t){return t.color}),Object(I.f)("shadow","z3"));var A,E,M,R,B,N,L,U=function(t){Object(v.a)(n,t);var e=Object(m.a)(n);function n(t){var i;return Object(p.a)(this,n),(i=e.call(this,t)).state={tooltipShowing:!1},i}return Object(j.a)(n,[{key:"onEnterBubble",value:function(t){this.setState({tooltipShowing:!0})}},{key:"onLeaveBubble",value:function(){this.setState({tooltipShowing:!1})}},{key:"renderMessage",value:function(t,e,n,i,r){var o=[];return o.push(Object(D.jsxs)("span",{children:["when ",Object(D.jsx)("strong",{children:e})," is ",Object(D.jsx)("strong",{children:t.when}),", I feel ",Object(D.jsx)("strong",{children:"".concat(t.mood.label)})]},"1")),n&&(i&&-1===r?o.push(Object(D.jsxs)("span",{children:["if i dont have enough ",Object(D.jsx)("strong",{children:e})," i'll die!"]},"2")):i||1!==r||o.push(Object(D.jsxs)("span",{children:["if i have too much ",Object(D.jsx)("strong",{children:e})," i'll die!"]},"2"))),o}},{key:"render",value:function(){var t=this,e=Object(T.a)({},this.props),n=e.effect,i=e.statObj,r=e.colorObj,o=e.isActive,a=function(t,e){var n,i=Object(C.g)(t.when);return n=i.isPercent?i.criteria:100*Object(C.j)(i.criteria/e.max,2),{label:t.mood.label,position:"".concat(n,"%"),direction:i.direction}}(n,i),c=Object(I.c)("white"),s=a.direction;return 1===s?c=r.plus:-1===s&&(c=r.minus),Object(D.jsxs)(P.EffectMarker,{style:{left:a.position},isActive:o,onMouseEnter:function(e){return t.onEnterBubble(e)},onMouseLeave:function(){return t.onLeaveBubble()},children:[Object(D.jsxs)(P.Stick,{color:c,isActive:o,direction:s,children:[Object(D.jsx)("div",{className:"left"}),Object(D.jsx)("div",{className:"right"})]}),Object(D.jsxs)(P.Bubble,{className:"effect-label",color:c,isActive:o,direction:s,alt:a.label,children:[Object(D.jsx)("div",{className:"left"}),Object(D.jsx)("div",{className:"right"})]}),Object(D.jsx)(P.BubbleTip,{color:c,isShowing:this.state.tooltipShowing,children:this.renderMessage(n,i.label,i.doesKill,i.fullIsGood,s)})]})}}]),n}(g.Component),_={};_.ProgressBar=x.c.div(A||(A=Object(O.a)(["\n  position:relative;\n  margin: 1rem;\n  margin-bottom: 3rem;\n  \n  color: ",";\n"])),Object(I.f)("color","black")),_.Bar=x.c.div(E||(E=Object(O.a)(["\n  position:relative;\n  border:.5rem solid ",";\n  border-radius: 1rem;\n  overflow:hidden;\n  padding:.25rem .5rem;\n  text-align:center;\n  background-color: ",";\n\n  box-shadow: 0px -2px 4px ",";\n"])),Object(I.f)("color","white"),Object(I.f)("color","white"),Object(I.e)("white",-40)),_.Value=x.c.span(M||(M=Object(O.a)(["\n  position: relative;\n  z-index:1;\n  /* color: white; */\n"]))),_.Label=x.c.div(R||(R=Object(O.a)(["\n  position:relative;\n  display:inline;\n\n  background-color:",";\n  padding: .25rem 1rem .5rem 1rem;\n  border-radius: 1rem 1rem 0rem 0rem;\n  border: .5rem solid white;\n  margin:0 0 -1rem .5rem;\n  /* color:","; */\n\n  >*{\n    display:inline-block;\n    vertical-align:middle;\n  }\n\n  h4{\n    width:60%;\n    font-size:2rem;\n  display:inline;\n  }\n  div{\n    width:40%;\n  }\n"])),Object(I.f)("color","blue"),Object(I.f)("color","black")),_.BarGroup=x.c.div(B||(B=Object(O.a)(["\n  /* allows canvas clicks behind menu elements */\n  /* pointer-events: all; */\n  \n  position:relative;\n  display:flex;\n  flex-direction:column;\n\n  \n  >*{\n    display:inline-block;\n    vertical-align:middle;\n  }\n\n\n  >div{\n    width:100%;\n  }\n  button{\n    position:absolute;\n    z-index:1;\n    border: 5px solid white;\n    box-shadow: none;\n    margin: 0;\n    padding: .2rem 1rem;\n\n    &:first-child{\n      /* background-color: ","; */\n      left:-1rem;\n      bottom: -1rem;\n    }\n    &:last-child{\n      /* background-color: ","; */\n      right:-1rem;\n      bottom: 1rem;\n    }\n  }\n"])),Object(I.f)("color","red"),Object(I.f)("color","green")),_.Bg=x.c.div(N||(N=Object(O.a)(["\n  position:absolute;\n  top:0;\n  left:0;\n  height:100%; \n  transition: width .3s ease-in-out, background-color .5s ease-in-out;\n"]))),_.EffectMarkers=x.c.div(L||(L=Object(O.a)(["\n  position:absolute;\n  width:100%;\n  height:100%;\n"])));var z,G,W,X,F,Y,K,V,H,J,q,Q=function(t){var e=t.statObj,n=t.label,i=t.isActive,r=t.augmentAction,o=t.sceneStyles,a=t.moods,c=function(t,e){return e[t]||e.neutral||"white"}(function(t,e,n){if("empty"===t){if(e<20)return n?"bad":"good";if(e>80)return n?"good":"bad"}else if("fill"===t){if(e<20)return n?"bad":"good";if(e>80)return n?"good":"bad"}return"neutral"}(e.fillType,e.percent,e.fullIsGood),o.bars),s=e.fullIsGood?Object(I.c)("red"):Object(I.c)("green"),l=e.fullIsGood?Object(I.c)("green"):Object(I.c)("red");return Object(D.jsxs)(_.ProgressBar,{style:{color:o.text},children:[Object(D.jsx)(_.Label,{children:Object(D.jsx)("h4",{children:n})}),Object(D.jsxs)(_.BarGroup,{children:[r&&Object(D.jsx)(S.b,{text:"-",onClick:function(t){return r(e.id,-15)},style:{backgroundColor:s}}),Object(D.jsx)(_.EffectMarkers,{children:e.effects.map((function(t,n){return Object(D.jsx)(U,{isOdd:n%2,isActive:a.indexOf(t.mood.id)>-1,effect:t,statObj:e,colorObj:{minus:s,plus:l}},n)}))}),Object(D.jsxs)(_.Bar,{isActive:i,children:[Object(D.jsx)(_.Value,{children:"".concat(Object(C.j)(e.cur)," / ").concat(e.max," (").concat(Object(C.j)(e.percent),"%)")}),Object(D.jsx)(_.Bg,{style:{width:"".concat(e.percent,"%"),backgroundColor:c}})]}),r&&Object(D.jsx)(S.b,{text:"+",onClick:function(t){return r(e.id,15)},style:{backgroundColor:l}})]})]})},Z=n(107),$=n(13),tt=n(26),et=n(11),nt={};nt.Wrapper=x.c.div(z||(z=Object(O.a)(["\n  padding: 1rem;\n  position:relative;\n  ","\n\n  >*{\n    /* allows canvas clicks behind menu elements */\n    pointer-events: all;\n  }\n"])),Object(I.d)()),nt.StatDisplay=x.c.div(G||(G=Object(O.a)(["\n  text-align:right;\n"]))),nt.StatDisplayLabel=x.c.span(W||(W=Object(O.a)(["\n  color: ",";\n  font-size:2rem;\n"])),Object(I.f)("color","white")),nt.StatDisplayValue=x.c.span(X||(X=Object(O.a)(["\n  color: ",";\n  margin-left:1rem;\n  font-size:3rem;\n"])),Object(I.f)("color","green")),nt.FooterUi=x.c.div(F||(F=Object(O.a)(["\n  position:fixed;\n  bottom:0;\n  right:0;\n  width:100%;\n"]))),nt.EffectsContainer=x.c.div(Y||(Y=Object(O.a)(["\n  position:absolute;\n  left:0;\n  bottom:0;\n"]))),nt.Name=x.c.div(K||(K=Object(O.a)(["\n  position:absolute;\n  right:2rem;\n  padding: 1rem 2rem;\n  padding-right:4rem;\n  bottom:1rem;\n  border: 4px solid black;\n  \n  border-radius:2rem;\n  background-color:white;\n  color:black;\n  text-align:center;\n"]))),nt.Level=x.c.div(V||(V=Object(O.a)(["\n  border-radius: 2rem;\n  border: 4px solid black;\n  padding: 1rem;\n  position:absolute;\n  right:-1rem;\n  top:-50%;\n  text-align:right;\n\n  font-style: bold;\n\n\n  color: ",";\n  background-color: ",";\n"])),Object(I.f)("color","blue"),Object(I.f)("color","white")),nt.InfoButton=x.c.div(H||(H=Object(O.a)(["\n  position:absolute;\n  right: .5rem;\n  bottom: .5rem;\n  z-index:1;\n"]))),nt.Info=x.c.div(J||(J=Object(O.a)(["\n  ","\n  max-height:500px;\n  transition: max-height .5s ease-in-out;\n  overflow: hidden;\n  opacity:1;\n  color: ",";\n\n  padding: 1rem;\n  margin: .5rem;\n  font-weight: bold;\n  width:100%;\n\n  ","\n"])),Object(I.d)(),(function(t){return Object(I.c)("black")}),(function(t){return!t.showInfo&&Object(x.b)(q||(q=Object(O.a)(["\n    width:0;\n    max-height:0;\n    opacity:0;\n    transition: max-height .5s ease-in-out, opacity .2s, width .5s;\n    transition-delay: 0s, 0s, .5s;\n  "])))}));var it,rt,ot,at,ct=function(t){var e=t.statObj;return Object(D.jsxs)(nt.StatDisplay,{children:[Object(D.jsx)(nt.StatDisplayLabel,{children:e.label}),Object(D.jsx)(nt.StatDisplayValue,{children:e.cur})]})},st=function(t){Object(v.a)(n,t);var e=Object(m.a)(n);function n(t){var i;return Object(p.a)(this,n),(i=e.call(this,t)).state={isInfoOpen:!1},i}return Object(j.a)(n,[{key:"onToggleShowInfo",value:function(t){this.setState({isInfoOpen:void 0!==t?t:!this.state.isInfoOpen})}},{key:"updateStat",value:function(t,e){console.log("updateStat",t,e),this.props.augmentStat(t,e),this.props.ping()}},{key:"resetPet",value:function(t){console.log("resetters"),this.props.resetPet(t),this.props.ping()}},{key:"getDeadStats",value:function(t){return t.filter((function(t){if(t.doesKill){if(t.fullIsGood&&0===t.cur)return!0;if(!t.fullIsGood&&t.cur===t.max)return!0}return!1}))}},{key:"checkForDead",value:function(t){this.getDeadStats(t).length>0&&this.props.killPet(this.props.activePet.id)}},{key:"render",value:function(){var t=this,e=this.props,n=e.activePet,i=e.behavior,r=e.deltaStats,o=e.forceBehavior,a=e.forcedBehavior,c=e.sceneStyles,s=e.moods,l=e.activities;if(!n||!c)return null;var u=n.data,d=Object.keys(u.behaviors),b=r.find((function(t){return"level"===t.id}))?r.find((function(t){return"level"===t.id})).cur:-1;n.isAlive&&this.checkForDead(r);var f=Object.keys(u.moods).map((function(t){return{id:t,label:u.moods[t].label||t}}));return Object(D.jsxs)(nt.Wrapper,{children:[r.map((function(e,n){return"number"===e.type?Object(D.jsx)(ct,{statObj:e},n):Object(D.jsx)(Q,{sceneStyles:c,statObj:e,moods:s,label:e.label,augmentAction:function(e,n){return t.updateStat(e,n)}},n)})),Object(D.jsxs)(nt.InfoButton,{children:[Object(D.jsx)(S.b,{text:"info",onClick:function(e){return t.onToggleShowInfo()}}),Object(D.jsx)(S.b,{text:"Reset Pet",onClick:function(){return t.resetPet(n.id)},style:{backgroundColor:Object(I.c)("red")}})]}),Object(D.jsxs)(nt.Info,{showInfo:this.state.isInfoOpen,children:[Object(D.jsx)("p",{children:"Activities"}),Object(D.jsx)(S.c,{isActive:l.indexOf("WALKING")>-1,text:"WALKING"}),Object(D.jsx)(S.c,{isActive:l.indexOf("JUMPING")>-1,text:"JUMPING"}),Object(D.jsx)(S.c,{isActive:l.indexOf("DUCKING")>-1,text:"DUCKING"}),Object(D.jsx)(S.c,{isActive:l.indexOf("EATING")>-1,text:"EATING"}),Object(D.jsx)(S.c,{isActive:l.indexOf("ROAMING")>-1,text:"ROAMING"}),Object(D.jsx)("hr",{}),Object(D.jsx)("p",{children:"Moods"}),f.map((function(t,e){return Object(D.jsx)(S.c,{isActive:s.indexOf(t.id)>-1,text:t.label,onClick:function(){}},e)})),Object(D.jsx)("hr",{}),Object(D.jsx)("p",{children:"Behaviors (click to toggle override)"}),d.map((function(t,e){return a===t?Object(D.jsx)(S.b,{isActive:i===t,text:t,onClick:function(){return o(t)},style:{backgroundColor:Object(I.c)("purple")}},e):Object(D.jsx)(S.b,{isActive:i===t,text:t,onClick:function(){return o(t)}},e)})),Object(D.jsx)("hr",{})]}),Object(D.jsxs)(nt.FooterUi,{children:[Object(D.jsx)(nt.EffectsContainer,{children:u.statEvents&&u.statEvents.map((function(e,n){return Object(D.jsx)(Z.a,{statEventObj:e,onImmediateUpdate:function(e,n){return t.updateStat(e,n)}},n)}))}),Object(D.jsxs)(nt.Name,{children:[Object(D.jsx)("span",{children:"".concat(u.name," the ").concat(u.animal)}),Object(D.jsx)(nt.Level,{children:Object(D.jsx)("span",{children:b})})]})]})]})}}]),n}(g.Component),lt=Object(w.b)((function(t){return{activePet:Object(et.h)(t),deltaStats:Object(et.f)(t),sceneStyles:Object(et.p)(t),behavior:Object(et.k)(t),forcedBehavior:Object(et.d)(t),moods:Object(et.g)(t),activities:Object(et.i)(t)}}),(function(t){return Object(k.b)({augmentStat:tt.b,forceBehavior:tt.d,resetPet:tt.g,ping:$.b,killPet:tt.e},t)}))(st),ut={};ut.Main=x.c.div(it||(it=Object(O.a)(["\n  position:absolute;\n  top:0;\n  right:0;\n  bottom:0;\n  left:0;\n  z-index:1;\n"]))),ut.Stage=x.c.section(rt||(rt=Object(O.a)(["\n  position:relative;\n  width: 100%;\n  height: 100%;\n\n  padding: .5rem;\n"]))),ut.CageContainer=x.c.div(ot||(ot=Object(O.a)(["\n  position:absolute;\n  top:0;\n  right:0;\n  bottom:0;\n  left:0;\n  z-index:-1;\n"]))),ut.InfoContainer=x.c.div(at||(at=Object(O.a)(["\n  /* allow canvas clicks under menu elements */\n  pointer-events:none;\n\n  margin:1rem;\n  z-index:1;\n  margin-top:5rem;\n"])));var dt=function(t){Object(v.a)(n,t);var e=Object(m.a)(n);function n(t){var i;return Object(p.a)(this,n),(i=e.call(this,t)).state={isOpen:!1},i}return Object(j.a)(n,[{key:"onToggleMenu",value:function(t){this.setState({isOpen:void 0!==t?t:!this.state.isOpen})}},{key:"render",value:function(){return Object(D.jsx)(ut.Main,{children:Object(D.jsxs)(ut.Stage,{children:[Object(D.jsx)(ut.InfoContainer,{id:"info-container",children:Object(D.jsx)(lt,{})}),Object(D.jsx)(ut.CageContainer,{children:Object(D.jsx)(y.a,{})})]})})}}]),n}(g.Component);e.a=dt},123:function(t,e,n){"use strict";var i,r,o,a=n(7),c=n(8),s=n(10),l=n(9),u=n(4),d=n(0),b=n(3),f=n(119),h=n(188),p=n(191),j=n(112),v=n.n(j),m=n(190),O=(n(2),n(56)),g=n(1),x={};x.PetCell=b.c.div(i||(i=Object(u.a)(["\n  border: 5px solid white;\n  height:200px;\n\n  >div{\n    display:inline-block;\n    vertical-align:middle;\n    height:100%;\n  }\n"]))),x.PetFrame=b.c.div(r||(r=Object(u.a)(["\n  width: 33%;\n  border:1px solid red;\n"]))),x.Controls=b.c.div(o||(o=Object(u.a)(["\n  width: 66%;\n  height: 100px;\n  border:1px solid yellow;\n"])));var y,k=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(x.PetCell,{children:[Object(g.jsx)(x.PetFrame,{children:Object(g.jsx)(O.a,{})}),Object(g.jsxs)(x.Controls,{children:[Object(g.jsx)(m.a,{variant:"contained",color:"primary",children:"This is a button"}),Object(g.jsx)(m.a,{variant:"contained",color:"primary",children:"This is a button"}),Object(g.jsx)(m.a,{variant:"contained",color:"primary",children:"This is a button"})]})]})}}]),n}(d.Component),w={};w.Editor=b.c.div(y||(y=Object(u.a)(["\n  position:absolute;\n  top:0;\n  right:0;\n  bottom:0;\n  left:0;\n  z-index:1;\n"])));var I=Object(f.a)({palette:{type:"dark",primary:{main:v.a[500]}}}),S=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(g.jsx)(h.a,{theme:I,children:Object(g.jsx)(p.a,{children:Object(g.jsxs)(w.Editor,{children:[Object(g.jsx)(k,{}),Object(g.jsx)(k,{}),Object(g.jsx)(k,{}),Object(g.jsx)(k,{})]})})})}}]),n}(d.Component);e.a=S},124:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n(7),r=n(8),o=n(10),a=n(9),c=n(0),s=n.n(c),l=n(6),u=n(122),d=n(1),b=function(t){var e=t.onStageClick,n=t.canvasWidth,i=t.canvasHeight,r=t.drawCommands,o=t.drawProps,a=t.tick,b=s.a.useState(0),f=Object(u.a)(b,2),h=f[0],p=f[1];return Object(c.useEffect)((function(){h&&r.forEach((function(t){t(h,Object(l.a)(Object(l.a)({},o),{},{tick:a}))}))}),[a,h,r,o]),Object(d.jsx)("canvas",{onClick:e,width:n,height:i,ref:function(t){return t?p(t.getContext("2d")):null}})},f=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).frames=0,r.state={img:null,overlayImg:null,loadStarted:!1},r}return Object(r.a)(n,[{key:"updateImage",value:function(t,e){var n=this;if((t||e)&&this.setState({loadStarted:!0}),t){var i=new Image;i.src=t,i.onload=function(){n.setState({img:i})}}else this.setState({imageUrl:null});if(e){var r=new Image;r.src=e,r.onload=function(){n.setState({overlayImg:r})}}else this.setState({overlayImg:null})}},{key:"componentDidUpdate",value:function(t){var e=this.props.animation,n=e.imageUrl,i=e.overlayUrl;this.props.overlayUrl&&console.log(this.props.overlayUrl),n&&(t.animation.imageUrl!==n||t.animation.overlayUrl!==i?this.updateImage(n,i):this.state.img||this.state.loadStarted||this.updateImage(n,i))}},{key:"render",value:function(){return Object(d.jsx)(b,{tick:this.props.tick,canvasWidth:this.props.containerWidth,canvasHeight:this.props.containerHeight,onStageClick:this.props.onStageClick,drawCommands:this.props.drawCommands,drawProps:{sprite:this.state.img,overlaySprite:this.state.overlayImg,spriteInfo:this.props.animation.spriteInfo,direction:this.props.direction}})}}]),n}(c.Component)},125:function(t,e,n){"use strict";n.r(e),function(t){n(0);var e=n(36),i=n.n(e),r=n(94),o=n(117),a=n(21),c=n(49),s=n(3),l=n(79),u=n(2),d=n(78),b=n(1);t.store=l.a,Object(d.b)(0),t.logger=d.a,i.a.render(Object(b.jsx)(a.a,{store:l.a,children:Object(b.jsx)(c.a,{children:Object(b.jsx)(s.a,{theme:u.a,children:Object(b.jsx)(r.a,{})})})}),document.getElementById("root")),Object(o.a)()}.call(this,n(18))},13:function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"g",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return u}));var i=n(28),r=Object(i.a)("SET_MANIFEST"),o=Object(i.a)("STORE_MANIFEST_ITEM"),a=Object(i.a)("LOAD_EXTERNAL_ITEM"),c=Object(i.a)("SET_SETTINGS_VALUE"),s=(Object(i.a)("SET_OTHER_DATA"),Object(i.a)("SET_ACTIVE_PET_TYPE")),l=Object(i.a)("SET_ACTIVE_PET_ID"),u=Object(i.a)("PING")},150:function(t,e){},152:function(t,e){},17:function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return O}));var i,r,o,a,c,s,l,u,d=n(4),b=(n(0),n(3)),f=n(2),h=n(1),p={};p.NotAButton=b.c.div(i||(i=Object(d.a)(["\n  color: ",";\n  text-shadow: .5px .5px 1.5px ",";\n  /* background-color: ","; */\n  /* border-radius: 1rem; */\n  /* border: .2rem solid rgba(255, 255, 255, 0.2); */\n\n  display:inline-block;\n\n\n  \n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-radius:1rem;\n  border-color:  rgba(0, 0, 0, .2) rgba(255, 255, 255, .2) rgba(255, 255, 255, .2) rgba(0, 0, 0, .2);\n  box-shadow: -.1rem -.1rem .5rem black;\n  background-color: ",";\n\n\n  \n  ","\n\n  \n  padding: .5rem 1.5rem;\n  margin: .5rem;\n  font-size: 2rem;\n  font-weight: 600;\n\n  span{\n  }\n"])),Object(f.f)("color","grey"),Object(f.f)("color","black"),Object(f.f)("color","grey"),Object(f.f)("color","black"),(function(t){return t.isActive&&Object(b.b)(r||(r=Object(d.a)(["\n    color: ",";\n    text-shadow: .5px .5px .75px ",";\n    background-color: ",";\n  "])),Object(f.f)("color","grey"),Object(f.f)("color","black"),Object(f.f)("color","yellow"))})),p.Button=b.c.button(o||(o=Object(d.a)(["\n  cursor:pointer;\n  position:relative;\n\n  pointer-events: all;\n  outline:0;\n  \n  border:none;\n  border-radius: 1rem;\n\n  font-size:3rem;\n\n  color: ",";\n  text-shadow: .5px .5px 1.5px ",";\n  background-color: ",";\n\n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.2) rgba(255, 255, 255, 0.2);\n  border-radius: 1rem;\n  box-shadow: .1rem .1rem .5rem black;\n\n \n  transition: background-color .1s ease-out;\n\n  &:hover{\n    background-color: ",";\n    text-shadow: 1.5px 1.5px 1.5px ",";\n    transform: translate(-1px, -1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n\n    .button-tooltip{\n      opacity:1;\n      left:100%;\n    }\n  }\n  \n  &:active{\n    /* down state wasnt resetting on buttons that slid out */\n\n    \n    /* background-color: ","; */\n    /* transform: translate(.5px, 1px); */\n    \n    /* transition: background-color .1s ease-out, transform .1s ease-out; */\n  }\n\n  ","\n\n  ","\n"])),Object(f.f)("color","white"),Object(f.f)("color","black"),Object(f.f)("color","blue"),Object(f.e)("blue",10),Object(f.f)("color","black"),Object(f.e)("blue",-10),(function(t){return t.isDisabled&&Object(b.b)(a||(a=Object(d.a)(["\n    color: ",";\n    text-shadow: 1px 1px 1.5px ",";\n    background-color: ",";\n\n    &:hover{\n      background-color: ",";\n    }\n  "])),Object(f.f)("color","black"),Object(f.f)("color","black"),Object(f.f)("color","grey"),Object(f.e)("grey",10))}),(function(t){return t.isActive&&Object(b.b)(c||(c=Object(d.a)(["\n    color: ",";\n    text-shadow: 1px 1px 1.5px ",";\n    background-color: ",";\n\n    &:hover{\n      background-color: ",";\n    }\n  "])),Object(f.f)("color","yellow"),Object(f.f)("color","black"),Object(f.f)("color","green"),Object(f.e)("green",10))})),p.BigButton=Object(b.c)(p.Button)(s||(s=Object(d.a)(["\n  padding: 1rem 2rem;\n  margin: 1rem;\n  font-size:3rem;\n  font-weight: 600;\n"]))),p.LilButton=Object(b.c)(p.Button)(l||(l=Object(d.a)(["\n  padding: .5rem 1.5rem;\n  margin: .5rem;\n  font-size: 2rem;\n  font-weight: 600;\n"]))),p.Tooltip=b.c.div(u||(u=Object(d.a)(["\n  z-index:1;\n  opacity:0;\n  left:0%;\n\n  pointer-events:none;\n\n  position:absolute;\n  top:50%;\n  transform: translateY(-50%);\n\n\n  transition: opacity .4s ease-in-out, left .2s ease-in-out;\n  padding:.5rem 1rem;\n\n  color: ",";\n  background-color: ",";\n\n  border-radius:1rem;\n  margin:1;\n  white-space:pre-line;\n  min-width:auto;\n  max-width:auto;\n\n  font-size: 1.5rem;\n  text-shadow:none;\n  margin-left:1rem;\n"])),Object(f.f)("color","black"),Object(f.f)("color","white"));var j=function(t){var e=t.text;return Object(h.jsx)(p.Tooltip,{className:"button-tooltip",children:Object(h.jsx)("p",{children:e})})},v=function(t){var e=t.text,n=t.isActive,i=t.isDisabled,r=t.onClick,o=t.style,a=t.tooltip;return Object(h.jsxs)(p.BigButton,{isActive:n,disabled:i,isDisabled:i,onClick:function(t){return r&&r(t)},style:o,title:a,children:[Object(h.jsx)("span",{children:e}),a&&Object(h.jsx)(j,{text:a})]})},m=function(t){var e=t.text,n=t.isActive,i=t.isDisabled,r=t.onClick,o=t.style,a=t.tooltip;return Object(h.jsxs)(p.LilButton,{isActive:n,disabled:i,isDisabled:i,onClick:function(t){return r&&r(t)},style:o,title:a,children:[Object(h.jsx)("span",{children:e}),a&&Object(h.jsx)(j,{text:a})]})},O=function(t){var e=t.text,n=t.isActive,i=(t.isDisabled,t.onClick),r=t.style;return Object(h.jsx)(p.NotAButton,{isActive:n,onClick:function(t){return i&&i(t)},style:r,children:Object(h.jsx)("span",{children:e})})}},2:function(t,e,n){"use strict";n.d(e,"f",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return p})),n.d(e,"e",(function(){return j}));var i,r=n(4),o=n(97),a=n(3),c=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n,i=t.theme,r=Object(o.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!i[a])return console.error("[Theming] Could not find",a,"in",i),"";i=i[a]}}catch(c){r.e(c)}finally{r.f()}return i}},s=function(t){return u.color[t]},l=function(){return Object(a.b)(i||(i=Object(r.a)(["\n    border: .2rem solid rgba(255, 255, 255, 0.2);\n    border-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.2) rgba(255, 255, 255, 0.2);\n    border-radius: 1rem;\n    box-shadow: .1rem .1rem .5rem black;\n  "])))},u={color:{black:"#000000",grey:"#373737",grey_light:"#A39F8E",white:"#fef8dd",blue:"#1fb9f3",green:"#51f249",yellow:"#fff249",red:"#F55658",purple:"#6b1ff3"},shadow:{z1:"-0.1rem 0.1rem .25rem .1rem rgba(0,0,0,0.16)",z2:"-0.1rem 0.1rem .25rem .1rem rgba(0,0,0,0.36)",z3:"-.2rem .5rem 1rem .2rem rgba(0,0,0,.36)"},value:{headerHeight:"7.5rem",menuWidth:"12rem"},mixins:{},breakpoints:{mobile_tiny:"300px",mobile_medium:"400px",mobile_large:"500px",tablet:"768px",desktop:"1024px"}},d="400px",b="500px",f="768px",h="1024px",p={mobile_tiny:"(min-width: ".concat("300px",")"),mobile_medium:"(min-width: ".concat(d,")"),mobile_large:"(min-width: ".concat(b,")"),tablet:"(min-width: ".concat(f,")"),desktop:"(min-width: ".concat(h,")")},j=function(t,e){var n=u.color[t]||t,i=parseInt(n.substring(1,3),16),r=parseInt(n.substring(3,5),16),o=parseInt(n.substring(5,7),16);return i=parseInt(i*(100+e)/100),r=(r=parseInt(r*(100+e)/100))<255?r:255,o=(o=parseInt(o*(100+e)/100))<255?o:255,"#"+(1===(i=i<255?i:255).toString(16).length?"0"+i.toString(16):i.toString(16))+(1===r.toString(16).length?"0"+r.toString(16):r.toString(16))+(1===o.toString(16).length?"0"+o.toString(16):o.toString(16))};e.a=u},20:function(t,e,n){"use strict";(function(t){n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"g",(function(){return l})),n.d(e,"k",(function(){return u})),n.d(e,"f",(function(){return j})),n.d(e,"d",(function(){return m})),n.d(e,"h",(function(){return g})),n.d(e,"a",(function(){return x})),n.d(e,"j",(function(){return I})),n.d(e,"i",(function(){return S})),n.d(e,"b",(function(){return C}));var i=n(6),r=n(12),o={thinkRange:[200,2e3],doRange:[200,2e3],jumpChance:.01,jumpForce:.8,xForce:1,yForce:1,maxVx:2},a={pets:[],taxonomy:[]},c=function(){return a.pets},s=function(t){return a.pets.find((function(e){return e.id===t}))||null},l=function(){return a.taxonomy},u=function(t,e,n){var i=h(),r=i.pets.find((function(e){return e.id===t})),o=d(t,e,r,i,n);b(t,o),a.taxonomy=function(t,e){var n=e.findIndex((function(e){return e.type===t.type}));if(n>-1){var i=e[n];i.pets.push({id:t.id,label:t.name}),e[n]=i}else e.push({type:t.type,pets:[{id:t.id,label:t.name}]});return e}(o,a.taxonomy)},d=function(t,e,n,a,c){var s=e.behaviors.DEFAULT;if(!s)try{s=e.behaviors[Object.keys(e.behaviors)[0]]}catch(h){console.error('could not autodeclare default status for pet "'.concat(t,'"'))}var l=f(e.moodSwings),u=function(t){return t.map((function(t,e){return{id:t.id,label:t.label,type:t.type||"event",cooldown:t.cooldown?parseInt(t.cooldown):0,statEffects:t.statEffects.map((function(t){return Object(r.b)(t)}))}}))}(e.statEvents||[]),d=e.stats,b=[];return n?(b=p(d,n.stats,!0),e.isAlive=n.isAlive):(b=d,e.isAlive=!0),e.stats_saved={timestamp:a.timestamp||(new Date).getTime(),isAlive:a.isAlive,stats:b.map((function(t){return w(t)}))},console.log("personality",e.personality),e.personality=Object(i.a)(Object(i.a)({},o),e.personality),Object(i.a)(Object(i.a)({},e),{},{id:t,dir:c.url,behaviors:Object(i.a)(Object(i.a)({},e.behaviors),{},{DEFAULT:s}),moodSwings:l,statEvents:u})},b=function(t,e,n){var i=a.pets.findIndex((function(e){return e.id===t}));i>-1?a.pets[i]=e:a.pets.push(e),n&&k()},f=function(t){return t||[]},h=function(){var t=Object(r.e)("tly_virtualpet");return t&&(!t.schemaVersion||t.schemaVersion<5)&&(console.warn("Schema version ".concat(t.schemaVersion," is behind version ").concat(5,", resetting all your data, sorry bubs")),Object(r.c)("tly_virtualpet"),t=null),t||{schemaVersion:5,timestamp:null,pets:[]}},p=function(t,e,n){for(var r=t.slice(0),o=function(t){var o=e[t],a=r.findIndex((function(t){return t.id===o.id}));a>-1?n&&(r[a]=Object(i.a)(Object(i.a)({},r[a]),o)):r.push(o)},a=0;a<e.length;a++)o(a);return r},j=function(t){var e=s(t);return e?e.stats.map((function(t){return{doesKill:t.doesKill||!1,fullIsGood:t.fullIsGood,max:t.max,moods:t.moods||[]}})):[]},v=function(t,e,n){var r=t.map((function(t){var n=e.stats.find((function(e){return e.id===t.id}));return Object(i.a)(Object(i.a)({},t),n)}));return{timestamp:e.timestamp||n,stats:r.map((function(t){return e=t,Object(i.a)(Object(i.a)({},e),{},{value:Number(e.value),perSecond:Number(e.perSecond),max:Number(e.max)});var e}))}},m=function(t,e){var n=s(t),i=v(n.stats,n.stats_saved,e);return O(i,e)},O=function(t,e){var n=t.stats||[],o=(e-t.timestamp)/1e3;return n.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{value:t.value,max:t.max,current:Math.round(Object(r.a)(t.value+t.perSecond*o,0,t.max)),moods:t.moods})}))},g=function(t){console.log("KILL THIS PET ",t);var e=s(t);e.isAlive=!1,b(t,e,!0)},x=function(t,e,n){var i=(new Date).getTime(),o=m(t,i).slice(0),a=o.findIndex((function(t){return t.id===e})),c=o[a].current+n;o[a].current=Object(r.a)(c,0,o[a].max),y(t,o,i)},y=function(t,e,n){var r=s(t);r.stats_saved={timestamp:n,isAlive:r.isAlive,stats:e.map((function(t){return w(Object(i.a)(Object(i.a)({},t),{},{value:t.current}))}))},b(t,r,!0)},k=function(){console.log("saveAllPetStatsToCookie"),Object(r.k)("tly_virtualpet",{schemaVersion:5,timestamp:(new Date).getTime(),pets:a.pets.map((function(t){return Object(i.a)(Object(i.a)({},t.stats_saved),{},{id:t.id})}))})},w=function(t){return{id:t.id,value:t.value,type:t.type,label:t.label,perSecond:t.perSecond,max:t.max,fullIsGood:t.fullIsGood,doesKill:t.doesKill}},I=function(){a.pets.forEach((function(t){var e=(new Date).getTime(),n=m(t.id,e).slice(0);t.stats_saved={timestamp:e,isAlive:t.isAlive,stats:n.map((function(t){return w(Object(i.a)(Object(i.a)({},t),{},{value:t.current}))}))},b(t.id,t)})),k()},S=function(t){console.log('resetting pet "'.concat(t,'"'));var e=(new Date).getTime(),n=s(t),i=n.stats;n.isAlive=!0,n.stats_saved={timestamp:e,isAlive:!0,stats:i.map((function(t){return w(t)}))},b(t,n)},C=function(){a.pets=[],Object(r.c)("tly_virtualpet"),t.location.reload()};t.petStore={getAllData:function(){return a},deleteAllData:function(){return C()},getSavedData:function(){return h()},getPets:function(){return c()},getPetStoreData:function(t){return function(t){return a[t]}(t)},getPetDefinition:function(t){return s(t)},getPetDeltaStats:function(t,e){return m(t,e)}}}).call(this,n(18))},26:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"f",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"g",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return u}));var i=n(28),r=(Object(i.a)("INCREMENT_XP"),Object(i.a)("ADD_ACTIVITY")),o=Object(i.a)("REMOVE_ACTIVITY"),a=Object(i.a)("FORCE_BEHAVIOR"),c=Object(i.a)("RESET_PET"),s=Object(i.a)("KILL_PET"),l=Object(i.a)("CLICK_PET"),u=Object(i.a)("AUGMENT_STAT",(function(t,e){return{id:t,value:e}}))},46:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c}));var i=n(12),r={items:[],scenes:[]},o=function(t,e){var n=Object(i.b)(t),r=Object(i.h)("imageUrl","".concat(e.url,"/assets/"),n);a(r)},a=function(t){r.scenes.push(t)},c=function(t){return r.scenes.find((function(e){return e.id===t}))||null};t.itemStore={getAllData:function(){return r},getItems:function(){return r.items},getScenes:function(){return r.scenes},getSceneDefinition:function(t){return c(t)}}}).call(this,n(18))},56:function(t,e,n){"use strict";(function(t){var i,r=n(7),o=n(8),a=n(29),c=n(10),s=n(9),l=n(4),u=n(0),d=n.n(u),b=n(3),f=n(14),h=n(21),p=n(2),j=n(12),v=n(103),m=n(11),O=n(106),g=n(1),x={};x.Cage=b.c.div(i||(i=Object(l.a)(["\n  position:relative;\n\n  width:100%;\n  height:100%;\n\n  color: ",";\n\n  h2{\n    color: ",";\n  }\n"])),Object(p.f)("color","blue"),Object(p.f)("color","white"));var y=function(e){Object(c.a)(i,e);var n=Object(s.a)(i);function i(t){var e;return Object(r.a)(this,i),(e=n.call(this,t)).containerRef=d.a.createRef(),e.onResize=e.onResize.bind(Object(a.a)(e)),e.state={containerWidth:500,containerHeight:500},e}return Object(o.a)(i,[{key:"componentDidUpdate",value:function(t){!t.activePetId&&this.props.activePetId&&this.onResize()}},{key:"componentDidMount",value:function(){t.addEventListener("resize",this.onResize),this.onResize()}},{key:"onResize",value:function(){this.updateCanvasDims()}},{key:"updateCanvasDims",value:function(){if(this.containerRef.current){Object(j.a)(this.containerRef.current.offsetWidth/1e3,.3,1),Object(j.a)(this.containerRef.current.offsetHeight/1e3,.3,1);this.setState({containerWidth:this.containerRef.current.offsetWidth,containerHeight:this.containerRef.current.offsetHeight})}}},{key:"render",value:function(){var t=this.props.activePetId;return t?Object(g.jsxs)(x.Cage,{ref:this.containerRef,children:[Object(g.jsx)(v.a,{activePetId:t,containerWidth:this.state.containerWidth,containerHeight:this.state.containerHeight}),Object(g.jsx)(O.a,{})]}):null}}]),i}(u.Component);e.a=Object(h.b)((function(t){return{activePetId:Object(m.l)(t)}}),(function(t){return Object(f.b)({},t)}))(y)}).call(this,n(18))},64:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var i={stages:[],stageIdx:0},r=function t(e,n){var r=i.stageIdx;if(r>=e.length)return null;var o=e[r].items[n]||null;return o?{id:o.id,url:o.url,itemIdx:n,stageIdx:r}:(i.stageIdx=i.stageIdx+1,t(e,0))},o=function(t){var e=r(i.stages,t);return e?{type:i.stages[e.stageIdx].type,idx:e.itemIdx,id:e.id,url:e.url}:(console.log("All manifest items loaded."),null)},a=function(t){t&&0!==t.length||console.error("No manifest items loaded, or there was some error"),i.stages=t};t.manifestHelper={getAllData:function(){return i}}}).call(this,n(18))},78:function(t,e,n){"use strict";n.d(e,"b",(function(){return o}));var i=n(62),r={entries:[-1],level:0,logIdx:-1},o=function(t){r.entries=[],r.level=t||0,r.logIdx=-1},a=function(t,e){var n;-1===e&&(e=r.logLevel),(n=console).log.apply(n,Object(i.a)(t))},c=function(){a(r.entries[r.logIdx],r.level)},s={init:o,send:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.entries.push(e),r.logIdx=r.entries.length-1,c()},sendQuiet:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.entries.push(e),r.logIdx=r.entries.length-1},output:a,log:c,logNext:function(){r.logIdx===r.entries.length-1||r.logIdx++,a(r.entries[r.logIdx],r.level)},logPrevious:function(){0!==r.length&&-1!==r.logIdx&&(1===r.length||0===r.logIdx||r.logIdx--,a(r.entries[r.logIdx],r.level))},logLast:function(){r.logIdx=r.entries.length-1,r.logIdx>-1&&(console.log("idx",r.logIdx),a(r.entries[r.logIdx],r.level))}};e.a=s},79:function(t,e,n){"use strict";var i,r,o=n(14),a=n(118),c=n(22),s=n(6),l=n(13),u=n(28),d=Object(u.a)("SET_TRANSITION"),b=function(t){return function(e){e({type:d,payload:t})}},f=n(189),h=n(12),p=n(20),j=n(46),v=n(64),m=["title","stages"],O={loadingComplete:!1,settings:{pingRate:1e3,volume:50,animationSpeed:30},title:"loading",customData:null,counter:0,activePetType:null,activePetId:null,ping:0,nextManifestItem:null,nextExternalItem:null},g=Object(f.a)((i={},Object(c.a)(i,l.e.toString(),(function(t,e){var n={},i=e.payload,r={};for(var o in i)-1===m.indexOf(o)?(console.warn('key supplied in /data.json "'.concat(o,'" is not a valid key')),n[o]=i[o]):(n[o]=i[o],"stages"!==o&&(r[o]=i[o]));var a=t.settings.pingRate;if(void 0!==i.pingRate)try{isNaN(i.pingRate)||(a=Object(h.a)(parseInt(i.pingRate),50,5e3))}catch(l){console.error("there was a problem parsing pingRate")}Object(v.b)(i.stages);var c=Object(v.a)(0);return Object(s.a)(Object(s.a)({},t),{},{nextManifestItem:c,loadingComplete:null===c,settings:Object(s.a)(Object(s.a)({},t.settings),{},{pingRate:a}),customData:r})})),Object(c.a)(i,l.g.toString(),(function(t,e){var n=e.payload,i=n.manifest,r=n.data;if("pets"===i.type?Object(p.k)(i.id,r,i):Object(j.b)(r,i),i.isExternal)return Object(s.a)(Object(s.a)({},t),{},{nextExternalItem:null});var o=Object(v.a)(i.idx+1);return Object(s.a)(Object(s.a)({},t),{},{nextManifestItem:o,loadingComplete:null===o})})),Object(c.a)(i,b.toString(),(function(t,e){return Object(s.a)(Object(s.a)({},t),{},{transitionLabel:e.payload.label})})),Object(c.a)(i,l.a.toString(),(function(t,e){return Object(s.a)(Object(s.a)({},t),{},{nextExternalItem:{id:e.payload.id||e.payload.url,idx:0,type:e.payload.type,url:e.payload.url,isExternal:!0}})})),Object(c.a)(i,l.f.toString(),(function(t,e){var n=e.payload.id,i=t.settings[n];return void 0!==i&&i!==e.payload.value?Object(s.a)(Object(s.a)({},t),{},{settings:Object(s.a)(Object(s.a)({},t.settings),{},Object(c.a)({},n,e.payload.value))}):t})),Object(c.a)(i,l.d.toString(),(function(t,e){return Object(s.a)(Object(s.a)({},t),{},{activePetType:e.payload})})),Object(c.a)(i,l.c.toString(),(function(t,e){return Object(p.c)(e.payload)?Object(s.a)(Object(s.a)({},t),{},{activePetId:e.payload}):(console.error('Could not get pet definition for id "'.concat(e.payload,'"')),Object(s.a)({},t))})),Object(c.a)(i,l.b.toString(),(function(t){return Object(s.a)(Object(s.a)({},t),{},{ping:t.ping+1})})),i),O),x=n(62),y=n(26),k=Object(f.a)((r={},Object(c.a)(r,l.c.toString(),(function(t,e){var n=Object(p.c)(e.payload);return n?n.isAlive?Object(s.a)(Object(s.a)({},t),{},{id:n.id,isAlive:!0,activities:[],mood:null}):Object(s.a)(Object(s.a)({},t),{},{id:n.id,isAlive:!1,activities:[],mood:"DEAD"}):t})),Object(c.a)(r,y.b.toString(),(function(t,e){return Object(p.a)(t.id,e.payload.id,e.payload.value),t})),Object(c.a)(r,y.a.toString(),(function(t,e){var n=e.payload;return t.activities.indexOf(n)>-1?t:Object(s.a)(Object(s.a)({},t),{},{activities:[].concat(Object(x.a)(t.activities),[n])})})),Object(c.a)(r,y.f.toString(),(function(t,e){var n=e.payload;return Object(s.a)(Object(s.a)({},t),{},{activities:t.activities.filter((function(t){return t!==n}))})})),Object(c.a)(r,y.d.toString(),(function(t,e){var n=t.forcedBehavior!==e.payload?e.payload:null;return Object(s.a)(Object(s.a)({},t),{},{forcedBehavior:n})})),Object(c.a)(r,y.g.toString(),(function(t,e){var n=e.payload;return Object(p.i)(n),Object(s.a)(Object(s.a)({},t),{},{isAlive:!0,mood:null,activities:[]})})),Object(c.a)(r,y.e.toString(),(function(t,e){return console.log(" KILL ",e.payload),Object(p.h)(e.payload),Object(s.a)(Object(s.a)({},t),{},{isAlive:!1,mood:"DEAD",activities:[]})})),Object(c.a)(r,y.c.toString(),(function(t,e){var n=e.payload;return t.isAlive?(Object(p.h)(e.payload),Object(s.a)(Object(s.a)({},t),{},{isAlive:!1,mood:"DEAD",activities:[]})):(Object(p.i)(n),Object(s.a)(Object(s.a)({},t),{},{isAlive:!0,mood:null,activities:[]}))})),r),{id:null,mood:null,isAlive:!0,forcedBehavior:null,activities:[]}),w=Object(o.c)({data:g,activePet:k}),I=[a.a],S=o.d.apply(void 0,[o.a.apply(void 0,I)].concat([]));e.a=Object(o.e)(w,{},S)},93:function(t,e,n){},94:function(t,e,n){"use strict";(function(t){var i,r=n(7),o=n(8),a=n(10),c=n(9),s=n(4),l=n(0),u=n(14),d=n(21),b=n(15),f=n(3),h=n(13),p=n(96),j=n(11),v=n(20),m=n(2),O=n(101),g=n(102),x=n(121),y=n(123),k=n(120),w=n(1),I={};I.App=f.c.section(i||(i=Object(s.a)(["\n  position:absolute;\n  left:0;\n  top:0;\n  right:0;\n  bottom:0;\n  overflow:hidden;\n\n  background-color:  ",";\n  color: ",";\n"])),Object(m.f)("color","black"),Object(m.f)("color","blue"));var S=function(e){Object(a.a)(i,e);var n=Object(c.a)(i);function i(){var e;return Object(r.a)(this,i),e=n.call(this),t.spriteScale=1,window.addEventListener("beforeunload",(function(t){e.onExitPage()})),e}return Object(o.a)(i,[{key:"onExitPage",value:function(){this.props.loadingComplete&&Object(v.j)()}},{key:"componentDidUpdate",value:function(t,e){this.props.loadingComplete&&!t.loadingComplete&&this.onLoadComplete()}},{key:"onLoadComplete",value:function(){console.log("Load complete."),this.loadDeeplinkedPet()}},{key:"loadDeeplinkedPet",value:function(t){var e=Object(p.a)(this.props.location.search);if(e&&(t||!this.props.activePetId)){var n=e.split("external_");n.length>1?(console.log('--\x3e Loading external pet with id "'.concat(n[1])),this.props.loadExternalItem({type:"pets",url:n[1],id:"external_".concat(n[1])})):this.props.setActivePetId(n[0])}}},{key:"render",value:function(){return Object(w.jsxs)(I.App,{id:"app",children:[Object(w.jsx)(g.a,{}),Object(w.jsx)(O.a,{}),Object(w.jsx)(k.a,{}),Object(w.jsx)(b.b,{exact:!0,path:"/",children:Object(w.jsx)(b.a,{to:"/pet"})}),Object(w.jsx)(b.b,{path:"/pet",component:x.a}),Object(w.jsx)(b.b,{path:"/editor",component:y.a})]})}}]),i}(l.Component);e.a=Object(b.f)(Object(d.b)((function(t,e){return{loadingComplete:Object(j.r)(t)}}),(function(t){return Object(u.b)({setActivePetId:h.c,loadExternalItem:h.a},t)}))(S))}).call(this,n(18))},96:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(12),r=function(t){return t&&Object(i.f)(t).pet||null}}},[[125,1,2]]]);
//# sourceMappingURL=main.e6c9575b.chunk.js.map