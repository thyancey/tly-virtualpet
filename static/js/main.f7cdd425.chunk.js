(this["webpackJsonptly-virtualpet"]=this["webpackJsonptly-virtualpet"]||[]).push([[0],[,,function(t,e,n){"use strict";n.d(e,"f",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return p})),n.d(e,"e",(function(){return j}));var i,o=n(4),r=n(103),a=n(3),c=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n,i=t.theme,o=Object(r.a)(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(!i[a])return console.error("[Theming] Could not find",a,"in",i),"";i=i[a]}}catch(c){o.e(c)}finally{o.f()}return i}},s=function(t){return l.color[t]},u=function(){return Object(a.b)(i||(i=Object(o.a)(["\n    border: .2rem solid rgba(255, 255, 255, 0.2);\n    border-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.2) rgba(255, 255, 255, 0.2);\n    border-radius: 1rem;\n    box-shadow: .1rem .1rem .5rem black;\n  "])))},l={color:{black:"#000000",grey:"#373737",grey_light:"#A39F8E",white:"#fef8dd",blue:"#1fb9f3",green:"#51f249",yellow:"#fff249",red:"#F55658",purple:"#6b1ff3"},shadow:{z1:"-0.1rem 0.1rem .25rem .1rem rgba(0,0,0,0.16)",z2:"-0.1rem 0.1rem .25rem .1rem rgba(0,0,0,0.36)",z3:"-.2rem .5rem 1rem .2rem rgba(0,0,0,.36)"},value:{headerHeight:"7.5rem",menuWidth:"12rem"},mixins:{},breakpoints:{mobile_tiny:"300px",mobile_medium:"400px",mobile_large:"500px",tablet:"768px",desktop:"1024px"}},d="400px",b="500px",f="768px",h="1024px",p={mobile_tiny:"(min-width: ".concat("300px",")"),mobile_medium:"(min-width: ".concat(d,")"),mobile_large:"(min-width: ".concat(b,")"),tablet:"(min-width: ".concat(f,")"),desktop:"(min-width: ".concat(h,")")},j=function(t,e){var n=l.color[t]||t,i=parseInt(n.substring(1,3),16),o=parseInt(n.substring(3,5),16),r=parseInt(n.substring(5,7),16);return i=parseInt(i*(100+e)/100),o=(o=parseInt(o*(100+e)/100))<255?o:255,r=(r=parseInt(r*(100+e)/100))<255?r:255,"#"+(1===(i=i<255?i:255).toString(16).length?"0"+i.toString(16):i.toString(16))+(1===o.toString(16).length?"0"+o.toString(16):o.toString(16))+(1===r.toString(16).length?"0"+r.toString(16):r.toString(16))};e.a=l},,,,,,,,,function(t,e,n){"use strict";n.d(e,"k",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"j",(function(){return c})),n.d(e,"g",(function(){return s})),n.d(e,"b",(function(){return d})),n.d(e,"i",(function(){return b})),n.d(e,"l",(function(){return f})),n.d(e,"e",(function(){return h})),n.d(e,"c",(function(){return v})),n.d(e,"f",(function(){return m})),n.d(e,"h",(function(){return x})),n.d(e,"d",(function(){return y}));var i=n(69),o=n.n(i),r=function(t,e){if(!e)return Math.round(t);var n=Math.pow(10,e);return Math.round(t*n)/n},a=function(t,e,n){return Math.min(Math.max(t,e),n)},c=function(t){return t[0]+Math.random()*(t[1]-t[0])},s=function(t,e){var n;return n=Array.isArray(t)?t[0]+Math.random()*(t[1]-t[0]):t,void 0!==e?u(n,e):n},u=function(t,e){return e*Math.round(t/e)},l=function(t){return"object"===typeof t&&null!==t&&!Array.isArray(t)},d=function t(e){var n={};for(var i in e){var o=e[i];l(o)?n[i]=t(o):isNaN(o)?n[i]=o:n[i]=Number(o)}return n},b=function t(e,n,i){var o={};for(var r in i){var a=i[r];l(a)?o[r]=t(e,n,a):o[r]=r===e?"".concat(n).concat(a):a}return o},f=function(t,e){var n="";try{e&&(n=JSON.stringify(e))}catch(i){console.error("Problem stringifying obj",e)}p(t,n)},h=function(t){var e=j(t);if(!e)return null;try{return JSON.parse(e)}catch(n){return console.error("Problem parsing cookieString",e),null}},p=function(t,e,n){var i=new Date;i.setTime(i.getTime()+(n||3e12)),n="expires="+i.toUTCString(),document.cookie=t+"="+e+";"+n+";path=/"},j=function(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return""},v=function(t){p(t,"",1)},m=function(t){return o.a.parse(t)},O=["=","<","<=",">",">="],g=function(t){switch(t){case"=":return 0;case"<":case"<=":return-1;case">":case">=":return 1;default:return 0}},x=function(t){var e=t.split("_"),n=e[0],i=e[1].split("%"),o=i[0];return{condition:n,criteria:Number(o),isPercent:i.length>1,direction:g(n)}},y=function(t,e){var n,i=x(t);return n=i.isPercent?e.percent:e.cur,i.condition||console.error("evaluateSet(), condition is not defined! ",t),function(t,e,n){if(-1===O.indexOf(t))return console.error('evaluateExpression(): invalid condition "'.concat(t,'" from valueString "').concat(n,'"')),!1;switch(t){case"=":return n===e;case"<":return n<e;case"<=":return n<=e;case">":return n>e;case">=":return n>=e;default:return!1}}(i.condition,i.criteria,n)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return b})),n.d(e,"x",(function(){return h})),n.d(e,"y",(function(){return p})),n.d(e,"w",(function(){return j})),n.d(e,"t",(function(){return v})),n.d(e,"s",(function(){return m})),n.d(e,"r",(function(){return O})),n.d(e,"o",(function(){return g})),n.d(e,"m",(function(){return x})),n.d(e,"h",(function(){return k})),n.d(e,"l",(function(){return w})),n.d(e,"n",(function(){return S})),n.d(e,"f",(function(){return A})),n.d(e,"p",(function(){return C})),n.d(e,"i",(function(){return E})),n.d(e,"e",(function(){return P})),n.d(e,"q",(function(){return T})),n.d(e,"g",(function(){return D})),n.d(e,"k",(function(){return U})),n.d(e,"j",(function(){return G})),n.d(e,"v",(function(){return F})),n.d(e,"u",(function(){return W}));var i=n(6),o=n(15),r=n(20),a=n(51),c=n(11),s=function(t){return t.data.settings},u=function(t){return t.data.activePetType||null},l=function(t){return t.data.counter},d=function(t){return t.activePet.id||null},b=function(t){return t.activePet.forcedBehavior||null},f=function(t){return t.activePet||null},h=Object(o.a)([s],(function(t){return t?t.pingRate:-1})),p=Object(o.a)([s],(function(t){return t?t.volume:-1})),j=Object(o.a)([s],(function(t){return t?t.animationSpeed:-1})),v=Object(o.a)([function(t){return t.data.nextManifestItem||null}],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t})),m=Object(o.a)([function(t){return t.data.nextExternalItem||null}],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t})),O=Object(o.a)([function(t){return t.data.loadingComplete||0}],(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t||!1})),g=Object(o.a)([u,r.e],(function(t,e){return t&&e?e.filter((function(e){return e.type===t})):[]})),x=Object(o.a)([d],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t})),y=Object(o.a)([d,r.e],(function(t,e){if(!t||!e)return null;var n=e.find((function(e){return e.id===t}));return n||null})),k=Object(o.a)([y,f],(function(t,e){return t?Object(i.a)(Object(i.a)({},e),{},{data:t}):null})),w=Object(o.a)([y],(function(t){return t?{sprites:t.sprites,animations:t.animations}:null})),I=Object(o.a)([f],(function(t){return t||null})),S=Object(o.a)([f],(function(t){return t.isAlive||!1})),A=Object(o.a)([function(t){return t.data.items||[]}],(function(t){return Object.keys(t).map((function(e){return t[e]}))})),C=Object(o.a)([y],(function(t){if(!t)return null;var e=t.scene,n=Object(a.a)(e);return n||(console.error("could not select scene ".concat(e)),null)})),E=(Object(o.a)([y],(function(t){if(!t)return null;var e=t.scene,n=Object(a.a)(e);return n&&n.type?n.type:null})),Object(o.a)([C],(function(t){return t?t.cage.floor||0:null})),Object(o.a)([I],(function(t){return t?t.activities:null}))),P=Object(o.a)([k,function(t){return t.data.ping||0}],(function(t,e){if(!t)return null;var n=Object(r.f)(t.id);return L(t,n)})),T=Object(o.a)([C],(function(t){return t?t.styles:null})),D=Object(o.a)([P],(function(t){if(!t)return[];var e=[];return t.forEach((function(t){t.effects&&0!==t.effects.length&&M(t.effects,t).forEach((function(t){-1===e.indexOf(t)&&e.push(t)}))})),e})),B=function(t,e){return Object(c.d)(t.when,e)?t.then:null},M=function(t,e){for(var n=[],i=0;i<t.length;i++){var o=B(t[i],e);o&&-1===n.indexOf(o)&&n.push(o)}return n},R=function(t,e){return(e.effects||[]).map((function(e){return{when:e.when,then:e.then,mood:Object(i.a)({id:e.then},t[e.then])}}))},L=function(t,e){return t&&t.id?Object(r.d)(t.id,(new Date).getTime()).map((function(n,i){var o=n.current/n.max*100;return{id:n.id,type:n.type,label:n.label||n.id,cur:n.current,max:n.max,percent:o,fullIsGood:e[i].fullIsGood,doesKill:e[i].doesKill,fillType:"fill",effects:R(t.data.moods,n)}})):[]},N=function(t,e){switch(t.type){case"moods":return function(t,e){for(var n=[],i=0;i<t.length&&-1!==e.indexOf(t[i]);i++)n.push(t[i]);return n.length===t.length}(t.moods,e.activeMoods)?t:null;case"activity":return e.activities.indexOf(t.activity)>-1?t:null;case"stat":var n=e.stats.find((function(e){return e.id===t.stat}));return null===n?(console.error('evaluateWhen(): stat "'.concat(t.stat,'" does not exist for pet')),null):Object(c.d)(t.value,n)?t:null;case"status":return!0===t.isDead?!0===e.status.isDead?t:null:!1===t.isDead?!1===e.status.isDead?t:null:(console.warn('evaluateWhen(): status is missing "isDead" attribute'),null);default:return console.error('unknown when type "'.concat(t.type,'"')),null}},z=Object(o.a)([k],(function(t){return Object(r.c)(null===t||void 0===t?void 0:t.id)})),_=Object(o.a)([z],(function(t){return null===t||void 0===t?void 0:t.personality})),U=Object(o.a)([I,P,E,D,b],(function(t,e,n,i,o){if(!t||!t.id)return"PET NOT FOUND";var a=Object(r.c)(t.id);if(!a)return"PET DEFINTION NOT FOUND";if(o)return o;var c={isDead:!t.isAlive};return function(t,e){for(var n=null,i=0;i<t.length;i++){var o=t[i],r=null;if(o.when&&0!==o.when.length)for(var a=0;a<o.when.length&&(r=N(o.when[a],e));a++);else r=!0;if(r){n=o.then;break}n="DEFAULT"}return n||"ERROR"}(a.moodSwings,{status:c,stats:e,activities:n,activeMoods:i})})),G=Object(o.a)([k,U],(function(t,e){if(!t)return null;var n=t.data.behaviors[e]||t.data.behaviors.DEFAULT;if(!n)return console.error("Error getting behavior ".concat(e)),null;var i=Math.floor(Math.random()*n.animations.length),o=n.animations[i];return o||console.error('Error getting animationLabel for Pet "'.concat(t.id,'" and Behavior "').concat(e,'"')),o})),F=Object(o.a)([x,w,_],(function(t,e,n){return console.log("selectPhaserPet"),{id:t,sprites:e.sprites,animations:e.animations,personality:n}})),W=Object(o.a)([r.g],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t}))},function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"h",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"g",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return l})),n.d(e,"b",(function(){return d}));var i=n(26),o=Object(i.a)("SET_MANIFEST"),r=Object(i.a)("STORE_MANIFEST_ITEM"),a=Object(i.a)("LOAD_EXTERNAL_ITEM"),c=Object(i.a)("SET_SETTINGS_VALUE"),s=(Object(i.a)("SET_OTHER_DATA"),Object(i.a)("SET_ACTIVE_PET_TYPE")),u=Object(i.a)("SET_ACTIVE_PET_ID"),l=Object(i.a)("SET_ITEMS"),d=Object(i.a)("PING")},,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return O}));var i,o,r,a,c,s,u,l,d=n(4),b=(n(0),n(3)),f=n(2),h=n(1),p={};p.NotAButton=b.c.div(i||(i=Object(d.a)(["\n  color: ",";\n  text-shadow: .5px .5px 1.5px ",";\n  /* background-color: ","; */\n  /* border-radius: 1rem; */\n  /* border: .2rem solid rgba(255, 255, 255, 0.2); */\n\n  display:inline-block;\n\n\n  \n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-radius:1rem;\n  border-color:  rgba(0, 0, 0, .2) rgba(255, 255, 255, .2) rgba(255, 255, 255, .2) rgba(0, 0, 0, .2);\n  box-shadow: -.1rem -.1rem .5rem black;\n  background-color: ",";\n\n\n  \n  ","\n\n  \n  padding: .5rem 1.5rem;\n  margin: .5rem;\n  font-size: 2rem;\n  font-weight: 600;\n\n  span{\n  }\n"])),Object(f.f)("color","grey"),Object(f.f)("color","black"),Object(f.f)("color","grey"),Object(f.f)("color","black"),(function(t){return t.isActive&&Object(b.b)(o||(o=Object(d.a)(["\n    color: ",";\n    text-shadow: .5px .5px .75px ",";\n    background-color: ",";\n  "])),Object(f.f)("color","grey"),Object(f.f)("color","black"),Object(f.f)("color","yellow"))})),p.Button=b.c.button(r||(r=Object(d.a)(["\n  cursor:pointer;\n  position:relative;\n\n  pointer-events: all;\n  outline:0;\n  \n  border:none;\n  border-radius: 1rem;\n\n  font-size:3rem;\n\n  color: ",";\n  text-shadow: .5px .5px 1.5px ",";\n  background-color: ",";\n\n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.2) rgba(255, 255, 255, 0.2);\n  border-radius: 1rem;\n  box-shadow: .1rem .1rem .5rem black;\n\n \n  transition: background-color .1s ease-out;\n\n  &:hover{\n    background-color: ",";\n    text-shadow: 1.5px 1.5px 1.5px ",";\n    transform: translate(-1px, -1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n\n    .button-tooltip{\n      opacity:1;\n      left:100%;\n    }\n  }\n  \n  &:active{\n    /* down state wasnt resetting on buttons that slid out */\n\n    \n    /* background-color: ","; */\n    /* transform: translate(.5px, 1px); */\n    \n    /* transition: background-color .1s ease-out, transform .1s ease-out; */\n  }\n\n  ","\n\n  ","\n"])),Object(f.f)("color","white"),Object(f.f)("color","black"),Object(f.f)("color","blue"),Object(f.e)("blue",10),Object(f.f)("color","black"),Object(f.e)("blue",-10),(function(t){return t.isDisabled&&Object(b.b)(a||(a=Object(d.a)(["\n    color: ",";\n    text-shadow: 1px 1px 1.5px ",";\n    background-color: ",";\n\n    &:hover{\n      background-color: ",";\n    }\n  "])),Object(f.f)("color","black"),Object(f.f)("color","black"),Object(f.f)("color","grey"),Object(f.e)("grey",10))}),(function(t){return t.isActive&&Object(b.b)(c||(c=Object(d.a)(["\n    color: ",";\n    text-shadow: 1px 1px 1.5px ",";\n    background-color: ",";\n\n    &:hover{\n      background-color: ",";\n    }\n  "])),Object(f.f)("color","yellow"),Object(f.f)("color","black"),Object(f.f)("color","green"),Object(f.e)("green",10))})),p.BigButton=Object(b.c)(p.Button)(s||(s=Object(d.a)(["\n  padding: 1rem 2rem;\n  margin: 1rem;\n  font-size:3rem;\n  font-weight: 600;\n"]))),p.LilButton=Object(b.c)(p.Button)(u||(u=Object(d.a)(["\n  padding: .5rem 1.5rem;\n  margin: .5rem;\n  font-size: 2rem;\n  font-weight: 600;\n"]))),p.Tooltip=b.c.div(l||(l=Object(d.a)(["\n  z-index:1;\n  opacity:0;\n  left:0%;\n\n  pointer-events:none;\n\n  position:absolute;\n  top:50%;\n  transform: translateY(-50%);\n\n\n  transition: opacity .4s ease-in-out, left .2s ease-in-out;\n  padding:.5rem 1rem;\n\n  color: ",";\n  background-color: ",";\n\n  border-radius:1rem;\n  margin:1;\n  white-space:pre-line;\n  min-width:auto;\n  max-width:auto;\n\n  font-size: 1.5rem;\n  text-shadow:none;\n  margin-left:1rem;\n"])),Object(f.f)("color","black"),Object(f.f)("color","white"));var j=function(t){var e=t.text;return Object(h.jsx)(p.Tooltip,{className:"button-tooltip",children:Object(h.jsx)("p",{children:e})})},v=function(t){var e=t.text,n=t.isActive,i=t.isDisabled,o=t.onClick,r=t.style,a=t.tooltip;return Object(h.jsxs)(p.BigButton,{isActive:n,disabled:i,isDisabled:i,onClick:function(t){return o&&o(t)},style:r,title:a,children:[Object(h.jsx)("span",{children:e}),a&&Object(h.jsx)(j,{text:a})]})},m=function(t){var e=t.text,n=t.isActive,i=t.isDisabled,o=t.onClick,r=t.style,a=t.tooltip;return Object(h.jsxs)(p.LilButton,{isActive:n,disabled:i,isDisabled:i,onClick:function(t){return o&&o(t)},style:r,title:a,children:[Object(h.jsx)("span",{children:e}),a&&Object(h.jsx)(j,{text:a})]})},O=function(t){var e=t.text,n=t.isActive,i=(t.isDisabled,t.onClick),o=t.style;return Object(h.jsx)(p.NotAButton,{isActive:n,onClick:function(t){return i&&i(t)},style:o,children:Object(h.jsx)("span",{children:e})})}},function(t,e,n){"use strict";(function(t){n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"k",(function(){return l})),n.d(e,"f",(function(){return j})),n.d(e,"d",(function(){return m})),n.d(e,"h",(function(){return g})),n.d(e,"a",(function(){return x})),n.d(e,"j",(function(){return I})),n.d(e,"i",(function(){return S})),n.d(e,"b",(function(){return A}));var i=n(6),o=n(11),r={thinkRange:[200,2e3],doRange:[200,2e3],jumpChance:.01,jumpForce:.8,xForce:1,yForce:1,maxVx:2},a={pets:[],taxonomy:[]},c=function(){return a.pets},s=function(t){return a.pets.find((function(e){return e.id===t}))||null},u=function(){return a.taxonomy},l=function(t,e,n){var i=h(),o=i.pets.find((function(e){return e.id===t})),r=d(t,e,o,i,n);b(t,r),a.taxonomy=function(t,e){var n=e.findIndex((function(e){return e.type===t.type}));if(n>-1){var i=e[n];i.pets.push({id:t.id,label:t.name}),e[n]=i}else e.push({type:t.type,pets:[{id:t.id,label:t.name}]});return e}(r,a.taxonomy)},d=function(t,e,n,a,c){var s=e.behaviors.DEFAULT;if(!s)try{s=e.behaviors[Object.keys(e.behaviors)[0]]}catch(h){console.error('could not autodeclare default status for pet "'.concat(t,'"'))}var u=f(e.moodSwings),l=function(t){return t.map((function(t,e){return{id:t.id,label:t.label,type:t.type||"event",cooldown:t.cooldown?parseInt(t.cooldown):0,statEffects:t.statEffects.map((function(t){return Object(o.b)(t)}))}}))}(e.statEvents||[]),d=e.stats,b=[];return n?(b=p(d,n.stats,!0),e.isAlive=n.isAlive):(b=d,e.isAlive=!0),e.stats_saved={timestamp:a.timestamp||(new Date).getTime(),isAlive:a.isAlive,stats:b.map((function(t){return w(t)}))},e.personality=Object(i.a)(Object(i.a)({},r),e.personality),Object(i.a)(Object(i.a)({},e),{},{id:t,dir:c.url,behaviors:Object(i.a)(Object(i.a)({},e.behaviors),{},{DEFAULT:s}),moodSwings:u,statEvents:l})},b=function(t,e,n){var i=a.pets.findIndex((function(e){return e.id===t}));i>-1?a.pets[i]=e:a.pets.push(e),n&&k()},f=function(t){return t||[]},h=function(){var t=Object(o.e)("tly_virtualpet");return t&&(!t.schemaVersion||t.schemaVersion<5)&&(console.warn("Schema version ".concat(t.schemaVersion," is behind version ").concat(5,", resetting all your data, sorry bubs")),Object(o.c)("tly_virtualpet"),t=null),t||{schemaVersion:5,timestamp:null,pets:[]}},p=function(t,e,n){for(var o=t.slice(0),r=function(t){var r=e[t],a=o.findIndex((function(t){return t.id===r.id}));a>-1?n&&(o[a]=Object(i.a)(Object(i.a)({},o[a]),r)):o.push(r)},a=0;a<e.length;a++)r(a);return o},j=function(t){var e=s(t);return e?e.stats.map((function(t){return{doesKill:t.doesKill||!1,fullIsGood:t.fullIsGood,max:t.max,moods:t.moods||[]}})):[]},v=function(t,e,n){var o=t.map((function(t){var n=e.stats.find((function(e){return e.id===t.id}));return Object(i.a)(Object(i.a)({},t),n)}));return{timestamp:e.timestamp||n,stats:o.map((function(t){return e=t,Object(i.a)(Object(i.a)({},e),{},{value:Number(e.value),perSecond:Number(e.perSecond),max:Number(e.max)});var e}))}},m=function(t,e){var n=s(t),i=v(n.stats,n.stats_saved,e);return O(i,e)},O=function(t,e){var n=t.stats||[],r=(e-t.timestamp)/1e3;return n.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{value:t.value,max:t.max,current:Math.round(Object(o.a)(t.value+t.perSecond*r,0,t.max)),moods:t.moods})}))},g=function(t){console.log("KILL THIS PET ",t);var e=s(t);e.isAlive=!1,b(t,e,!0)},x=function(t,e,n){var i=(new Date).getTime(),r=m(t,i).slice(0),a=r.findIndex((function(t){return t.id===e})),c=r[a].current+n;r[a].current=Object(o.a)(c,0,r[a].max),y(t,r,i)},y=function(t,e,n){var o=s(t);o.stats_saved={timestamp:n,isAlive:o.isAlive,stats:e.map((function(t){return w(Object(i.a)(Object(i.a)({},t),{},{value:t.current}))}))},b(t,o,!0)},k=function(){console.log("saveAllPetStatsToCookie"),Object(o.l)("tly_virtualpet",{schemaVersion:5,timestamp:(new Date).getTime(),pets:a.pets.map((function(t){return Object(i.a)(Object(i.a)({},t.stats_saved),{},{id:t.id})}))})},w=function(t){return{id:t.id,value:t.value,type:t.type,label:t.label,perSecond:t.perSecond,max:t.max,fullIsGood:t.fullIsGood,doesKill:t.doesKill}},I=function(){a.pets.forEach((function(t){var e=(new Date).getTime(),n=m(t.id,e).slice(0);t.stats_saved={timestamp:e,isAlive:t.isAlive,stats:n.map((function(t){return w(Object(i.a)(Object(i.a)({},t),{},{value:t.current}))}))},b(t.id,t)})),k()},S=function(t){console.log('resetting pet "'.concat(t,'"'));var e=(new Date).getTime(),n=s(t),i=n.stats;n.isAlive=!0,n.stats_saved={timestamp:e,isAlive:!0,stats:i.map((function(t){return w(t)}))},b(t,n)},A=function(){a.pets=[],Object(o.c)("tly_virtualpet"),t.location.reload()};t.petStore={getAllData:function(){return a},deleteAllData:function(){return A()},getSavedData:function(){return h()},getPets:function(){return c()},getPetStoreData:function(t){return function(t){return a[t]}(t)},getPetDefinition:function(t){return s(t)},getPetDeltaStats:function(t,e){return m(t,e)}}}).call(this,n(17))},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"g",(function(){return r})),n.d(e,"i",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return b}));var i=n(26),o=(Object(i.a)("INCREMENT_XP"),Object(i.a)("ADD_ACTIVITY")),r=Object(i.a)("REMOVE_ACTIVITY"),a=Object(i.a)("SET_ACTIVITIES"),c=Object(i.a)("FORCE_BEHAVIOR"),s=Object(i.a)("RESET_PET"),u=Object(i.a)("KILL_PET"),l=Object(i.a)("CLICK_PET"),d=Object(i.a)("AUGMENT_STAT",(function(t,e){return{id:t,value:e}})),b=Object(i.a)("AUGMENT_STATS")},,,,,,,,function(t,e,n){"use strict";var i,o=n(6),r=n(111),a=n(7),c=n(8),s=n(25),u=n(10),l=n(9),d=n(36),b=0,f=300,h={Entity:function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,i,o){var r,c;Object(a.a)(this,n),(c=e.call(this,t,o.x,o.y,o.id)).id=o.entityInfo.id,c.statEvents=o.entityInfo.statEvents||{},c.stats=o.stats||{};var u=Object.keys(null===(r=o.entityInfo)||void 0===r?void 0:r.sprites)[0];c.setBehaviors(o.entityInfo.behaviors),c.spriteScale=o.entityInfo.sprites[u].scale||1;var l=o.entityInfo.sprites[u].frameDims||[0,0],d=o.entityInfo.sprites[u].frameSqueeze||{x:0,y:0,w:0,h:0};return t.add.existing(Object(s.a)(c)),i?i.add(Object(s.a)(c)):t.physics.add.existing(Object(s.a)(c)),c.setBounce(b),c.setCollideWorldBounds(!0),c.allowGravity=!1,c.body.setSize(l[0]+d.w,l[1]+d.h),c.body.offset.x=d.x,c.body.offset.y=d.y,c.body.setDrag(f),c.playAnimation(),c}return Object(c.a)(n,[{key:"setBehaviors",value:function(t){this.behaviorsData=t,this.curBehaviorId=Object.keys(this.behaviorsData)[0]}},{key:"getBehaviorAnimation",value:function(){return this.behaviorsData[this.curBehaviorId].animations[0]}},{key:"update",value:function(){this.flipX?this.body.velocity.x>=0&&(this.flipX=!1):this.body.velocity.x<0&&(this.flipX=!0)}},{key:"getItemEffects",value:function(){return this.statEvents[0].statEffects.map((function(t){return{id:t.id,value:t.immediate}}))}},{key:"throttledUpdate",value:function(){}},{key:"playAnimation",value:function(t){t||(t=this.getBehaviorAnimation()),this.curAnimation!==t&&(this.curAnimation=t,this.anims.play(t).setScale(this.spriteScale).setOrigin(0))}}]),n}(n.n(d).a.Physics.Arcade.Sprite)},p=n(45),j={},v={},m={},O=!1,g=function(t){var e=[t.map((function(t){return m[t].registeredSprites}))];Object.keys(e).forEach((function(t){i.load.atlas(e[t].id,e[t].image,e[t].data)})),i.load.once("complete",(function(){return x(t)})),i.load.start()},x=function(t){t.forEach((function(t){C(t,I(t).sprites,I(t).animations,i)}))},y=function(t){var e=w(t).registeredSprites;Object.keys(e).forEach((function(t){i.load.atlas(e[t].id,e[t].image,e[t].data)})),i.load.once("complete",(function(){return k(t)})),i.load.start()},k=function(t){C(t,w(t).sprites,w(t).animations,i)},w=function(t){return v[t]||console.error("SpawnController: could not get petInfo for ".concat(t)),v[t]||null},I=function(t){return m[t]||console.error("SpawnController: could not get itemInfo for ".concat(t)),m[t]||null},S=function(t,e,n){var i={};return Object.keys(n).forEach((function(o){i[o]={id:o,image:"".concat(e,"/").concat(t,"/assets/").concat(n[o].image),data:"".concat(e,"/").concat(t,"/assets/").concat(n[o].data),defaults:n[o].defaults||{animation:{},frameObj:{}}}})),i},A=function(){Object.keys(v).forEach((function(t){C(t,w(t).sprites,w(t).animations,i)})),Object.keys(m).forEach((function(t){C(t,I(t).sprites,I(t).animations,i)}))},C=function(t,e,n,i){Object.keys(n).forEach((function(t){var r,a,c=n[t].sprite,s=(r=n[t],a=e[c].defaults,Object(o.a)(Object(o.a)(Object(o.a)({},a.animation),r),{},{frameObj:Object(o.a)(Object(o.a)({},r.frameObj),a.frameObj)}));i.anims.create({key:t,frameRate:s.frameRate,frames:i.anims.generateFrameNames(s.sprite,s.frameObj),repeat:s.repeat})}))},E=function(t){Object.keys(v).forEach((function(e){P(w(e).registeredSprites,t)})),Object.keys(m).forEach((function(e){P(I(e).registeredSprites,t)}))},P=function(t,e){Object.keys(t).forEach((function(n){e.load.atlas(t[n].id,t[n].image,t[n].data)}))},T=Object(p.b)(150,!1,(function(){var t,e;null===(t=j.pets)||void 0===t||t.children.iterate((function(t){t.throttledUpdate()})),null===(e=j.items)||void 0===e||e.children.iterate((function(t){t.throttledUpdate()}))})),D=function(){var t;null===(t=j.pets)||void 0===t||t.children.iterate((function(t){t.destroy()}))},B=function(t,e,n,o,r){return new t(i,j.items,{id:e,x:n.x,y:n.y,stats:o,entityInfo:r})},M=function(t,e,n,o,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return new t(i,j.pets,{id:e,x:n.x,y:n.y,stats:o,petInfo:r,canSendUpdates:a})},R={setContext:function(t){i=t},preload:function(t){E(t),O=!0},create:function(t){return A(),j.pets=t.physics.add.group(),j.items=t.physics.add.group(),j},update:function(){var t,e;null===(t=j.pets)||void 0===t||t.children.iterate((function(t){t.update()})),null===(e=j.items)||void 0===e||e.children.iterate((function(t){t.update()})),T()},updatePetAnimationLabel:function(t,e){var n;null===(n=j.pets)||void 0===n||n.children.iterate((function(n){n.id===t&&n.playAnimation(e)}))},updatePetActivities:function(t,e){var n;null===(n=j.pets)||void 0===n||n.children.iterate((function(n){n.id===t&&n.updateActivities(e)}))},updatePetMortality:function(t,e){var n;null===(n=j.pets)||void 0===n||n.children.iterate((function(n){n.id===t&&n.updateMortality(e)}))},alterPetInfo:function(t,e){v[t]||(v[t]=Object(o.a)(Object(o.a)({},e),{},{registeredSprites:S(t,"./data/pets",e.sprites)}),O&&y(e.id))},alterItemsInfo:function(t){t.forEach((function(t){var e=t.id;m[e]||(m[e]=Object(o.a)(Object(o.a)({},t),{},{registeredSprites:S(e,"./data/items",t.sprites)}))})),O&&g(t.map((function(t){return t.id})))},spawnPet:function(t){D(),M(r.a.Entity,t,{x:100,y:0},{},w(t),!0)},spawnItemId:function(t,e){B(h.Entity,t,e=e||{x:0,y:0},{},I(t))}};e.a=R},,,function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return b})),n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return p})),n.d(e,"h",(function(){return j})),n.d(e,"f",(function(){return v})),n.d(e,"e",(function(){return m})),n.d(e,"g",(function(){return O}));var i,o=n(36),r=n.n(o),a=n(32),c=n(47),s=n(41),u=!1,l=null,d=function(e){console.log("Phaser.createGame, jsonData:",e);var n={type:r.a.AUTO,scale:{parent:e.id,mode:r.a.Scale.RESIZE,autoCenter:r.a.Scale.CENTER_BOTH,width:900,height:500},autoRound:!1,physics:{default:"arcade",arcade:{gravity:{y:800},debug:!1}},scene:{preload:f,create:k,update:A}};t.game=new r.a.Game(n)};function b(t,e,n,o){i.physics.world.setBounds(t,e,n,o,!0,!0,!0,!0),i.cameras.main.setBounds(t,e,n,o,!0,!0,!0,!0),c.a.updateBounds(t,e,n,o)}function f(){var e;i=e=this,t.scene=i,c.a.setContext(e),a.a.setContext(e),c.a.preload(this),a.a.preload(this)}function h(t){a.a.alterItemsInfo(t)}function p(t){l=t.id,a.a.alterPetInfo(t.id,t),u&&g(t.id)}function j(e){c.a.setSceneInfo(e),t.sc=c.a}function v(t,e){a.a.updatePetAnimationLabel(t,e)}function m(t,e){a.a.updatePetActivities(t,e)}function O(t,e){a.a.updatePetMortality(t,e)}function g(t){console.log("Game.spawnPet"),a.a.spawnPet(t)}function x(e,n){t.game.onInterface&&t.game.onInterface(e,n)}function y(e){t.game.onInterface&&t.game.onInterface("sendStatus",e)}function k(){console.log("Phaser.create()"),t.spawnController=a.a;var e=c.a.create(this),n=a.a.create(this);this.physics.add.collider(n.pets,e.floors,null,I,this),this.physics.add.collider(n.pets,e.platforms,null,S,this),this.physics.add.collider(n.items,e.floors,null,I,this),this.physics.add.collider(n.items,e.platforms,null,S,this),this.physics.add.collider(n.items,n.pets,null,w,this),g(l),s.a.on("interface",x,this),s.a.on("sendStatus",y,this),u=!0}function w(t,e){var n=t.getItemEffects();return e.applyItemEffects(n),t.destroy(),!1}function I(t,e){return!0}function S(t,e){return!0}function A(){a.a.update()}t.stopGame=function(){i.scene.stop()},t.startGame=function(){i.scene.start()},t.spawnItem=function(){!function(t,e){console.log("Game.spawnItem",t,e),a.a.spawnItemId(t,e)}("mushroom",{x:Math.random()*window.innerWidth,y:100})}}).call(this,n(17))},,,,,,function(t,e,n){"use strict";var i=n(36),o=new(n.n(i).a.Events.EventEmitter);e.a=o},,,,,,function(t,e,n){"use strict";(function(t){var i,o,r,a=n(70),c={},s=null,u=null,l={},d=[],b=[],f=!1,h=function(t){t.load.image(m("bg"),I().background.imageUrl),Object.keys(I().textures).forEach((function(e){t.load.image(m(e),I().textures[e].imageUrl)}))},p=function(t){j(),v(o,r),O()},j=function(){t.pP=r,t.pG=b,d.forEach((function(t){t.body.destroy(),t.texture&&t.texture.destroy()})),b.forEach((function(t){t.forEach((function(t){t.body.destroy(),t.texture&&t.texture.destroy()}))}))},v=function(t,e){return b=[],(d=[]).push(k(t,g(I().floor.texture))),x(e,I().platforms),u=i.add.tileSprite(0,0,545,545,m("bg")).setOrigin(0,0).setDepth(-1),{floors:t,platforms:e}},m=function(t){return"scene-".concat(I().id,"-").concat(t)},O=function(){u=Object(a.c)(u,I(),l),Object(a.b)(b,I(),l),Object(a.a)(d,I(),l)},g=function(t){if(!t)return null;try{return I().textures[t]}catch(e){return console.error("could not find level texture ".concat(t)),null}},x=function(t,e){e.forEach((function(e){var n=I().textures[e.texture];b.push(y(t,n,e.count))}))},y=function(t,e,n){for(var i=[],o=0;o<n;o++)i.push(k(t,e));return i},k=function(t,e){return{body:t.create(0,0,null).setScale(1,1).setOrigin(0,0).setAlpha(0).refreshBody(),texture:e?w(e):null}},w=function(t){return i.add.tileSprite(0,0,t.width,t.height,m(t.id)).setOrigin(0,0).setTileScale(t.spriteScale,t.spriteScale).setAlpha(1)},I=function(t){return t||(t=s),c[t]||console.error("SceneController: could not get sceneInfo for ".concat(t)),c[t]||null},S={setContext:function(t){i=t},preload:function(){h(i),f=!0},create:function(t){return o=i.physics.add.staticGroup(),r=i.physics.add.staticGroup(),v(o,r)},updateBounds:function(t,e,n,i){l={x:t,y:e,w:n,h:i},O()},setSceneInfo:function(t){var e;console.log("setSceneInfo",t),c[t.id]=t,s=t.id,f&&(e=s,i.load.image(m("bg"),I().background.imageUrl),Object.keys(I().textures).forEach((function(t){i.load.image(m(t),I().textures[t].imageUrl)})),i.load.once("complete",(function(){return p(e)})),i.load.start())}};e.a=S}).call(this,n(17))},,,,function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s}));var i=n(11),o={items:[],scenes:[]},r=function(t,e){var n=Object(i.i)("imageUrl","".concat(e.url,"/assets/"),t);a(n)},a=function(t){o.scenes.push(t)},c=function(t){return o.scenes.find((function(e){return e.id===t}))||null},s=function(t,e){var n=Object(i.i)("imageUrl","".concat(e.url,"/assets/"),t);u(n)},u=function(t){o.items.push(t)};t.itemStore={getAllData:function(){return o},getItems:function(){return o.items},getScenes:function(){return o.scenes},getSceneDefinition:function(t){return c(t)}}}).call(this,n(17))},,,,,,,,,,,function(t,e,n){"use strict";(function(t){var i,o=n(7),r=n(8),a=n(25),c=n(10),s=n(9),u=n(4),l=n(0),d=n.n(l),b=n(3),f=n(14),h=n(22),p=n(2),j=n(11),v=n(12),m=n(109),O=n(110),g=n(1),x={};x.Cage=b.c.div(i||(i=Object(u.a)(["\n  position:relative;\n\n\n  color: ",";\n\n  h2{\n    color: ",";\n  }\n"])),Object(p.f)("color","blue"),Object(p.f)("color","white"));var y=function(e){Object(c.a)(i,e);var n=Object(s.a)(i);function i(t){var e;return Object(o.a)(this,i),(e=n.call(this,t)).containerRef=d.a.createRef(),e.onResize=e.onResize.bind(Object(a.a)(e)),e.state={containerWidth:500,containerHeight:500},e}return Object(r.a)(i,[{key:"componentDidUpdate",value:function(t){!t.activePetId&&this.props.activePetId&&this.onResize()}},{key:"componentDidMount",value:function(){t.addEventListener("resize",this.onResize),this.onResize()}},{key:"onResize",value:function(){this.updateRedundantDims()}},{key:"updateRedundantDims",value:function(){this.setState({containerWidth:window.innerWidth,containerHeight:window.innerHeight})}},{key:"updateCanvasDims",value:function(){if(this.containerRef.current){Object(j.a)(this.containerRef.current.offsetWidth/1e3,.3,1),Object(j.a)(this.containerRef.current.offsetHeight/1e3,.3,1);this.setState({containerWidth:this.containerRef.current.offsetWidth,containerHeight:this.containerRef.current.offsetHeight})}}},{key:"render",value:function(){var e=this.props.activePetId;return t.cage=this,e?Object(g.jsxs)(x.Cage,{ref:this.containerRef,style:{width:this.state.containerWidth,height:this.state.containerHeight},children:[Object(g.jsx)(O.a,{id:"1",width:this.state.containerWidth,height:this.state.containerHeight}),Object(g.jsx)(m.a,{})]}):null}}]),i}(l.Component);e.a=Object(h.b)((function(t){return{activePetId:Object(v.m)(t)}}),(function(t){return Object(f.b)({},t)}))(y)}).call(this,n(17))},,,,,,,,function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var i=n(11),o=function(t,e,n){var i=e.background;t.width=i.size[0],t.height=i.size[0],"stretch"===i.scale.width?t.displayWidth=n.w:"auto"===i.scale.width&&(t.displayWidth=i.size[0]*(i.spriteScale||1)),"stretch"===i.scale.height?t.displayHeight=n.h:"auto"===i.scale.height&&(t.displayHeight=i.size[1]*(i.spriteScale||1));var o=t.displayHeight-n.h;return t.y=-o,t.width=1e3,t.height=1e3,t},r=function(t,e,n){var i=n.h-e.floor.height;c(t[0].body,t[0].texture,{x:0,y:i,w:n.w,h:e.floor.height})},a=function(t,e,n){var i=n.h-e.floor.height;t.forEach((function(t,o){var r=e.platforms[o];"rando"===r.type?u(t,r,i,n.w):"stairs"===r.type?s(t,r,i,n.w):console.log("invalid type ",r.type)}))},c=function(t,e,n){t.setPosition(n.x,n.y),t.displayWidth=n.w,t.displayHeight=n.h,t.body.position={x:n.x,y:n.y},t.body.position={x:n.x,y:n.y},t.body.width=n.w,t.body.height=n.h,t.body.reset(),e&&(e.setPosition(n.x,n.y),e.width=n.w,e.height=n.h)},s=function(t,e,n){var o=Object(i.g)(e.x)||0;t.forEach((function(r,a){var s=Object(i.g)(e.stepX,1)||0,u=Object(i.g)(e.stepY,1)||0,l={x:s*e.size,y:u*e.size},b=r.body,f=r.texture,h=l.x*(t.length-a),p=l.y,j={x:o+l.x*a,y:e.size*a+l.y,w:h,h:p};e.snap&&(j=d(j,e.snap)),j.y=n-j.y,c(b,f,j)}))},u=function(t,e,n,o){t.forEach((function(t,r){var a=t.body,s=t.texture,u=Object(i.g)(e.width),l=Object(i.g)(e.height),b={x:Object(i.j)([e.xBuffer.left,o-u-e.xBuffer.right]),y:l,w:u,h:l};e.snap&&(b=d(b,e.snap)),b.y=n-b.y,c(a,s,b)}))},l=function(t,e){return e*Math.round(t/e)},d=function(t,e){return{x:l(t.x,e),y:l(t.y,e),w:l(t.w,e),h:l(t.h,e)}}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var i={stages:[],stageIdx:0},o=function t(e,n){var o=i.stageIdx;if(o>=e.length)return null;var r=e[o].items[n]||null;return r?{id:r.id,url:r.url,itemIdx:n,stageIdx:o}:(i.stageIdx=i.stageIdx+1,t(e,0))},r=function(t){var e=o(i.stages,t);return e?{type:i.stages[e.stageIdx].type,idx:e.itemIdx,id:e.id,url:e.url}:(console.log("All manifest items loaded."),null)},a=function(t){t&&0!==t.length||console.error("No manifest items loaded, or there was some error"),i.stages=t};t.manifestHelper={getAllData:function(){return i}}}).call(this,n(17))},,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"b",(function(){return a}));var i=n(68),o=n(45),r={entries:[-1],level:0,logIdx:-1,throttleActive:!0},a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;r.entries=[],r.level=t||0,r.logIdx=-1,r.throttleSpeed=e,u(e)},c=function(){if(r.throttleActive){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];d(e)}},s=Object(o.b)(500,!1,c),u=function(t){s=Object(o.b)(t,!1,c)},l=function(t,e){var n;-1===e&&(e=r.logLevel),(n=console).log.apply(n,Object(i.a)(t))},d=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];l(e,-1)},b=function(){l(r.entries[r.logIdx],r.level)},f={init:a,log:d,pause:function(){r.throttleActive?(d("Logger |"),r.throttleActive=!r.throttleActive):(d("Logger |>"),r.throttleActive=!r.throttleActive)},setThrottleSpeed:u,logSave:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.entries.push(e),r.logIdx=r.entries.length-1,b()},logQuiet:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.entries.push(e),r.logIdx=r.entries.length-1},doOutput:l,output:b,outputAll:function(){for(var t=0;t<r.entries.length;t++)r.logIdx=t,b()},outputNext:function(){r.logIdx===r.entries.length-1||r.logIdx++,l(r.entries[r.logIdx],r.level)},outputPrevious:function(){0!==r.length&&-1!==r.logIdx&&(1===r.length||0===r.logIdx||r.logIdx--,l(r.entries[r.logIdx],r.level))},outputLast:function(){r.logIdx=r.entries.length-1,r.logIdx>-1&&(console.log("idx",r.logIdx),l(r.entries[r.logIdx],r.level))},store:r,throttledLog:s};e.a=f},function(t,e,n){"use strict";var i,o,r=n(14),a=n(124),c=n(21),s=n(6),u=n(13),l=n(26),d=Object(l.a)("SET_TRANSITION"),b=function(t){return function(e){e({type:d,payload:t})}},f=n(194),h=n(11),p=n(20),j=n(51),v=n(71),m=["title","stages"],O={loadingComplete:!1,settings:{pingRate:1e3,volume:50,animationSpeed:30},title:"loading",customData:null,counter:0,activePetType:null,activePetId:null,ping:0,nextManifestItem:null,nextExternalItem:null},g=Object(f.a)((i={},Object(c.a)(i,u.f.toString(),(function(t,e){var n={},i=e.payload,o={};for(var r in i)-1===m.indexOf(r)?(console.warn('key supplied in /data.json "'.concat(r,'" is not a valid key')),n[r]=i[r]):(n[r]=i[r],"stages"!==r&&(o[r]=i[r]));var a=t.settings.pingRate;if(void 0!==i.pingRate)try{isNaN(i.pingRate)||(a=Object(h.a)(parseInt(i.pingRate),50,5e3))}catch(u){console.error("there was a problem parsing pingRate")}Object(v.b)(i.stages);var c=Object(v.a)(0);return Object(s.a)(Object(s.a)({},t),{},{nextManifestItem:c,loadingComplete:null===c,settings:Object(s.a)(Object(s.a)({},t.settings),{},{pingRate:a}),customData:o})})),Object(c.a)(i,u.h.toString(),(function(t,e){var n=e.payload,i=n.manifest,o=n.data;if("pets"===i.type?Object(p.k)(i.id,o,i):"items"===i.type?Object(j.b)(o,i):Object(j.c)(o,i),i.isExternal)return Object(s.a)(Object(s.a)({},t),{},{nextExternalItem:null});var r=Object(v.a)(i.idx+1);return Object(s.a)(Object(s.a)({},t),{},{nextManifestItem:r,loadingComplete:null===r})})),Object(c.a)(i,b.toString(),(function(t,e){return Object(s.a)(Object(s.a)({},t),{},{transitionLabel:e.payload.label})})),Object(c.a)(i,u.a.toString(),(function(t,e){return Object(s.a)(Object(s.a)({},t),{},{nextExternalItem:{id:e.payload.id||e.payload.url,idx:0,type:e.payload.type,url:e.payload.url,isExternal:!0}})})),Object(c.a)(i,u.g.toString(),(function(t,e){var n=e.payload.id,i=t.settings[n];return void 0!==i&&i!==e.payload.value?Object(s.a)(Object(s.a)({},t),{},{settings:Object(s.a)(Object(s.a)({},t.settings),{},Object(c.a)({},n,e.payload.value))}):t})),Object(c.a)(i,u.d.toString(),(function(t,e){return Object(s.a)(Object(s.a)({},t),{},{activePetType:e.payload})})),Object(c.a)(i,u.c.toString(),(function(t,e){return Object(p.c)(e.payload)?Object(s.a)(Object(s.a)({},t),{},{activePetId:e.payload}):(console.error('Could not get pet definition for id "'.concat(e.payload,'"')),Object(s.a)({},t))})),Object(c.a)(i,u.e.toString(),(function(t,e){console.log("setItems",e.payload);var n=t.items||{};return e.payload.forEach((function(t){n[t.id]=t})),Object(s.a)(Object(s.a)({},t),{},{items:n})})),Object(c.a)(i,u.b.toString(),(function(t){return Object(s.a)(Object(s.a)({},t),{},{ping:t.ping+1})})),i),O),x=n(68),y=n(24),k=Object(f.a)((o={},Object(c.a)(o,u.c.toString(),(function(t,e){var n=Object(p.c)(e.payload);return n?n.isAlive?Object(s.a)(Object(s.a)({},t),{},{id:n.id,isAlive:!0,activities:[],mood:null}):Object(s.a)(Object(s.a)({},t),{},{id:n.id,isAlive:!1,activities:[],mood:"DEAD"}):t})),Object(c.a)(o,y.b.toString(),(function(t,e){return Object(p.a)(t.id,e.payload.id,e.payload.value),t})),Object(c.a)(o,y.c.toString(),(function(t,e){return e.payload.forEach((function(e){Object(p.a)(t.id,e.id,e.value)})),t})),Object(c.a)(o,y.a.toString(),(function(t,e){var n=e.payload;return t.activities.indexOf(n)>-1?t:Object(s.a)(Object(s.a)({},t),{},{activities:[].concat(Object(x.a)(t.activities),[n])})})),Object(c.a)(o,y.g.toString(),(function(t,e){var n=e.payload;return Object(s.a)(Object(s.a)({},t),{},{activities:t.activities.filter((function(t){return t!==n}))})})),Object(c.a)(o,y.i.toString(),(function(t,e){var n=e.payload;return n.sort().join(",")!==t.activities.join(",")?Object(s.a)(Object(s.a)({},t),{},{activities:n.sort()}):t})),Object(c.a)(o,y.e.toString(),(function(t,e){var n=t.forcedBehavior!==e.payload?e.payload:null;return Object(s.a)(Object(s.a)({},t),{},{forcedBehavior:n})})),Object(c.a)(o,y.h.toString(),(function(t,e){var n=e.payload;return Object(p.i)(n),Object(s.a)(Object(s.a)({},t),{},{isAlive:!0,mood:null,activities:[]})})),Object(c.a)(o,y.f.toString(),(function(t,e){return console.log(" KILL ",e.payload),Object(p.h)(e.payload),Object(s.a)(Object(s.a)({},t),{},{isAlive:!1,mood:"DEAD",activities:[]})})),Object(c.a)(o,y.d.toString(),(function(t,e){var n=e.payload;return t.isAlive?(Object(p.h)(e.payload),Object(s.a)(Object(s.a)({},t),{},{isAlive:!1,mood:"DEAD",activities:[]})):(Object(p.i)(n),Object(s.a)(Object(s.a)({},t),{},{isAlive:!0,mood:null,activities:[]}))})),o),{id:null,mood:null,isAlive:!0,forcedBehavior:null,activities:[]}),w=Object(r.c)({data:g,activePet:k}),I=[a.a],S=r.d.apply(void 0,[r.a.apply(void 0,I)].concat([]));e.a=Object(r.e)(w,{},S)},,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){"use strict";(function(t){var i,o=n(7),r=n(8),a=n(10),c=n(9),s=n(4),u=n(0),l=n(14),d=n(22),b=n(16),f=n(3),h=n(13),p=n(102),j=n(12),v=n(20),m=n(2),O=n(107),g=n(108),x=n(127),y=n(128),k=n(126),w=n(1),I={};I.App=f.c.section(i||(i=Object(s.a)(["\n  position:absolute;\n  left:0;\n  top:0;\n  right:0;\n  bottom:0;\n  overflow:hidden;\n\n  background-color:  ",";\n  color: ",";\n"])),Object(m.f)("color","black"),Object(m.f)("color","blue"));var S=function(e){Object(a.a)(i,e);var n=Object(c.a)(i);function i(){var e;return Object(o.a)(this,i),e=n.call(this),t.spriteScale=1,window.addEventListener("beforeunload",(function(t){e.onExitPage()})),e}return Object(r.a)(i,[{key:"onExitPage",value:function(){this.props.loadingComplete&&Object(v.j)()}},{key:"componentDidUpdate",value:function(t,e){this.props.loadingComplete&&!t.loadingComplete&&this.onLoadComplete()}},{key:"onLoadComplete",value:function(){console.log("Load complete."),this.props.setItems(t.itemStore.getItems()),this.loadDeeplinkedPet()}},{key:"loadDeeplinkedPet",value:function(t){var e=Object(p.a)(this.props.location.search);if(e&&(t||!this.props.activePetId)){var n=e.split("external_");n.length>1?(console.log('--\x3e Loading external pet with id "'.concat(n[1])),this.props.loadExternalItem({type:"pets",url:n[1],id:"external_".concat(n[1])})):this.props.setActivePetId(n[0])}}},{key:"render",value:function(){return Object(w.jsxs)(I.App,{id:"app",children:[Object(w.jsx)(g.a,{}),Object(w.jsx)(O.a,{}),Object(w.jsx)(k.a,{}),Object(w.jsx)(b.b,{exact:!0,path:"/",children:Object(w.jsx)(b.a,{to:"/pet"})}),Object(w.jsx)(b.b,{path:"/pet",component:x.a}),Object(w.jsx)(b.b,{path:"/editor",component:y.a})]})}}]),i}(u.Component);e.a=Object(b.f)(Object(d.b)((function(t,e){return{loadingComplete:Object(j.r)(t)}}),(function(t){return Object(l.b)({setActivePetId:h.c,loadExternalItem:h.a,setItems:h.e},t)}))(S))}).call(this,n(17))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(11),o=function(t){return t&&Object(i.f)(t).pet||null}},,,,,function(t,e,n){"use strict";(function(t){var i=n(7),o=n(8),r=n(10),a=n(9),c=n(0),s=n(14),u=n(22),l=n(80),d=n.n(l),b=n(81),f=n(13),h=n(12),p=function(e){Object(r.a)(c,e);var n=Object(a.a)(c);function c(){var t;return Object(i.a)(this,c),(t=n.call(this)).loadAllData(),t}return Object(o.a)(c,[{key:"componentDidUpdate",value:function(e,n){var i=this,o=this.props.nextManifestItem;o&&(e.nextManifestItem&&e.nextManifestItem.id===o.id||this.loadManifestItem(o));var r=this.props.nextExternalItem;r&&(e.nextExternalItem&&e.nextExternalItem.url===r.url||(this.loadManifestItem(r),t.setTimeout((function(){i.props.setActivePetId(r.id)}),500)))}},{key:"loadAllData",value:function(){this.loadManifestData("manifest","manifest.jsonc")}},{key:"loadManifestItem",value:function(t){var e=this;t||console.error("Loader.loadManifestItem, received null manifestItemObj");var n="".concat(t.url,"/data.jsonc");d()(n,{mode:"cors"}).then((function(t){return t.text()})).then((function(t){return b.jsonc.parse(t)}),(function(e){console.error("Error fretching item from manifestObj ".concat(t," from ").concat(n),e)})).then((function(n){return e.props.storeManifestItem({manifest:t,data:n}),!0}),(function(e){console.error("Error parsing data from manifestObj ".concat(t," (or the url (").concat(n,") was bad), skipping"),(null===e||void 0===e?void 0:e.stack)||e)}))}},{key:"loadManifestData",value:function(t,e){var n=this,i="".concat("./data","/").concat(e);console.log("reading ".concat(t," data from '").concat(i,"'")),d()(i).then((function(t){return t.text()})).then((function(t){return b.jsonc.parse(t)}),(function(e){console.error("Error fretching ".concat(t," data from ").concat(i),e)})).then((function(t){return n.props.setManifest(t),!0}),(function(e){console.error("Error parsing ".concat(t," data (or the url was bad), skipping"),(null===e||void 0===e?void 0:e.stack)||e)}))}},{key:"render",value:function(){return null}}]),c}(c.Component);e.a=Object(u.b)((function(t,e){return{nextManifestItem:Object(h.t)(t),nextExternalItem:Object(h.s)(t)}}),(function(t){return Object(s.b)({setManifest:f.f,storeManifestItem:f.h,setActivePetId:f.c},t)}))(p)}).call(this,n(17))},function(t,e,n){"use strict";(function(t){var i=n(7),o=n(8),r=n(10),a=n(9),c=n(0),s=n(14),u=n(22),l=n(13),d=n(12);n(99);var b=function(e){Object(r.a)(c,e);var n=Object(a.a)(c);function c(){var t;return Object(i.a)(this,c),(t=n.call(this)).statPinger=null,t.state={pingIdx:0},t}return Object(o.a)(c,[{key:"componentDidMount",value:function(){this.props.ping(),this.startStatPinger()}},{key:"onPing",value:function(){this.props.ping(),this.props.pingRate&&this.props.pingRate>0?this.startStatPinger(this.props.pingRate):this.killStatPinger()}},{key:"startStatPinger",value:function(e){var n=this;this.killStatPinger(),this.statPinger=t.setTimeout((function(){n.onPing()}),this.props.pingRate)}},{key:"killStatPinger",value:function(){this.statPinger&&(t.clearInterval(this.statPinger),this.statPinger=null)}},{key:"render",value:function(){return null}}]),c}(c.Component);e.a=Object(u.b)((function(t){return{pingRate:Object(d.x)(t)}}),(function(t){return Object(s.b)({ping:l.b},t)}))(b)}).call(this,n(17))},function(t,e,n){"use strict";(function(t){var i,o,r,a,c,s=n(6),u=n(7),l=n(8),d=n(10),b=n(9),f=n(4),h=n(0),p=n(3),j=n(14),v=n(22),m=n(12),O=n(1),g={};g.Scene=p.c.div(i||(i=Object(f.a)(["\n  position:absolute;\n  top:0;\n  left:0;\n  right:0;\n  bottom:0;\n  z-index:-1;\n\n  .footer-image{\n    width: 100%;\n    height: 100%;\n  }\n\n  ","\n  \n  ","\n\n"])),(function(t){return"responsive"===t.type&&Object(p.b)(o||(o=Object(f.a)(["\n    .background-image{\n      width: 100%;\n      height: 100%;\n      background-size: cover;\n    }\n  "])))}),(function(t){return"static"===t.type&&Object(p.b)(r||(r=Object(f.a)(["\n    .background-image{\n      width: 100%;\n      height: 100%;\n      background-repeat: no-repeat;\n      background-position:50% 50%;\n    }\n  "])))})),g.SceneFloor=p.c.div(a||(a=Object(f.a)(["\n  position:absolute;\n  bottom:0;\n  left:0;\n  right:0;\n  height: ",";\n\n  background-image: url(",");\n  background-color: ",";\n"])),(function(t){return"".concat(t.height,"px")}),(function(t){return t.image}),(function(t){return t.color})),g.SceneBackground=p.c.div(c||(c=Object(f.a)(["\n  position:absolute;\n  top:0;\n  left:0;\n  right:0;\n  bottom:0;\n  z-index:-1;\n\n"])));var x=function(e){Object(d.a)(i,e);var n=Object(b.a)(i);function i(){return Object(u.a)(this,i),n.apply(this,arguments)}return Object(l.a)(i,[{key:"render",value:function(){var e=this.props.activeScene;if(e){var n,i,o=e.background.imageUrl?e.background.imageUrl:null,r=e.type;return Object(O.jsxs)(g.Scene,{type:r,children:[e.floor&&Object(O.jsx)(g.SceneFloor,{height:e.floor.height,color:null===(n=e.floor)||void 0===n?void 0:n.color,children:Object(O.jsx)("div",{className:"footer-image",style:{backgroundImage:"url(".concat(null===(i=e.floor)||void 0===i?void 0:i.imageUrl,")")}})}),Object(O.jsx)(g.SceneBackground,{style:{backgroundColor:e.background.color},children:Object(O.jsx)("div",{className:"background-image",style:Object(s.a)({backgroundImage:"url(".concat(o,")")},e.background.styles)})})]})}return t.alert("ERROR: scene failed to load"),null}}]),i}(h.Component);e.a=Object(v.b)((function(t){return{activeScene:Object(m.p)(t)}}),(function(t){return Object(j.b)({},t)}))(x)}).call(this,n(17))},function(t,e,n){"use strict";(function(t){var i,o=n(7),r=n(8),a=n(10),c=n(9),s=n(4),u=n(0),l=n(3),d=n(14),b=n(22),f=n(35),h=n(45),p=n(12),j=n(24),v=n(1),m={};m.PhaserContainer=l.c.div(i||(i=Object(s.a)(["\n  display:block;\n"])));var O=function(e){Object(a.a)(i,e);var n=Object(c.a)(i);function i(){return Object(o.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"componentDidMount",value:function(){var e=this;Object(f.c)({id:"phaser-container-".concat(this.props.id)}),this.debouncedUpdateBounds=Object(h.a)(500,!1,f.d),this.debouncedUpdateBounds(0,0,this.props.width,this.props.height),Object(f.a)(this.props.activeItems),Object(f.b)(this.props.phaserPet),Object(f.h)(this.props.activeScene),t.game.onInterface=function(t,n){switch(t){case"addActivity":e.props.addActivity(n);break;case"removeActivity":e.props.removeActivity(n);break;case"augmentStats":e.props.augmentStats(n);break;case"sendStatus":e.onSendStatus(n);break;default:console.error("invalid interface command",t)}}}},{key:"onSendStatus",value:function(t){this.props.setActivities(t)}},{key:"onEmitter",value:function(t){console.error("onEmitter",t)}},{key:"componentDidUpdate",value:function(e){e.width===this.props.width&&e.height===this.props.height||this.debouncedUpdateBounds(0,0,this.props.width,this.props.height),e.phaserPet!==this.props.phaserPet&&(Object(f.a)(t.itemStore.getItems()),Object(f.b)(this.props.phaserPet)),e.activePetIsAlive!==this.props.activePetIsAlive&&Object(f.g)(this.props.phaserPet.id,this.props.activePetIsAlive),e.activePetActivities!==this.props.activePetActivities&&Object(f.e)(this.props.phaserPet.id,this.props.activePetActivities),e.animationLabel!==this.props.animationLabel&&Object(f.f)(this.props.phaserPet.id,this.props.animationLabel),e.activeScene!==this.props.activeScene&&Object(f.h)(this.props.activeScene)}},{key:"render",value:function(){return Object(v.jsx)(m.PhaserContainer,{id:"phaser-container-".concat(this.props.id)})}}]),i}(u.Component);e.a=Object(b.b)((function(t){return{phaserPet:Object(p.v)(t),activePetGraphics:Object(p.l)(t),activePetIsAlive:Object(p.n)(t),animationLabel:Object(p.j)(t),activePetActivities:Object(p.i)(t),activeScene:Object(p.p)(t),activeItems:Object(p.f)(t)}}),(function(t){return Object(d.b)({addActivity:j.a,removeActivity:j.g,setActivities:j.i,augmentStats:j.c},t)}))(O)}).call(this,n(17))},function(t,e,n){"use strict";(function(t){var i=n(7),o=n(8),r=n(25),a=n(10),c=n(9),s=n(36),u=n.n(s),l=n(112),d=n(41),b=250,f=500,h=0,p=300,j={Entity:function(e){Object(a.a)(s,e);var n=Object(c.a)(s);function s(e,o,a){var c,u;Object(i.a)(this,s),(u=n.call(this,e,a.x,a.y,a.id)).id=a.petInfo.id,u.stats=a.stats||{},console.log("spawned with petInfo",a.petInfo);var d=Object.keys(null===(c=a.petInfo)||void 0===c?void 0:c.sprites)[0];u.spriteScale=a.petInfo.sprites[d].scale||1;var b=a.petInfo.sprites[d].frameDims||[0,0],f=a.petInfo.sprites[d].frameSqueeze||{x:0,y:0,w:0,h:0};return u.canSendUpdates=a.canSendUpdates,e.add.existing(Object(r.a)(u)),o?o.add(Object(r.a)(u)):e.physics.add.existing(Object(r.a)(u)),u.setBounce(h),u.setCollideWorldBounds(!0),u.allowGravity=!1,u.body.setSize(b[0]+f.w,b[1]+f.h),u.body.offset.x=f.x,u.body.offset.y=f.y,u.body.setDrag(p),t.pet=Object(r.a)(u),u.isAlive=!0,u.personality=a.petInfo.personality,u.activities=[],u.petBrain=new l.a(u.onBrainDoComplete.bind(Object(r.a)(u)),u.onBrainThinkComplete.bind(Object(r.a)(u))),u.petBrain.setPersonality(u.personality),u.petBrain.setActive(),u}return Object(o.a)(s,[{key:"update",value:function(){this.flipX?this.body.velocity.x>=0&&(this.flipX=!1):this.body.velocity.x<0&&(this.flipX=!0),this.isAlive&&this.checkRoamingStuff()}},{key:"throttledUpdate",value:function(){if(this.isAlive&&this.petBrain.think([],[]),this.canSendUpdates){var t=[];!this.body.onFloor()&&Math.abs(this.body.velocity.y)>.5&&t.push("JUMPING"),Math.abs(this.body.velocity.x)>.5&&t.push("WALKING"),this.isRoaming&&t.push("ROAMING"),this.sendActivities(t)}}},{key:"onBrainDoComplete",value:function(){this.stopRoaming()}},{key:"onBrainThinkComplete",value:function(){this.startRoaming()}},{key:"startRoaming",value:function(){this.isRoaming=!0}},{key:"stopRoaming",value:function(t){this.isRoaming=!1}},{key:"updateActivities",value:function(t){this.activities=t}},{key:"updateMortality",value:function(t){this.isAlive=t,t?this.petBrain.setActive(!0):this.petBrain.setActive(!1)}},{key:"hasActivity",value:function(t){return this.activities.indexOf(t)>-1}},{key:"setBehaviors",value:function(t){this.behaviors=t}},{key:"hasBehavior",value:function(t){return this.behaviors.indexOf(t)>-1}},{key:"checkRoamingStuff",value:function(){this.body.onWall()?this.flipAndMove(1):this.body.onFloor()&&this.hasActivity("ROAMING")&&(Math.random()<this.personality.jumpChance?this.jump(20):this.keepRoaming(1))}},{key:"flipAndMove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.body.velocity.x>0?this.move(-1*t):this.move(1*t)}},{key:"keepRoaming",value:function(){var t=1;this.body.velocity.x<0&&(t=-1),this.move(t)}},{key:"jump",value:function(){this.body.onFloor()&&this.setVelocityY(-1*f)}},{key:"move",value:function(t){this.body.velocity.x=b*t}},{key:"applyItemEffects",value:function(t){console.log("pet.applyItemEffect",t),console.log("doin",t),d.a.emit("interface","augmentStats",t)}},{key:"playAnimation",value:function(t){this.curAnimation!==t&&(this.curAnimation=t,this.anims.play(t).setScale(this.spriteScale).setOrigin(0))}},{key:"addActivity",value:function(t){this.hasActivity(t)||d.a.emit("interface","addActivity",t)}},{key:"sendActivities",value:function(t){d.a.emit("sendStatus",t)}},{key:"removeActivity",value:function(t){this.hasActivity(t)&&(console.log("removiong with ",this.activities),d.a.emit("interface","removeActivity",t))}}]),s}(u.a.Physics.Arcade.Sprite),updatePetInfo:function(t){console.log("Pet.updatePetInfo",t)}};e.a=j}).call(this,n(17))},function(t,e,n){"use strict";var i=n(6),o=n(7),r=n(8),a=n(11),c=0,s=1,u=2,l={thinkRange:[500,2e3],doRange:[500,2e3],jumpChance:0},d=function(){function t(e,n){Object(o.a)(this,t),this.onThinkComplete=n,this.onDoComplete=e,this.timer=null,this.status=c,this.isActive=!1}return Object(r.a)(t,[{key:"getStatus",value:function(){return this.name}},{key:"pullThePlug",value:function(){this.status=c,this.killTimer()}},{key:"startTimer",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.killTimer(),this.timer=window.setTimeout((function(){n.onTimerComplete(t,e)}),i)}},{key:"getPersonality",value:function(){return this.personality||l}},{key:"killTimer",value:function(){this.timer&&(window.clearTimeout(this.timer),this.timer=null)}},{key:"getDuration",value:function(t){return t===s?Object(a.j)(this.getPersonality().thinkRange):t===u?Object(a.j)(this.getPersonality().doRange):(console.error('unexpected duration type "'.concat(t,'"')),0)}},{key:"setActive",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isActive=t}},{key:"setPersonality",value:function(t){this.personality=Object(i.a)(Object(i.a)({},this.getPersonality()),t)}},{key:"think",value:function(t,e){e.length>0||this.status===c&&(this.timer||this.startDoing())}},{key:"startDoing",value:function(t){this.status=u,this.startTimer(this.status,t,this.getDuration(u))}},{key:"startThinking",value:function(t){this.status=s,this.startTimer(this.status,t,this.getDuration(s))}},{key:"onTimerComplete",value:function(t,e){switch(t!==this.status&&console.error("I havent really decided what to use yet, but this is unexpected"),this.status){case s:this.isActive&&(this.onThinkComplete&&this.onThinkComplete(),e&&e(),this.startDoing());break;case u:this.isActive&&(this.onDoComplete&&this.onDoComplete(),e&&e(),this.startThinking());break;case c:console.error("should not have finished a timer in a different status")}}}]),t}();e.a=d},function(t,e,n){"use strict";(function(t){var i,o,r=n(7),a=n(8),c=n(10),s=n(9),u=n(4),l=n(0),d=n(3),b=n(2),f=n(19),h=n(1),p={};p.Wrapper=d.c.div(i||(i=Object(u.a)(["\n  position:relative;\n\n  &:hover{\n    .statEventDetail{\n      opacity:1;\n    }\n  }\n"]))),p.CooldownBar=d.c.div(o||(o=Object(u.a)(["\n  width:100%;\n  background-color: ",";\n  height:5px;\n\n  >div{\n    background-color: ",";\n    height:100%;\n    transition: width .1s linear;\n  }\n"])),Object(b.c)("grey"),Object(b.c)("blue"));var j=function(e){Object(c.a)(i,e);var n=Object(s.a)(i);function i(t){var e;return Object(r.a)(this,i),(e=n.call(this,t)).cooldownTimer=null,e.state={isCooling:!1,coolAt:null},e}return Object(a.a)(i,[{key:"coolDownComplete",value:function(){this.setState({isCooling:!1,coolAt:null})}},{key:"startCooldown",value:function(t){this.setState({isCooling:!0,coolAt:(new Date).getTime()+t}),this.startCooldownTimer(t)}},{key:"startCooldownTimer",value:function(e){var n=this;this.killCooldownTimer(),this.cooldownTimer=t.setTimeout((function(){n.coolDownComplete()}),e)}},{key:"killCooldownTimer",value:function(){this.cooldownTimer&&(t.clearTimeout(this.cooldownTimer),this.cooldownTimer=null)}},{key:"onButtonClick",value:function(t){this.state.isCooling?console.error("ITEM IS STILL COOLING"):(t.cooldown&&this.startCooldown(t.cooldown),this.triggerStatEffects(t.statEffects))}},{key:"triggerStatEffects",value:function(t){var e=this;t.forEach((function(t){t.immediate&&e.props.onImmediateUpdate(t.id,t.immediate)}))}},{key:"renderTooltip",value:function(t){var e="";return t.statEffects.forEach((function(t,n){n>0&&(e+="\n"),e+="".concat(t.id,":"),t.immediate&&(e+=t.immediate>0?"+".concat(t.immediate):"".concat(t.immediate))})),t.cooldown&&(e+="\ncooldown: ".concat(t.cooldown)),e}},{key:"getCooldownWidth",value:function(t){if(t){if(!this.state.isCooling)return"100%";var e=(this.state.coolAt-(new Date).getTime())/t;return Math.round(100*e)+"%"}return null}},{key:"render",value:function(){var t=this,e=this.props.statEventObj,n=this.getCooldownWidth(e.cooldown);return Object(h.jsxs)(p.Wrapper,{children:[Object(h.jsx)(f.b,{text:e.label,onClick:function(n){return t.onButtonClick(e)},isDisabled:this.state.isCooling,tooltip:this.renderTooltip(e)}),n&&Object(h.jsx)(p.CooldownBar,{children:Object(h.jsx)("div",{style:{width:n}})})]})}}]),i}(l.Component);e.a=j}).call(this,n(17))},,,,,,function(t,e,n){"use strict";(function(t){var i,o=n(6),r=n(7),a=n(8),c=n(10),s=n(9),u=n(4),l=n(0),d=n(3),b=n(14),f=n(22),h=n(16),p=n(13),j=n(12),v=n(120),m=n(19),O=n(1),g={};g.Body=d.c.div(i||(i=Object(u.a)(["\n  ul{\n    padding:0;\n    margin: 0;\n    list-style:none;\n\n    >li{\n      display: inline-block;\n      width:100%;\n\n      &:last-of-type{\n        margin-bottom: 2rem;\n      }\n    }\n  }\n"])));var x=function(e){Object(c.a)(i,e);var n=Object(s.a)(i);function i(){return Object(r.a)(this,i),n.apply(this,arguments)}return Object(a.a)(i,[{key:"onSelectPet",value:function(t){this.props.history.push({search:"?pet=".concat(t)}),this.props.setActivePetId(t),this.props.onSelectPet(t)}},{key:"showLoadPrompt",value:function(){var e=t.prompt("Enter URL to directory containing pet manifest and assets. \n (use the provided url to load the raccoon externally)","http://thomasyancey.com/projects/virtualpet-external/pets/rizzo-raccoon");e&&this.props.loadExternalItem({type:"pets",url:e,id:"external_".concat(e)})}},{key:"render",value:function(){var t=this,e=this.props,n=e.taxonomy,i=e.activePetType,r=e.activePetId,a=e.activeObjects,c=e.setActivePetType;return Object(O.jsx)(g.Body,{children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(m.b,{text:"Load external",onClick:function(e){return t.showLoadPrompt()}})},0),n.map((function(e,n){return Object(O.jsx)("li",{children:Object(O.jsx)(v.a,{text:e.type,isActive:e.type===i,onClick:function(){return c(e.type)},onItemClick:function(e,n){return t.onSelectPet(e)},activeId:r,items:a.map((function(t){return Object(o.a)(Object(o.a)({},t),{},{text:t.name,subText:t.animal})}))})},"".concat(n,"-").concat(e.type))}))]})})}}]),i}(l.Component);e.a=Object(h.f)(Object(f.b)((function(t){return{activePetType:Object(j.b)(t),activePetId:Object(j.a)(t),counter:Object(j.c)(t),taxonomy:Object(j.u)(t),activeObjects:Object(j.o)(t)}}),(function(t){return Object(b.b)({setActivePetType:p.d,setActivePetId:p.c,loadExternalItem:p.a},t)}))(x))}).call(this,n(17))},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var i,o,r,a,c,s,u,l=n(7),d=n(8),b=n(10),f=n(9),h=n(4),p=n(0),j=n(3),v=n(2),m=n(121),O=n.n(m),g=n(1),x={};x.MenuLabel=j.c.div(i||(i=Object(h.a)(["\n"]))),x.DropMenu=j.c.div(o||(o=Object(h.a)(["\n  cursor: pointer;\n  padding: 1rem;\n  font-size:3rem;\n  font-weight: 600;\n  margin-top: 1rem;\n  width:100%;\n\n  overflow:hidden;\n \n  background-color: ",";\n  color: ",";\n  text-shadow: .5px .5px 1.5px ",";\n\n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-radius:1rem;\n  border-color:  rgba(0, 0, 0, .2) rgba(255, 255, 255, .2) rgba(255, 255, 255, .2) rgba(0, 0, 0, .2);\n  box-shadow: -.1rem -.1rem .5rem black;\n\n  &:hover{\n    background-color: ",";\n    text-shadow: 1.5px 1.5px 1.5px ",";\n    transform: translate(-1px, -1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n\n  &:active{\n    background-color: ",";\n    transform: translate(.5px, 1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n"])),Object(v.f)("color","blue"),Object(v.f)("color","white"),Object(v.f)("color","black"),Object(v.e)("blue",10),Object(v.f)("color","black"),Object(v.e)("blue",-10)),x.DropItem=j.c.div(r||(r=Object(h.a)(["\n  padding:2rem 2rem;\n  text-align:right;\n  margin-top: 2rem;\n  max-height:15rem;\n  position:relative;\n\n  >*{\n    :first-child{\n    }\n    :last-child{\n      flex:1;\n    }\n  }\n\n\n  color: ",";\n  text-shadow: .5px .5px 1.5px ",";\n  background-color: ",";\n\n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.2) rgba(255, 255, 255, 0.2);\n  border-radius: 1rem;\n  box-shadow: .1rem .1rem .5rem black;\n\n  transition: background-color .1s ease-out;\n\n  &:hover{\n    background-color: ",";\n    text-shadow: 1.5px 1.5px 1.5px ",";\n    transform: translate(-1px, -1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n  \n  &:active{\n    background-color: ",";\n    transform: translate(.5px, 1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n\n  ","\n\n  >div{\n    display:inline-block;\n    vertical-align:middle;\n  }\n"])),Object(v.f)("color","white"),Object(v.f)("color","black"),Object(v.f)("color","blue"),Object(v.e)("blue",10),Object(v.f)("color","black"),Object(v.e)("blue",-10),(function(t){return t.isActive&&Object(j.b)(a||(a=Object(h.a)(["\n    color: ",";\n    text-shadow: 1px 1px 1.5px ",";\n    background-color: ",";\n\n    &:hover{\n      background-color: ",";\n    }\n  "])),Object(v.f)("color","yellow"),Object(v.f)("color","black"),Object(v.f)("color","green"),Object(v.e)("green",10))})),x.DropItemImgContainer=j.c.div(c||(c=Object(h.a)(["\n  width:106px;\n  height:106px;\n\n  img{\n    box-shadow: ",";\n    border: .5rem solid ",";\n    border-radius: 50%;\n    width:auto;\n    height:100%;\n  }\n\n"])),Object(v.f)("shadow","z2"),Object(v.f)("color","white")),x.DropItemLabel=j.c.div(s||(s=Object(h.a)(["\n  width:calc(100% - 106px);\n"]))),x.DropItems=j.c.div(u||(u=Object(h.a)(["\n"])));var y=function(t){Object(b.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).state={isOpen:!1},i}return Object(d.a)(n,[{key:"onItemClicked",value:function(t,e){this.props.onItemClick&&this.props.onItemClick(t,e)}},{key:"render",value:function(){var t=this,e=this.props,n=e.text,i=e.isActive,o=e.activeId,r=e.onClick,a=e.style,c=e.items;return Object(g.jsxs)(x.DropMenu,{isActive:i,onClick:function(t){return r&&r(t)},style:a,children:[Object(g.jsx)(x.MenuLabel,{children:n}),Object(g.jsx)(x.DropItems,{children:i&&c.map((function(e,n){return Object(g.jsx)(k,{isActive:e.id===o,thumbnail:"".concat(e.dir,"/assets/").concat(e.thumbnail),text:e.text,subText:e.subText,onClick:function(n){return t.onItemClicked(e.id,n)}},n)}))})]})}}]),n}(p.Component),k=function(t){var e=t.text,n=t.subText,i=t.isActive,o=t.onClick,r=t.style,a=t.thumbnail;return Object(g.jsxs)(x.DropItem,{isActive:i,onClick:function(t){return o&&o(t)},style:r,children:[Object(g.jsx)(x.DropItemImgContainer,{children:Object(g.jsx)(O.a,{src:a,fallbackImage:"ui/unknown_thumbnail.jpg",initialImage:"ui/unknown_thumbnail.jpg",alt:e})}),Object(g.jsxs)(x.DropItemLabel,{children:[Object(g.jsx)("h2",{children:e}),Object(g.jsx)("h5",{children:n})]})]})}},,function(t,e,n){"use strict";(function(t){var i,o,r,a,c,s=n(7),u=n(8),l=n(10),d=n(9),b=n(4),f=n(0),h=n(3),p=n(14),j=n(22),v=n(2),m=n(13),O=n(1),g={};g.Wrapper=h.c.div(i||(i=Object(b.a)(["\n  width: 100%;\n  margin-bottom: 1rem;\n  \n  ","\n"])),(function(t){return t.isDisabled&&Object(h.b)(o||(o=Object(b.a)(["\n    opacity:.2;\n  "])))})),g.Label=h.c.div(r||(r=Object(b.a)(["\n  margin-bottom: .5rem;\n"]))),g.RangeInput=h.c.input(a||(a=Object(b.a)(["\n\n  -webkit-appearance: none;\n  width: 100%;\n  height: 1rem;\n  border-radius: .5rem;\n  background: ",";\n  outline: none;\n  cursor: pointer;\n  ","\n\n  &:disabled{\n    opacity:.5;\n  }\n  \n  &::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n    background: ",";\n    box-shadow: ",";\n    cursor: grab;\n  }\n\n  &::-moz-range-thumb {\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n    background: ",";\n    cursor: grab;\n  }\n"])),Object(v.c)("purple"),(function(t){return t.isInverted&&Object(h.b)(c||(c=Object(b.a)(["\n    direction: rtl;\n  "])))}),Object(v.c)("blue"),Object(v.f)("shadow","z1"),Object(v.c)("blue"));var x=function(e){Object(l.a)(i,e);var n=Object(d.a)(i);function i(t){var e;return Object(s.a)(this,i),(e=n.call(this,t)).throttleTimer=null,e}return Object(u.a)(i,[{key:"killThrottleTimer",value:function(){this.throttleTimer&&(t.clearTimeout(this.throttleTimer),this.throttleTimer=null)}},{key:"startThrottleTimer",value:function(e,n){var i=this;this.throttleTimer||(this.throttleTimer=t.setTimeout((function(){n&&n(),i.killThrottleTimer()}),e))}},{key:"onChangeSlider",value:function(t){var e=this;this.startThrottleTimer(100,(function(){return e.props.setSettingsValue({id:e.props.id,value:t})}))}},{key:"render",value:function(){var t=this,e=this.props,n=e.title,i=e.value,o=e.min,r=e.max,a=e.step,c=e.isInverted,s=e.isDisabled;return Object(O.jsxs)(g.Wrapper,{isDisabled:s,children:[Object(O.jsxs)(g.Label,{children:[Object(O.jsx)("span",{children:"".concat(n,":")}),Object(O.jsx)("span",{children:" ".concat(i)})]}),Object(O.jsx)(g.RangeInput,{id:"myRange",type:"range",min:o,max:r,step:a,value:i,disabled:s,onChange:function(e){return t.onChangeSlider(e.target.value)},isInverted:c})]})}}]),i}(f.Component);e.a=Object(j.b)((function(t){return{}}),(function(t){return Object(p.b)({setSettingsValue:m.g},t)}))(x)}).call(this,n(17))},function(t,e,n){"use strict";e.a=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,177)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),i(t),o(t),r(t),a(t)}))}},,,function(t,e,n){"use strict";var i,o,r,a,c=n(7),s=n(8),u=n(10),l=n(9),d=n(4),b=n(0),f=n(3),h=n(19),p=n(2),j=n(25),v=n.p+"static/media/unfold_more.c42abd3e.svg",m=n.p+"static/media/unfold_less.7d49cd1e.svg",O=n(1),g={};g.Base=f.c.div(i||(i=Object(d.a)(["\n  overflow-y:hidden;\n  border-bottom: .5rem solid;\n  box-shadow: 2px 2px 2px black;\n\n  background-color: ",";\n  transition: background-color .5s, color .5s;\n\n  &:hover{\n    background-color: ",";\n    transition: background-color .5s, color .5s;\n  }\n  color: ",";\n"])),Object(p.e)("white",0),Object(p.f)("color","green"),Object(p.f)("color","black")),g.Header=f.c.div(o||(o=Object(d.a)(["\n  padding: 2rem 3rem;\n  display:flex;\n  align-items:center;\n  cursor:pointer;\n\n  img{\n    width: 30px;\n  }\n  h2{\n    flex:1;\n    color: ",";\n    text-shadow: .1px .1px .5px ",";\n  }\n\n  &:hover{\n    h2{\n      text-shadow: .25px .25px 1.5px ",";\n    }\n  }\n"])),Object(p.f)("color","black"),Object(p.f)("color","black"),Object(p.f)("color","black")),g.Body=f.c.div(r||(r=Object(d.a)(["\n  padding: 0 3rem;\n  max-height:0;\n  ","\n"])),(function(t){return t.isOpen&&Object(f.b)(a||(a=Object(d.a)(["\n    max-height: none;\n  "])))}));var x,y,k=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).onPanelClick=i.onPanelClick.bind(Object(j.a)(i)),i.state={isOpen:!1},i}return Object(s.a)(n,[{key:"onPanelClick",value:function(t){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return Object(O.jsxs)(g.Base,{children:[Object(O.jsxs)(g.Header,{onClick:this.onPanelClick,children:[Object(O.jsx)("h2",{children:this.props.label}),this.state.isOpen?Object(O.jsx)("img",{src:v,alt:"loading"}):Object(O.jsx)("img",{src:m,alt:"loading"})]}),Object(O.jsx)(g.Body,{isOpen:this.state.isOpen,children:this.props.children})]})}}]),n}(b.Component),w=n(119),I=n(14),S=n(22),A=n(13),C=n(12),E=n(122),P={};P.Body=f.c.div(x||(x=Object(d.a)(["\n  ul{\n    padding:0;\n    margin: 0;\n    list-style:none;\n\n    text-align:left;\n  }\n"]))),P.Item=f.c.li(y||(y=Object(d.a)(["\n  display: inline-block;\n  width:100%;\n  margin-bottom: 1rem;\n\n  span:first-of-type{\n    font-weight: bold;\n  }\n\n  span:last-of-type{\n\n  }\n\n  &:last-of-type{\n    margin-bottom: 2rem;\n  }\n"])));var T,D,B,M,R,L,N,z,_=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).onPanelClick=i.onPanelClick.bind(Object(j.a)(i)),i.state={isOpen:!1},i}return Object(s.a)(n,[{key:"onPanelClick",value:function(t){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var t=this.props,e=[{id:"pingRate",title:"Stat Update Speed",min:50,max:5e3,step:10,isDisabled:!1,isInverted:!0,value:t.pingRate},{id:"volume",title:"Volume",min:0,max:100,step:5,isDisabled:!0,isInverted:!1,value:t.volume},{id:"animationSpeed",title:"Animation Speed",min:5,max:1e3,step:1,isDisabled:!0,isInverted:!0,value:t.animationSpeed}];return Object(O.jsx)(P.Body,{children:Object(O.jsx)("ul",{children:e.map((function(t,e){return Object(O.jsx)(P.Item,{children:Object(O.jsx)(E.a,{id:t.id,title:t.title,value:t.value,min:t.min,max:t.max,step:t.step,isDisabled:t.isDisabled,isInverted:t.isInverted})},e)}))})})}}]),n}(b.Component),U=Object(S.b)((function(t){return{pingRate:Object(C.x)(t),volume:Object(C.y)(t),animationSpeed:Object(C.w)(t)}}),(function(t){return Object(I.b)({setSettingsValue:A.g},t)}))(_),G=n(20),F=n(16);n(99);var W={};W.Menu=f.c.div(T||(T=Object(d.a)(["\n  position:absolute;\n  top:0;\n  right:0;\n  width:100%;\n  height:100%;\n"]))),W.MainPanel=f.c.div(D||(D=Object(d.a)(["\n  position:fixed;\n  top:0rem;\n  bottom:0;\n  border-left: 1rem solid ",";\n  box-shadow: ",";\n\n\n  @media ","{\n    max-width: calc(100% - 15rem);\n  }\n  @media ","{\n    max-width: calc(50%);\n  }\n  width:100%;\n\n  padding-right:0;\n  \n\n  ","\n"])),Object(p.c)("white"),Object(p.f)("shadow","z3"),p.b.mobile_tiny,p.b.tablet,(function(t){return t.isOpen?Object(f.b)(B||(B=Object(d.a)(["\n      right:0%;\n      transition:right .2s ease-in;\n    "]))):Object(f.b)(M||(M=Object(d.a)(["\n      right:-100%;\n      transition:right .3s ease-in;\n    "])))})),W.PanelContainer=f.c.div(R||(R=Object(d.a)(["\n  width:100%;\n  height:100%;\n  overflow-y:auto;\n"]))),W.ResetButton=f.c.div(L||(L=Object(d.a)(["\n  /* position:absolute; */\n  /* right:1rem; */\n  /* bottom:1rem; */\n  button{\n    background-color: ",";\n\n    &:hover{\n      background-color: ",";\n    }\n    &:active{\n      background-color: ",";\n    }\n  }\n"])),Object(p.c)("black"),Object(p.c)("red"),Object(p.e)("red",-20)),W.MenuButton=f.c.div(N||(N=Object(d.a)(["\n  z-index:2;\n  position:absolute;\n\n  top:.5rem;\n  right:calc(100% + 2rem);\n"]))),W.PanelBg=f.c.div(z||(z=Object(d.a)(["\n  width:100%;\n  height:100%;\n  position:absolute;\n  left:0;\n  right:0;\n  top:0;\n  bottom:0;\n  /* border-radius: 10px 0 0 10px; */\n\n  z-index:-1;\n  background-color: ",";\n  opacity:1;\n"])),Object(p.e)("black",0));var V,H,K=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return Object(O.jsx)(W.Menu,{id:"menu",children:Object(O.jsxs)(W.MainPanel,{id:"main-panel",isOpen:this.props.isOpen,children:[Object(O.jsx)(W.MenuButton,{children:Object(O.jsx)(h.b,{text:"menu",onClick:function(){return t.props.onToggleMenu()}})}),Object(O.jsxs)(W.PanelContainer,{children:[Object(O.jsx)(k,{label:"Pet Selection",children:Object(O.jsx)(w.a,{onSelectPet:function(){return t.props.onToggleMenu(!1)}})}),Object(O.jsx)(k,{label:"Settings",children:Object(O.jsx)(U,{})}),Object(O.jsxs)(W.ResetButton,{children:[Object(O.jsx)(h.a,{text:"pet",onClick:function(){return t.props.history.push("/pet".concat(t.props.location.search))}}),Object(O.jsx)(h.a,{text:"editor",onClick:function(){return t.props.history.push("/editor".concat(t.props.location.search))}}),Object(O.jsx)(h.a,{text:"CLEAR SAVE",onClick:function(){return Object(G.b)()},style:{backgroundColor:Object(p.c)("red")}})]})]}),Object(O.jsx)(W.PanelBg,{})]})})}}]),n}(b.Component),X=Object(F.f)(K),J={};J.MenuContainer=f.c.div(V||(V=Object(d.a)(["\n  position:fixed;\n  top:0;\n  right:0;\n  z-index:2;\n"]))),J.MenuButton=f.c.div(H||(H=Object(d.a)(["\n  position:absolute;\n  right:.5rem;\n  top:.5rem;\n"])));var Y=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(c.a)(this,n),(t=e.call(this)).state={isOpen:!1},t}return Object(s.a)(n,[{key:"onToggleMenu",value:function(t){this.setState({isOpen:void 0!==t?t:!this.state.isOpen})}},{key:"render",value:function(){var t=this;return Object(O.jsxs)(J.MenuContainer,{id:"menu-container",children:[Object(O.jsx)(J.MenuButton,{children:Object(O.jsx)(h.b,{text:"menu",onClick:function(){return t.onToggleMenu()}})}),Object(O.jsx)(X,{isOpen:this.state.isOpen,onToggleMenu:function(e){return t.onToggleMenu(e)}})]})}}]),n}(b.Component);e.a=Y},function(t,e,n){"use strict";var i,o,r,a,c,s,u,l,d,b,f,h,p=n(7),j=n(8),v=n(10),m=n(9),O=n(4),g=n(0),x=n(3),y=n(62),k=n(14),w=n(22),I=n(2),S=n(19),A=n(11),C=n(6),E=n(1),P={};P.EffectMarker=x.c.div(i||(i=Object(O.a)(["\n  box-shadow: ",";\n  position:absolute;\n  height:100%;\n  z-index:1;\n  opacity: .5;\n\n  transition: opacity 1s;\n\n  ","\n\n  /* &:nth-child(odd){\n    .effect-label{\n      bottom:100%;\n      border-radius: 1rem 1rem 0 0;\n      border-bottom: 0;\n    }\n  }\n  &:nth-child(even){ */\n    .effect-label{\n      top:100%;\n      border-radius: 0 0 1rem 1rem;\n      border-top: 0;\n    }\n  /* } */\n\n"])),Object(I.f)("shadow","z3"),(function(t){return t.isActive&&Object(x.b)(o||(o=Object(O.a)(["\n    opacity: 1;\n    transition: opacity 1s;\n  "])))})),P.Stick=x.c.div(r||(r=Object(O.a)(["\n  width:8px;\n  height:100%;\n  opacity:1;\n  margin-left:-4px;\n\n  >*{\n    display:inline-block;\n    width:4px;\n    height:100%;\n  }\n\n  ","\n  ","\n"])),(function(t){return 1===t.direction&&Object(x.b)(a||(a=Object(O.a)(["\n    >.left{\n      background-color: ",";\n    }\n    >.right{\n      background-color: ",";\n    }\n  "])),Object(I.c)("white"),(function(t){return t.color}))}),(function(t){return-1===t.direction&&Object(x.b)(c||(c=Object(O.a)(["\n    >.left{\n      background-color: ",";\n    }\n    >.right{\n      background-color:  ",";\n    }\n  "])),(function(t){return t.color}),Object(I.c)("white"))})),P.Bubble=x.c.div(s||(s=Object(O.a)(["\n  box-shadow: ",";\n  border: .3rem solid ",";\n  background-color: ",";\n  position:absolute;\n\n  white-space: nowrap;\n  font-size: 1rem;\n\n\n  width:3rem;\n  height:2rem;\n\n  overflow:hidden;\n\n  >*{\n    position:absolute;\n    left:0;\n    top:0;\n    width:50%;\n    height:100%;\n\n    &.left{\n    }\n\n    &.right{\n      left:calc(50%);\n    }\n  }\n\n  transform:translateX(-50%);\n\n  ","\n  ","\n  ","\n"])),Object(I.f)("shadow","z3"),(function(t){return t.color}),(function(t){return t.color}),(function(t){return 1===t.direction&&Object(x.b)(u||(u=Object(O.a)(["\n    >.left{\n      background-color: ",";\n    }\n    >.right{\n      background-color: ",";\n    }\n  "])),Object(I.c)("white"),(function(t){return t.color}))}),(function(t){return-1===t.direction&&Object(x.b)(l||(l=Object(O.a)(["\n\n    >.left{\n      background-color: ",";\n    }\n    >.right{\n      background-color: ",";\n    }\n  "])),(function(t){return t.color}),Object(I.c)("white"))}),(function(t){return 0===t.direction&&Object(x.b)(d||(d=Object(O.a)(["\n    background-color: ",";\n  "])),Object(I.c)("white"))})),P.BubbleTip=x.c.div(b||(b=Object(O.a)(["\n\n  ","\n\n  pointer-events: none;\n  position:absolute;\n  background-color: ",";\n  border-radius: 1rem;\n  padding: 1rem;\n  box-shadow: ",";\n  font-size:1.25rem;\n  left:50%;\n  transform:translateX(-50%);\n\n  margin-top:3rem;\n\n  min-width: 15rem;\n\n  transition: opacity .3s, top .2s;\n"])),(function(t){return t.isShowing?Object(x.b)(f||(f=Object(O.a)(["\n    top:100%;\n    opacity: 1;\n  "]))):Object(x.b)(h||(h=Object(O.a)(["\n    top:0%;\n    opacity: 0;\n  "])))}),(function(t){return t.color}),Object(I.f)("shadow","z3"));var T,D,B,M,R,L,N,z=function(t){Object(v.a)(n,t);var e=Object(m.a)(n);function n(t){var i;return Object(p.a)(this,n),(i=e.call(this,t)).state={tooltipShowing:!1},i}return Object(j.a)(n,[{key:"onEnterBubble",value:function(t){this.setState({tooltipShowing:!0})}},{key:"onLeaveBubble",value:function(){this.setState({tooltipShowing:!1})}},{key:"renderMessage",value:function(t,e,n,i,o){var r=[];return r.push(Object(E.jsxs)("span",{children:["when ",Object(E.jsx)("strong",{children:e})," is ",Object(E.jsx)("strong",{children:t.when}),", I feel ",Object(E.jsx)("strong",{children:"".concat(t.mood.label)})]},"1")),n&&(i&&-1===o?r.push(Object(E.jsxs)("span",{children:["if i dont have enough ",Object(E.jsx)("strong",{children:e})," i'll die!"]},"2")):i||1!==o||r.push(Object(E.jsxs)("span",{children:["if i have too much ",Object(E.jsx)("strong",{children:e})," i'll die!"]},"2"))),r}},{key:"render",value:function(){var t=this,e=Object(C.a)({},this.props),n=e.effect,i=e.statObj,o=e.colorObj,r=e.isActive,a=function(t,e){var n,i=Object(A.h)(t.when);return n=i.isPercent?i.criteria:100*Object(A.k)(i.criteria/e.max,2),{label:t.mood.label,position:"".concat(n,"%"),direction:i.direction}}(n,i),c=Object(I.c)("white"),s=a.direction;return 1===s?c=o.plus:-1===s&&(c=o.minus),Object(E.jsxs)(P.EffectMarker,{style:{left:a.position},isActive:r,onMouseEnter:function(e){return t.onEnterBubble(e)},onMouseLeave:function(){return t.onLeaveBubble()},children:[Object(E.jsxs)(P.Stick,{color:c,isActive:r,direction:s,children:[Object(E.jsx)("div",{className:"left"}),Object(E.jsx)("div",{className:"right"})]}),Object(E.jsxs)(P.Bubble,{className:"effect-label",color:c,isActive:r,direction:s,alt:a.label,children:[Object(E.jsx)("div",{className:"left"}),Object(E.jsx)("div",{className:"right"})]}),Object(E.jsx)(P.BubbleTip,{color:c,isShowing:this.state.tooltipShowing,children:this.renderMessage(n,i.label,i.doesKill,i.fullIsGood,s)})]})}}]),n}(g.Component),_={};_.ProgressBar=x.c.div(T||(T=Object(O.a)(["\n  position:relative;\n  margin: 1rem;\n  margin-bottom: 3rem;\n  \n  color: ",";\n"])),Object(I.f)("color","black")),_.Bar=x.c.div(D||(D=Object(O.a)(["\n  position:relative;\n  border:.5rem solid ",";\n  border-radius: 1rem;\n  overflow:hidden;\n  padding:.25rem .5rem;\n  text-align:center;\n  background-color: ",";\n\n  box-shadow: 0px -2px 4px ",";\n"])),Object(I.f)("color","white"),Object(I.f)("color","white"),Object(I.e)("white",-40)),_.Value=x.c.span(B||(B=Object(O.a)(["\n  position: relative;\n  z-index:1;\n  /* color: white; */\n"]))),_.Label=x.c.div(M||(M=Object(O.a)(["\n  position:relative;\n  display:inline;\n\n  background-color:",";\n  padding: .25rem 1rem .5rem 1rem;\n  border-radius: 1rem 1rem 0rem 0rem;\n  border: .5rem solid white;\n  margin:0 0 -1rem .5rem;\n  /* color:","; */\n\n  >*{\n    display:inline-block;\n    vertical-align:middle;\n  }\n\n  h4{\n    width:60%;\n    font-size:2rem;\n  display:inline;\n  }\n  div{\n    width:40%;\n  }\n"])),Object(I.f)("color","blue"),Object(I.f)("color","black")),_.BarGroup=x.c.div(R||(R=Object(O.a)(["\n  /* allows canvas clicks behind menu elements */\n  /* pointer-events: all; */\n  \n  position:relative;\n  display:flex;\n  flex-direction:column;\n\n  \n  >*{\n    display:inline-block;\n    vertical-align:middle;\n  }\n\n\n  >div{\n    width:100%;\n  }\n  button{\n    position:absolute;\n    z-index:1;\n    border: 5px solid white;\n    box-shadow: none;\n    margin: 0;\n    padding: .2rem 1rem;\n\n    &:first-child{\n      /* background-color: ","; */\n      left:-1rem;\n      bottom: -1rem;\n    }\n    &:last-child{\n      /* background-color: ","; */\n      right:-1rem;\n      bottom: 1rem;\n    }\n  }\n"])),Object(I.f)("color","red"),Object(I.f)("color","green")),_.Bg=x.c.div(L||(L=Object(O.a)(["\n  position:absolute;\n  top:0;\n  left:0;\n  height:100%; \n  transition: width .3s ease-in-out, background-color .5s ease-in-out;\n"]))),_.EffectMarkers=x.c.div(N||(N=Object(O.a)(["\n  position:absolute;\n  width:100%;\n  height:100%;\n"])));var U,G,F,W,V,H,K,X,J,Y,q,Q=function(t){var e=t.statObj,n=t.label,i=t.isActive,o=t.augmentAction,r=t.sceneStyles,a=t.moods,c=function(t,e){return e[t]||e.neutral||"white"}(function(t,e,n){if("empty"===t){if(e<20)return n?"bad":"good";if(e>80)return n?"good":"bad"}else if("fill"===t){if(e<20)return n?"bad":"good";if(e>80)return n?"good":"bad"}return"neutral"}(e.fillType,e.percent,e.fullIsGood),r.bars),s=e.fullIsGood?Object(I.c)("red"):Object(I.c)("green"),u=e.fullIsGood?Object(I.c)("green"):Object(I.c)("red");return Object(E.jsxs)(_.ProgressBar,{style:{color:r.text},children:[Object(E.jsx)(_.Label,{children:Object(E.jsx)("h4",{children:n})}),Object(E.jsxs)(_.BarGroup,{children:[o&&Object(E.jsx)(S.b,{text:"-",onClick:function(t){return o(e.id,-15)},style:{backgroundColor:s}}),Object(E.jsx)(_.EffectMarkers,{children:e.effects.map((function(t,n){return Object(E.jsx)(z,{isOdd:n%2,isActive:a.indexOf(t.mood.id)>-1,effect:t,statObj:e,colorObj:{minus:s,plus:u}},n)}))}),Object(E.jsxs)(_.Bar,{isActive:i,children:[Object(E.jsx)(_.Value,{children:"".concat(Object(A.k)(e.cur)," / ").concat(e.max," (").concat(Object(A.k)(e.percent),"%)")}),Object(E.jsx)(_.Bg,{style:{width:"".concat(e.percent,"%"),backgroundColor:c}})]}),o&&Object(E.jsx)(S.b,{text:"+",onClick:function(t){return o(e.id,15)},style:{backgroundColor:u}})]})]})},Z=n(113),$=n(13),tt=n(24),et=n(12),nt={};nt.Wrapper=x.c.div(U||(U=Object(O.a)(["\n  padding: 1rem;\n  position:relative;\n  ","\n\n  >*{\n    /* allows canvas clicks behind menu elements */\n    pointer-events: all;\n  }\n"])),Object(I.d)()),nt.StatDisplay=x.c.div(G||(G=Object(O.a)(["\n  text-align:right;\n"]))),nt.StatDisplayLabel=x.c.span(F||(F=Object(O.a)(["\n  color: ",";\n  font-size:2rem;\n"])),Object(I.f)("color","white")),nt.StatDisplayValue=x.c.span(W||(W=Object(O.a)(["\n  color: ",";\n  margin-left:1rem;\n  font-size:3rem;\n"])),Object(I.f)("color","green")),nt.FooterUi=x.c.div(V||(V=Object(O.a)(["\n  position:fixed;\n  bottom:0;\n  right:0;\n  width:100%;\n"]))),nt.EffectsContainer=x.c.div(H||(H=Object(O.a)(["\n  position:absolute;\n  left:0;\n  bottom:0;\n"]))),nt.Name=x.c.div(K||(K=Object(O.a)(["\n  position:absolute;\n  right:2rem;\n  padding: 1rem 2rem;\n  padding-right:4rem;\n  bottom:1rem;\n  border: 4px solid black;\n  \n  border-radius:2rem;\n  background-color:white;\n  color:black;\n  text-align:center;\n"]))),nt.Level=x.c.div(X||(X=Object(O.a)(["\n  border-radius: 2rem;\n  border: 4px solid black;\n  padding: 1rem;\n  position:absolute;\n  right:-1rem;\n  top:-50%;\n  text-align:right;\n\n  font-style: bold;\n\n\n  color: ",";\n  background-color: ",";\n"])),Object(I.f)("color","blue"),Object(I.f)("color","white")),nt.InfoButton=x.c.div(J||(J=Object(O.a)(["\n  position:absolute;\n  right: .5rem;\n  bottom: .5rem;\n  z-index:1;\n"]))),nt.Info=x.c.div(Y||(Y=Object(O.a)(["\n  ","\n  max-height:500px;\n  transition: max-height .5s ease-in-out;\n  overflow: hidden;\n  opacity:1;\n  color: ",";\n\n  padding: 1rem;\n  margin: .5rem;\n  font-weight: bold;\n  width:100%;\n\n  ","\n"])),Object(I.d)(),(function(t){return Object(I.c)("black")}),(function(t){return!t.showInfo&&Object(x.b)(q||(q=Object(O.a)(["\n    width:0;\n    max-height:0;\n    opacity:0;\n    transition: max-height .5s ease-in-out, opacity .2s, width .5s;\n    transition-delay: 0s, 0s, .5s;\n  "])))}));var it,ot,rt,at,ct=function(t){var e=t.statObj;return Object(E.jsxs)(nt.StatDisplay,{children:[Object(E.jsx)(nt.StatDisplayLabel,{children:e.label}),Object(E.jsx)(nt.StatDisplayValue,{children:e.cur})]})},st=function(t){Object(v.a)(n,t);var e=Object(m.a)(n);function n(t){var i;return Object(p.a)(this,n),(i=e.call(this,t)).state={isInfoOpen:!1},i}return Object(j.a)(n,[{key:"onToggleShowInfo",value:function(t){this.setState({isInfoOpen:void 0!==t?t:!this.state.isInfoOpen})}},{key:"updateStat",value:function(t,e){this.props.augmentStat(t,e),this.props.ping()}},{key:"resetPet",value:function(t){console.log("resetters"),this.props.resetPet(t),this.props.ping()}},{key:"getDeadStats",value:function(t){return t.filter((function(t){if(t.doesKill){if(t.fullIsGood&&0===t.cur)return!0;if(!t.fullIsGood&&t.cur===t.max)return!0}return!1}))}},{key:"checkForDead",value:function(t){this.getDeadStats(t).length>0&&this.props.killPet(this.props.activePet.id)}},{key:"render",value:function(){var t=this,e=this.props,n=e.activePet,i=e.behavior,o=e.deltaStats,r=e.forceBehavior,a=e.forcedBehavior,c=e.sceneStyles,s=e.moods,u=e.activities;if(!n)return null;var l=n.data,d=Object.keys(l.behaviors),b=o.find((function(t){return"level"===t.id}))?o.find((function(t){return"level"===t.id})).cur:-1;n.isAlive&&this.checkForDead(o);var f=Object.keys(l.moods).map((function(t){return{id:t,label:l.moods[t].label||t}}));return Object(E.jsxs)(nt.Wrapper,{children:[o.map((function(e,n){return"number"===e.type?Object(E.jsx)(ct,{statObj:e},n):Object(E.jsx)(Q,{sceneStyles:c,statObj:e,moods:s,label:e.label,augmentAction:function(e,n){return t.updateStat(e,n)}},n)})),Object(E.jsxs)(nt.InfoButton,{children:[Object(E.jsx)(S.b,{text:"info",onClick:function(e){return t.onToggleShowInfo()}}),Object(E.jsx)(S.b,{text:"Reset Pet",onClick:function(){return t.resetPet(n.id)},style:{backgroundColor:Object(I.c)("red")}})]}),Object(E.jsxs)(nt.Info,{showInfo:this.state.isInfoOpen,children:[Object(E.jsx)("p",{children:"Activities"}),Object(E.jsx)(S.c,{isActive:u.indexOf("WALKING")>-1,text:"WALKING"}),Object(E.jsx)(S.c,{isActive:u.indexOf("JUMPING")>-1,text:"JUMPING"}),Object(E.jsx)(S.c,{isActive:u.indexOf("DUCKING")>-1,text:"DUCKING"}),Object(E.jsx)(S.c,{isActive:u.indexOf("EATING")>-1,text:"EATING"}),Object(E.jsx)(S.c,{isActive:u.indexOf("ROAMING")>-1,text:"ROAMING"}),Object(E.jsx)("hr",{}),Object(E.jsx)("p",{children:"Moods"}),f.map((function(t,e){return Object(E.jsx)(S.c,{isActive:s.indexOf(t.id)>-1,text:t.label,onClick:function(){}},e)})),Object(E.jsx)("hr",{}),Object(E.jsx)("p",{children:"Behaviors (click to toggle override)"}),d.map((function(t,e){return a===t?Object(E.jsx)(S.b,{isActive:i===t,text:t,onClick:function(){return r(t)},style:{backgroundColor:Object(I.c)("purple")}},e):Object(E.jsx)(S.b,{isActive:i===t,text:t,onClick:function(){return r(t)}},e)})),Object(E.jsx)("hr",{})]}),Object(E.jsxs)(nt.FooterUi,{children:[Object(E.jsx)(nt.EffectsContainer,{children:l.statEvents&&l.statEvents.map((function(e,n){return Object(E.jsx)(Z.a,{statEventObj:e,onImmediateUpdate:function(e,n){return t.updateStat(e,n)}},n)}))}),Object(E.jsxs)(nt.Name,{children:[Object(E.jsx)("span",{children:"".concat(l.name," the ").concat(l.animal)}),Object(E.jsx)(nt.Level,{children:Object(E.jsx)("span",{children:b})})]})]})]})}}]),n}(g.Component),ut=Object(w.b)((function(t){return{activePet:Object(et.h)(t),deltaStats:Object(et.e)(t),sceneStyles:Object(et.q)(t),behavior:Object(et.k)(t),forcedBehavior:Object(et.d)(t),moods:Object(et.g)(t),activities:Object(et.i)(t)}}),(function(t){return Object(k.b)({augmentStat:tt.b,forceBehavior:tt.e,resetPet:tt.h,ping:$.b,killPet:tt.f},t)}))(st),lt={};lt.Main=x.c.div(it||(it=Object(O.a)(["\n  position:absolute;\n  top:0;\n  right:0;\n  bottom:0;\n  left:0;\n  z-index:1;\n"]))),lt.Stage=x.c.section(ot||(ot=Object(O.a)(["\n  position:relative;\n  width: 100%;\n  height: 100%;\n\n  padding: .5rem;\n"]))),lt.CageContainer=x.c.div(rt||(rt=Object(O.a)(["\n  position:absolute;\n  top:0;\n  right:0;\n  bottom:0;\n  left:0;\n  z-index:-1;\n"]))),lt.InfoContainer=x.c.div(at||(at=Object(O.a)(["\n  /* allow canvas clicks under menu elements */\n  pointer-events:none;\n\n  margin:1rem;\n  z-index:1;\n  margin-top:5rem;\n"])));var dt=function(t){Object(v.a)(n,t);var e=Object(m.a)(n);function n(t){var i;return Object(p.a)(this,n),(i=e.call(this,t)).state={isOpen:!1},i}return Object(j.a)(n,[{key:"onToggleMenu",value:function(t){this.setState({isOpen:void 0!==t?t:!this.state.isOpen})}},{key:"render",value:function(){return Object(E.jsx)(lt.Main,{children:Object(E.jsxs)(lt.Stage,{children:[Object(E.jsx)(lt.InfoContainer,{id:"info-container",children:Object(E.jsx)(ut,{})}),Object(E.jsx)(lt.CageContainer,{children:Object(E.jsx)(y.a,{})})]})})}}]),n}(g.Component);e.a=dt},function(t,e,n){"use strict";var i,o,r,a=n(7),c=n(8),s=n(10),u=n(9),l=n(4),d=n(0),b=n(3),f=n(125),h=n(193),p=n(196),j=n(118),v=n.n(j),m=n(195),O=(n(2),n(62)),g=n(1),x={};x.PetCell=b.c.div(i||(i=Object(l.a)(["\n  border: 5px solid white;\n  height:200px;\n\n  >div{\n    display:inline-block;\n    vertical-align:middle;\n    height:100%;\n  }\n"]))),x.PetFrame=b.c.div(o||(o=Object(l.a)(["\n  width: 33%;\n  border:1px solid red;\n"]))),x.Controls=b.c.div(r||(r=Object(l.a)(["\n  width: 66%;\n  height: 100px;\n  border:1px solid yellow;\n"])));var y,k=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(x.PetCell,{children:[Object(g.jsx)(x.PetFrame,{children:Object(g.jsx)(O.a,{})}),Object(g.jsxs)(x.Controls,{children:[Object(g.jsx)(m.a,{variant:"contained",color:"primary",children:"This is a button"}),Object(g.jsx)(m.a,{variant:"contained",color:"primary",children:"This is a button"}),Object(g.jsx)(m.a,{variant:"contained",color:"primary",children:"This is a button"})]})]})}}]),n}(d.Component),w={};w.Editor=b.c.div(y||(y=Object(l.a)(["\n  position:absolute;\n  top:0;\n  right:0;\n  bottom:0;\n  left:0;\n  z-index:1;\n"])));var I=Object(f.a)({palette:{type:"dark",primary:{main:v.a[500]}}}),S=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(g.jsx)(h.a,{theme:I,children:Object(g.jsx)(p.a,{children:Object(g.jsxs)(w.Editor,{children:[Object(g.jsx)(k,{}),Object(g.jsx)(k,{}),Object(g.jsx)(k,{}),Object(g.jsx)(k,{})]})})})}}]),n}(d.Component);e.a=S},function(t,e,n){"use strict";n.r(e),function(t){n(0);var e=n(39),i=n.n(e),o=n(100),r=n(123),a=n(22),c=n(54),s=n(3),u=n(85),l=n(2),d=n(84),b=n(1);t.store=u.a,Object(d.b)(0),t.Logger=d.a,i.a.render(Object(b.jsx)(a.a,{store:u.a,children:Object(b.jsx)(c.a,{children:Object(b.jsx)(s.a,{theme:l.a,children:Object(b.jsx)(o.a,{})})})}),document.getElementById("root")),Object(r.a)()}.call(this,n(17))},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},,function(t,e){}],[[129,1,2]]]);
//# sourceMappingURL=main.f7cdd425.chunk.js.map