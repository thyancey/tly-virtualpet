{"version":3,"sources":["themes/index.js","util/tools.js","store/selectors/index.js","store/actions/index.js","components/ui/button.js","util/pet-store.js","store/actions/pet.js","scenes/cage/phaser/spawn.js","scenes/cage/phaser/item/index.js","scenes/cage/phaser/game.js","scenes/cage/phaser/event-emitter.js","scenes/cage/phaser/scene/index.js","util/item-store.js","scenes/cage/index.js","scenes/cage/phaser/scene/utils.js","util/manifest-helper.js","util/logger.js","store/actions/transition.js","store/reducers/data.js","store/reducers/active-pet.js","store/index.js","store.js","scenes/app/index.js","store/selectors/routes.js","scenes/app/loader.js","scenes/app/pinger.js","scenes/cage/components/scene.js","scenes/cage/phaser/index.js","scenes/cage/phaser/pet/index.js","scenes/cage/phaser/pet/pet-brain.js","scenes/info/components/stat-event-button.js","scenes/menu/components/panel-petselection.js","components/ui/dropmenu.js","scenes/menu/components/settings-slider.js","reportWebVitals.js","scenes/menu/components/assets/unfold_more.svg","scenes/menu/components/assets/unfold_less.svg","scenes/menu/components/panel-base.js","scenes/menu/components/panel-settings.js","scenes/menu/menu-panel.js","scenes/menu/index.js","scenes/info/components/effect-marker.js","scenes/info/components/progress-bar.js","scenes/info/index.js","scenes/app/main.js","scenes/editor/pet-cell.js","scenes/editor/index.js","index.js"],"names":["themeGet","args","props","current","theme","arg","console","error","getColor","colorId","store","color","mixin_clearBubble","css","black","grey","grey_light","white","blue","green","yellow","red","purple","shadow","z1","z2","z3","value","headerHeight","menuWidth","mixins","breakpoints","mobile_tiny","mobile_medium","mobile_large","tablet","desktop","getBreakpoint","shadeColor","colId","percent","R","parseInt","substring","G","B","toString","length","round","number","pad","Math","rounder","pow","clamp","val","min","max","randBetween","range","random","getValOrRandRange","valOrRange","snap","result","Array","isArray","undefined","roundSnap","isObj","obj","convertStringsToNumbersInDeepObj","parsedObj","retObj","key","parsedValue","isNaN","Number","prefixValueInDeepObj","prefixKey","prefixValue","setObjToCookie","cookieName","cookieValue","JSON","stringify","e","setCookie","getCookieObj","cookieString","getCookie","parse","cname","cvalue","expires","d","Date","setTime","getTime","toUTCString","document","cookie","name","ca","decodeURIComponent","split","i","c","charAt","indexOf","deleteCookie","getSearchObj","searchString","queryString","VALID_CONDITIONS","getConditionDirection","condition","parseExpressionString","expressionString","valueTokens","percentageSplit","criteria","isPercent","direction","evaluateCondition","statValue","checkValue","expression","cur","evaluateExpression","getSettings","state","data","settings","getActivePetType","activePetType","getCounter","counter","getActivePetId","activePet","id","getForcedBehavior","forcedBehavior","getActivePet","selectSettingPingRate","createSelector","pingRate","selectSettingVolume","volume","selectSettingAnimationSpeed","animationSpeed","selectNextManifestItem","nextManifestItem","selectNextExternalItem","nextExternalItem","selectIsLoadingComplete","loadingComplete","selectActivePets","getPets","allPets","filter","o","type","selectActivePetId","activePetId","selectActivePetData","found","find","p","selectActivePet","activePetData","selectActivePetGraphics","sprites","animations","selectActivePetStatus","selectActivePetIsAlive","isAlive","selectActiveItems","items","Object","keys","map","itemId","selectActiveScene","sceneId","scene","getSceneDefinition","selectActivePetActivities","activeScene","cage","floor","activities","selectActiveDeltaStats","ping","statRules","getStatRules","getDeltaStatsArray","selectActiveSceneStyles","styles","selectActiveMoods","deltaStats","activeMoods","forEach","stat","effects","getActiveMoods","dsam","push","evaluateModifier","whenObj","statObj","when","then","whenMoods","matchedMoods","getFullStatEffectObj","moods","effect","mood","getPetDeltaStats","idx","statPercent","label","fullIsGood","doesKill","fillType","evaluateWhen","moodSwingData","currentMoods","moodsMatched","evaluateMoods","activity","stats","s","isDead","status","warn","selectActivePetDefinition","getPetDefinition","selectActivePetPersonality","petDef","personality","selectActivePetBehavior","petStatus","moodSwings","behavior","m","whenResult","w","checkMoodSwingForBehavior","selectActivePetAnimationLabel","statusObj","behaviors","DEFAULT","animIdx","animationLabel","selectPhaserPet","graphics","log","selectPetTaxonomy","getTaxonomy","taxonomy","setManifest","createAction","storeManifestItem","loadExternalItem","setSettingsValue","setActivePetType","setActivePetId","setItems","S","NotAButton","styled","div","isActive","Button","button","isDisabled","BigButton","LilButton","Tooltip","text","className","onClick","style","tooltip","disabled","title","DEFAULT_PERSONALITY","pets","petId","setFromPetManifest","petData","manifest","savedData","getSavedData","savedPet","parsePetData","setPetDefinition","foundTypeIndex","findIndex","t","foundType","addToTaxonomy","defaultBehavior","parseMoodSwings","statEvents","sE","cooldown","statEffects","sEff","parseStatEvents","definedStats","initialStats","mergeStats","stats_saved","timestamp","formatSavedStatObj","dir","url","saveAfter","petIdx","saveAllPetStatsToCookie","schemaVersion","origArray","newArray","overwrite","retArray","slice","newStat","matchingStatIdx","oStat","fancyUpSavedStats","savedStats","mergedStats","iS","savedStat","sS","mS","perSecond","getDeltaStats","statsObj","oldStats","timeDiff","killThisPet","augmentPetStat","statId","augmentValue","now","newValue","saveStats","saveAllPetStatsToCookieNow","resetPetState","deleteAllData","global","location","reload","petStore","getAllData","getPetStoreData","itemType","addActivity","removeActivity","setActivities","forceBehavior","resetPet","killPet","clickPet","augmentStat","augmentStats","sceneContext","LAZY_STATS","exports","Entity","physicsGroup","spawnData","x","y","entityInfo","firstSheetKey","setBehaviors","spriteScale","scale","frameDims","frameSqueeze","h","add","existing","physics","setBounce","setCollideWorldBounds","allowGravity","body","setSize","offset","setDrag","playAnimation","behaviorsData","this","curBehaviorId","flipX","velocity","immediate","animKey","getBehaviorAnimation","curAnimation","anims","play","setScale","setOrigin","Phaser","Physics","Arcade","Sprite","groups","gPetInfo","gItemInfo","preloadCompleted","loadItemImagesAfterPreload","itemIds","allSpriteDefs","registeredSprites","spriteDefKey","load","atlas","image","once","onItemImagesReloadComplete","start","createSpritesFromData","getItemInfo","loadPetImagesAfterPreload","spriteDefs","getPetInfo","onPetImagesReloadComplete","registerSprites","path","spriteKey","defaults","animation","frameObj","createSprites","animationDefs","animationKey","given","spriteId","sprite","animationDef","create","frameRate","frames","generateFrameNames","repeat","preloadSprites","petKey","preloadSpritesFromData","itemKey","throttledUpdate","throttle","children","iterate","entity","despawnEverything","child","destroy","spawnItem","EntityRef","position","itemInfo","spawnIt","petInfo","canSendUpdates","setContext","context","preload","group","update","updatePetAnimationLabel","updatePetActivities","updateActivities","updatePetMortality","updateMortality","alterPetInfo","phaserPetDef","alterItemsInfo","spawnPet","Pet","spawnItemId","coords","Item","gameLoaded","createGame","jsonData","config","AUTO","parent","mode","Scale","RESIZE","autoCenter","CENTER_BOTH","width","height","autoRound","default","arcade","gravity","debug","game","Game","updateBounds","world","setBounds","cameras","main","SceneController","SpawnController","alterItems","itemDefs","alterPet","updateScene","sceneInfo","setSceneInfo","sc","onInterface","event","onSendStatus","spawnController","sceneGroups","spawnGroups","collider","floors","collider_thingsAndFloors","platforms","collider_thingsAndPlatforms","collider_itemsAndPets","Events","on","item","pet","itemEffects","getItemEffects","applyItemEffects","itemOrPet","stopGame","stop","startGame","window","innerWidth","eventEmitter","EventEmitter","physGroup_floors","physGroup_platforms","gScenesInfo","gSceneId","gBgImage","gGameBounds","group_floors","group_platforms","gPreloadCompleted","getTextureId","getSceneInfo","background","imageUrl","textures","spriteName","onSpritesLoadComplete","removeTheOldStuff","makeTheStuff","resize","pP","pG","texture","gP","makePlatform","getSpriteDef","makePlatforms","tileSprite","setDepth","stretchBgToBounds","positionPlatforms","positionFloor","textureId","platformDefs","platformDef","textureDef","makePlatformGroup","count","plattys","setAlpha","refreshBody","addTexturedTileSprite","setTileScale","levelData","staticGroup","scenes","setFromSceneManifest","complete","addSceneDefinition","newDefinition","setFromItemManifest","addItemDefinition","itemStore","getItems","getScenes","Cage","containerRef","React","createRef","onResize","bind","containerWidth","containerHeight","prevProps","addEventListener","updateRedundantDims","setState","innerHeight","offsetWidth","offsetHeight","ref","Component","connect","dispatch","bindActionCreators","globalBg","gameBounds","bg","size","displayWidth","displayHeight","diff","floorY","setPlatformToPosition","pGroup","pParams","positionPlatformGroup_rando","positionPlatformGroup_stairs","platform","pos","setPosition","reset","xOffset","pObj","stepX","stepY","tex","pW","pH","values","snapValues","gameWidth","xBuffer","left","right","stages","stageIdx","returnNextStageItem","manifestStages","nextItemIdx","manifestStageIdx","nextItem","itemIdx","getNextManifestData","curItemIdx","nextItemObj","setManifestStages","manifestHelper","entries","level","logIdx","throttleActive","init","logLevel","throttleSpeed","setThrottleSpeed","onThrottledLog","throttledLog","doOutput","logArgs","output","PublicInterface","pause","logSave","logQuiet","outputAll","outputNext","outputPrevious","outputLast","setTransitionAction","setTransition","transitionData","payload","VALID_KEYS","initialState","customData","handleActions","action","cleanManifestObj","parsedData","isExternal","transitionLabel","settingsKey","storedValue","petObj","a","sort","join","newBehavior","combineReducers","middleware","thunk","composedEnhancers","compose","applyMiddleware","createStore","rootReducer","App","section","AppContainer","onExitPage","prevState","onLoadComplete","loadDeeplinkedPet","force","petQuery","selectPetFromSearchQuery","search","queryPieces","exact","to","component","Main","Editor","withRouter","LoadHelper","loadAllData","loadManifestItem","setTimeout","loadManifestData","manifestItemObj","fetch","res","jsonc","err","json","stack","require","Pinger","statPinger","pingIdx","startStatPinger","killStatPinger","onPing","clearInterval","Scene","SceneFloor","SceneBackground","bgImage","backgroundImage","backgroundColor","alert","PhaserContainer","PhaserComponent","debouncedUpdateBounds","debounce","activeItems","phaserPet","activePetIsAlive","activePetActivities","activePetGraphics","petBrain","PetBrain","onBrainDoComplete","onBrainThinkComplete","setPersonality","setActive","checkRoamingStuff","think","onFloor","abs","isRoaming","sendActivities","stopRoaming","startRoaming","forced","onWall","flipAndMove","hasActivity","jumpChance","jump","keepRoaming","mod","move","setVelocityY","modifier","emit","updatePetInfo","STATUS","onDoComplete","onThinkComplete","timer","killTimer","callback","timerDuration","onTimerComplete","clearTimeout","statusType","getPersonality","thinkRange","doRange","inputs","startDoing","startTimer","getDuration","startThinking","Wrapper","CooldownBar","StatEventButton","cooldownTimer","isCooling","coolAt","startCooldownTimer","killCooldownTimer","coolDownComplete","statEventObj","startCooldown","triggerStatEffects","onImmediateUpdate","retString","percDone","cooldownWidth","getCooldownWidth","onButtonClick","renderTooltip","Body","PetSelection","history","onSelectPet","prompt","activeObjects","showLoadPrompt","onItemClick","activeId","aO","subText","animal","MenuLabel","DropMenu","DropItem","DropItemImgContainer","DropItemLabel","DropItems","isOpen","thumbnail","onItemClicked","src","fallbackImage","initialImage","alt","Label","RangeInput","input","isInverted","SettingsSlider","throttleTimer","time","killThrottleTimer","startThrottleTimer","step","onChange","onChangeSlider","target","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","Base","Header","PanelBase","onPanelClick","ICON_EXPAND","ICON_COLLAPSE","li","PanelSettings","settingsData","Menu","MainPanel","PanelContainer","ResetButton","MenuButton","PanelBg","MenuPanel","onToggleMenu","MenuContainer","MenuController","f","EffectMarker","Stick","Bubble","BubbleTip","isShowing","tooltipShowing","statLabel","retMessages","colorObj","effectMarker","percentVal","expressionObj","parseEffect","plus","minus","onMouseEnter","onEnterBubble","onMouseLeave","onLeaveBubble","renderMessage","ProgressBar","Bar","Value","span","BarGroup","Bg","EffectMarkers","augmentAction","sceneStyles","barColor","alertType","barStyles","getBarColor","getAlertType","bars","bgColor_minus","bgColor_plus","isOdd","StatDisplay","StatDisplayLabel","StatDisplayValue","FooterUi","EffectsContainer","Name","Level","InfoButton","Info","showInfo","PetStats","isInfoOpen","ds","getDeadStats","behaviorIds","checkForDead","allMoods","mKey","updateStat","onToggleShowInfo","aId","Stage","CageContainer","InfoContainer","PetCell","PetFrame","Controls","variant","createMuiTheme","palette","primary","ThemeProvider","ScopedCssBaseline","initLogger","Logger","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f7cdd425.chunk.js","sourcesContent":["import { css } from 'styled-components';\n\nexport const themeGet = (...args) => props => {\n  let current = props.theme;\n  for (const arg of args) {\n    if (!current[arg]) {\n      console.error('[Theming] Could not find', arg, 'in', current); // eslint-disable-line no-console\n      return '';\n    }\n    current = current[arg];\n  }\n  return current;\n};\n\nexport const getColors = (colorId) => {\n  return Object.keys(store.color);\n}\n\nexport const getColor = (colorId) => {\n  return store.color[colorId];\n}\n\nexport const mixin_clearBubble = () => {\n  return css`\n    border: .2rem solid rgba(255, 255, 255, 0.2);\n    border-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.2) rgba(255, 255, 255, 0.2);\n    border-radius: 1rem;\n    box-shadow: .1rem .1rem .5rem black;\n  `;\n}\n\nexport const mixin_textStroke = (thickness, spread, color) => {\n  return css`\n    text-shadow:  -${thickness} -${thickness} ${spread} ${color},\n                  ${thickness} -${thickness} ${spread} ${color},\n                  -${thickness} ${thickness} ${spread} ${color},\n                  ${thickness} ${thickness} ${spread} ${color},\n                  -${thickness} -${thickness} ${spread} ${color},\n                  ${thickness} -${thickness} ${spread} ${color},\n                  -${thickness} ${thickness} ${spread} ${color},\n                  ${thickness} ${thickness} ${spread} ${color},\n                  -${thickness} -${thickness} ${spread} ${color},\n                  ${thickness} -${thickness} ${spread} ${color},\n                  -${thickness} ${thickness} ${spread} ${color},\n                  ${thickness} ${thickness} ${spread} ${color},\n                  -${thickness} -${thickness} ${spread} ${color},\n                  ${thickness} -${thickness} ${spread} ${color},\n                  -${thickness} ${thickness} ${spread} ${color},\n                  ${thickness} ${thickness} ${spread} ${color};\n  `;\n}\n\n\nconst store = {\n  color:{\n    black: '#000000',\n    grey: '#373737',\n    grey_light: '#A39F8E',\n    white: '#fef8dd',\n    blue: '#1fb9f3',\n    green: '#51f249',\n    yellow: '#fff249',\n    red: '#F55658',\n    purple: '#6b1ff3'\n  },\n  shadow:{\n    z1: '-0.1rem 0.1rem .25rem .1rem rgba(0,0,0,0.16)',\n    z2: '-0.1rem 0.1rem .25rem .1rem rgba(0,0,0,0.36)',\n    z3: '-.2rem .5rem 1rem .2rem rgba(0,0,0,.36)'\n  },\n  value:{\n    headerHeight: '7.5rem',\n    menuWidth: '12rem'\n  },\n  mixins:{},\n  breakpoints:{\n    mobile_tiny: '300px',\n    mobile_medium: '400px',\n    mobile_large: '500px',\n    tablet: '768px',\n    desktop: '1024px'\n  }\n}\n\n/* https://jsramblings.com/how-to-use-media-queries-with-styled-components/ */\nconst breakpoints = {\n  mobile_tiny: '300px',\n  mobile_medium: '400px',\n  mobile_large: '500px',\n  tablet: '768px',\n  desktop: '1024px'\n}\n\nexport const getBreakpoint = {\n  mobile_tiny: `(min-width: ${breakpoints.mobile_tiny})`,\n  mobile_medium: `(min-width: ${breakpoints.mobile_medium})`,\n  mobile_large: `(min-width: ${breakpoints.mobile_large})`,\n  tablet: `(min-width: ${breakpoints.tablet})`,\n  desktop: `(min-width: ${breakpoints.desktop})`\n};\n\n\n/* from pablo on https://stackoverflow.com/questions/5560248/programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors */\nexport const shadeColor = (colId, percent) => {\n  var color = store.color[colId] || colId;\n\n  var R = parseInt(color.substring(1,3),16);\n  var G = parseInt(color.substring(3,5),16);\n  var B = parseInt(color.substring(5,7),16);\n\n  R = parseInt(R * (100 + percent) / 100);\n  G = parseInt(G * (100 + percent) / 100);\n  B = parseInt(B * (100 + percent) / 100);\n\n  R = (R<255)?R:255;  \n  G = (G<255)?G:255;  \n  B = (B<255)?B:255;  \n\n  var RR = ((R.toString(16).length===1)?\"0\"+R.toString(16):R.toString(16));\n  var GG = ((G.toString(16).length===1)?\"0\"+G.toString(16):G.toString(16));\n  var BB = ((B.toString(16).length===1)?\"0\"+B.toString(16):B.toString(16));\n\n  return \"#\"+RR+GG+BB;\n}\nexport default store;","\nimport queryString from 'query-string';\n\nexport const round = (number, pad) => {\n  if(!pad) return Math.round(number);\n  \n  const rounder = Math.pow(10, pad);\n  return Math.round(number * rounder) / rounder;\n}\n\nexport const clamp = (val, min, max) => {\n  return Math.min(Math.max(val, min), max);\n}\n\nexport const randBetween = (range) => {\n  return range[0] + (Math.random() * (range[1] - range[0]));\n}\n\nexport const getValOrRandRange = (valOrRange, snap) => {\n  let result;\n  if(!Array.isArray(valOrRange)){\n    result = valOrRange;\n  }else{\n    result = valOrRange[0] + (Math.random() * (valOrRange[1] - valOrRange[0]));\n  }\n  \n  if(snap !== undefined){\n    return roundSnap(result, snap);\n  }else{\n    return result;\n  }\n}\n\nexport const roundSnap = (value, snap) => snap * Math.round(value / snap);\n\nexport const isObj = obj => {\n  return typeof obj === 'object' && obj !== null && !Array.isArray(obj);\n}\n\nexport const convertStringsToNumbersInDeepObj = parsedObj => {\n  let retObj = {};\n  for(let key in parsedObj){\n    const parsedValue = parsedObj[key];\n    if(isObj(parsedValue)){\n      retObj[key] = convertStringsToNumbersInDeepObj(parsedValue);\n    }else{\n      if(!isNaN(parsedValue)){\n        retObj[key] = Number(parsedValue);\n      }else{\n        retObj[key] = parsedValue;\n      }\n    }\n  }\n  \n  return retObj;\n}\n\n/*\n  given: \n  ('pickle', 'longer-prefix/', {\n    items: {\n      item2:{\n        pickle: \"short.jpg\"\n      }\n      pickle: 4\n    }\n  })\n\n  returns: \n  {\n    items: {\n      item2:{\n        pickle: \"longer-prefix/short.jpg\"\n      },\n      pickle: \"longer-prefix/4\"\n    }\n  }\n*/\n\nexport const prefixValueInDeepObj = (prefixKey, prefixValue, parsedObj) => {\n  let retObj = {};\n  for(let key in parsedObj){\n    const parsedValue = parsedObj[key];\n    if(isObj(parsedValue)){\n      retObj[key] = prefixValueInDeepObj(prefixKey, prefixValue, parsedValue);\n    }else{\n      if(key === prefixKey){\n        retObj[key] = `${prefixValue}${parsedValue}`;\n      }else{\n        retObj[key] = parsedValue;\n      }\n    }\n  }\n  \n  return retObj;\n}\n\nexport const setObjToCookie = (cookieName, obj) => {\n  let cookieValue = '';\n  try{\n    if(obj){\n      cookieValue = JSON.stringify(obj);\n    }\n  }catch(e){\n    console.error('Problem stringifying obj', obj);\n  }\n  setCookie(cookieName, cookieValue);\n}\n\nexport const getCookieObj = cookieName => {\n  const cookieString = getCookie(cookieName);\n  if(cookieString){\n    try{\n      return JSON.parse(cookieString);\n    }catch(e){\n      console.error('Problem parsing cookieString', cookieString);\n      return null;\n    }\n  }else{\n    return null;\n  }\n}\n\nexport const setCookie = (cname, cvalue, expires) => {\n  // console.log('setCookie');\n  var d = new Date();\n  d.setTime(d.getTime() + (expires || 3000000000000));\n  expires = 'expires='+ d.toUTCString();\n  document.cookie = cname + '=' + cvalue + ';' + expires + ';path=/';\n}\n\nexport const getCookie = (cname) => {\n  // console.log('getCookie');\n  var name = cname + '=';\n  var decodedCookie = decodeURIComponent(document.cookie);\n  var ca = decodedCookie.split(';');\n  for(var i = 0; i <ca.length; i++) {\n    var c = ca[i];\n    while (c.charAt(0) === ' ') {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) === 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return '';\n}\n\nexport const deleteCookie = cname => {\n  setCookie(cname, '', 1);\n}\n\nexport const getSearchObj = (searchString) => {\n  return queryString.parse(searchString);\n}\n\nexport const updateAndGetNewQueryString = (key, value, search) => {\n  const queryObj = queryString.parse(search);\n  queryObj[key] = value;\n  return `?${queryString.stringify(queryObj)}`;\n}\n\n\n//- https://stackoverflow.com/questions/10970078/modifying-a-query-string-without-reloading-the-page\nexport const changeQueryObj = (key, value, searchString) => {\n  if (window.history.pushState) {\n    const newQueryString = updateAndGetNewQueryString(key, value, searchString);\n    const newurl = window.location.protocol + \"//\" + window.location.host + window.location.pathname + newQueryString;\n    window.history.pushState({path:newurl},'',newurl);\n  }\n}\n\n\n\n\n\nexport const VALID_CONDITIONS = [ '=', '<', '<=', '>', '>=' ];\n\nexport const evaluateExpression = (condition, criteria, value) => {\n  if(VALID_CONDITIONS.indexOf(condition) === -1){\n    console.error(`evaluateExpression(): invalid condition \"${condition}\" from valueString \"${value}\"`);\n    return false;\n  }\n\n  // console.log('evaluateExpression()', condition, value, criteria);\n\n  switch(condition){\n    case '=':\n      return value === criteria;\n    case '<':\n      return value < criteria;\n    case '<=':\n      return value <= criteria;\n    case '>':\n      return value > criteria;\n    case '>=':\n      return value >= criteria;\n    default: return false;\n  }\n}\n\nexport const getConditionDirection = condition => {\n  switch(condition){\n    case '=':\n      return 0;\n    case '<':\n      return -1;\n    case '<=':\n      return -1;\n    case '>':\n      return 1;\n    case '>=':\n      return 1;\n    default: return 0;\n  }\n}\n\n/*\n  //- convert <=_20% into:\n  {\n    condition: '<=',\n    criteria: '20',\n    isPercent: true\n  }\n*/\nexport const parseExpressionString = expressionString => {\n  const valueTokens = expressionString.split('_');\n  const condition = valueTokens[0];\n  const valueCriteria = valueTokens[1];\n\n  const percentageSplit = valueCriteria.split('%');\n  let criteria = percentageSplit[0];\n\n\n  return {\n    condition: condition,\n    criteria: Number(criteria),\n    isPercent: percentageSplit.length > 1,\n    direction: getConditionDirection(condition)\n  }\n}\n\nexport const evaluateCondition = (expressionString, statValue) => {\n  const expression = parseExpressionString(expressionString);\n\n  let checkValue;\n  if(expression.isPercent){\n    checkValue = statValue.percent;\n  }else{\n    checkValue = statValue.cur;\n  }\n\n  if(!expression.condition){\n    console.error('evaluateSet(), condition is not defined! ', expressionString);\n  }\n  const expressionResult = evaluateExpression(expression.condition, expression.criteria, checkValue);\n  // console.log('foundExpression:', expressionString, expressionResult);\n  return expressionResult;\n}","\nimport { createSelector } from 'reselect';\nimport { getPets, getPetDeltaStats, getStatRules, getTaxonomy  } from '@util/pet-store';\nimport { getSceneDefinition } from '../../util/item-store';\nimport { getPetDefinition } from '../../util/pet-store';\nimport { evaluateCondition } from '../../util/tools';\n\nexport const getNextManifestItem = state => state.data.nextManifestItem || null;\nexport const getNextExternalItem = state => state.data.nextExternalItem || null;\nexport const getExtrasLoaded = state => state.data.extrasLoaded || 0;\nexport const getDataLoadComplete= state => state.data.loadingComplete || 0;\n\nexport const getSettings = state => state.data.settings;\n\nexport const getActivePetType = state => state.data.activePetType || null;\nexport const getCounter = state => state.data.counter;\nexport const getActivePetId = state => state.activePet.id || null;\nexport const getForcedBehavior = state => state.activePet.forcedBehavior || null;\nexport const getActivePetStats = state => state.activePet.stats || null;\nexport const getActivePet = state => state.activePet || null;\nexport const getPing = state => state.data.ping || 0;\nexport const getItems = state => state.data.items || [];\n\nexport const selectSettingPingRate = createSelector(\n  [getSettings],\n  (settings) => {\n    if(!settings) return -1;\n    return settings.pingRate;\n  }\n);\n\nexport const selectSettingVolume = createSelector(\n  [getSettings],\n  (settings) => {\n    if(!settings) return -1;\n    return settings.volume;\n  }\n);\n\nexport const selectSettingAnimationSpeed = createSelector(\n  [getSettings],\n  (settings) => {\n    if(!settings) return -1;\n    return settings.animationSpeed;\n  }\n);\n\nexport const selectNextManifestItem = createSelector(\n  [getNextManifestItem],\n  (nextManifestItem = null) => {\n    return nextManifestItem;\n  }\n);\n\nexport const selectNextExternalItem = createSelector(\n  [getNextExternalItem],\n  (nextExternalItem = null) => {\n    return nextExternalItem;\n  }\n);\n\nexport const selectIsLoadingComplete = createSelector(\n  [getDataLoadComplete],\n  (loadingComplete = false) => {\n    return loadingComplete || false;\n  }\n);\n\nexport const selectActivePets = createSelector(\n  [getActivePetType, getPets],\n  (activePetType, allPets) => {\n    if(!activePetType || !allPets) return [];\n\n    return allPets.filter(o => o.type === activePetType);\n  }\n);\n\n\nexport const selectActivePetId = createSelector(\n  [getActivePetId],\n  (activePetId = null) => {\n    return activePetId;\n  }\n);\n\nexport const selectActivePetData = createSelector(\n  [getActivePetId, getPets],\n  (activePetId, allPets) => {\n    if(!activePetId || !allPets) return null;\n\n    const found = allPets.find(p => p.id === activePetId);\n    if(found){\n      return found;\n    }else{\n      return null;\n    }\n  }\n);\n\nexport const selectActivePet = createSelector(\n  [selectActivePetData, getActivePet],\n  (activePetData, activePet) => {\n    if(!activePetData) return null;\n\n    return {\n      ...activePet,\n      data: activePetData\n    }\n  }\n);\n\n\nexport const selectActivePetGraphics = createSelector(\n  [selectActivePetData],\n  (activePetData) => {\n    if(!activePetData) return null;\n\n    return {\n      sprites: activePetData.sprites,\n      animations: activePetData.animations\n    }\n  }\n);\n\n\nexport const selectActivePetStatus = createSelector(\n  [getActivePet],\n  (activePet) => {\n    if(!activePet) return null;\n\n    return activePet;\n  }\n);\n\nexport const selectActivePetIsAlive = createSelector(\n  [getActivePet],\n  (activePet) => {\n    return activePet.isAlive || false;\n  }\n);\n\nexport const selectActiveItems = createSelector(\n  [getItems],\n  (items) => {\n    return Object.keys(items).map(itemId => items[itemId]);\n  }\n);\n\nexport const selectActiveScene = createSelector(\n  [selectActivePetData],\n  (activePetData) => {\n    if(!activePetData) return null;\n    const sceneId = activePetData.scene;\n    const scene = getSceneDefinition(sceneId);\n    if(scene){\n      return scene;\n    }else{\n      console.error(`could not select scene ${sceneId}`);\n      return null;\n    }\n  }\n);\n\nexport const selectActiveSceneType = createSelector(\n  [selectActivePetData],\n  (activePetData) => {\n    if(!activePetData) return null;\n\n    const sceneId = activePetData.scene;\n    const scene = getSceneDefinition(sceneId);\n    if(scene && scene.type){\n      return scene.type;\n    }else{\n      return null;\n    }\n  }\n);\n\nexport const selectActiveSceneFloorOffset = createSelector(\n  [selectActiveScene],\n  (activeScene) => {\n    if(!activeScene) return null;\n\n    return activeScene.cage.floor || 0;\n  }\n);\n\nexport const selectActivePetActivities = createSelector(\n  [selectActivePetStatus],\n  (activePet) => {\n    if(!activePet) return null;\n    \n    return activePet.activities;\n  }\n);\n\nexport const selectActiveDeltaStats = createSelector(\n  [selectActivePet, getPing],\n  (activePet, ping) => {\n    if(!activePet) return null;\n\n    const statRules = getStatRules(activePet.id);\n\n    const ds = getDeltaStatsArray(activePet, statRules);\n    return ds;\n  }\n);\n\nexport const selectActiveSceneStyles = createSelector(\n  [selectActiveScene],\n  (activeScene) => {\n    // console.log('selectActiveSceneStyle', activeScene);\n    if(!activeScene) {\n      return null;\n    }\n    return activeScene.styles;\n  }\n);\n\nexport const selectActiveMoods = createSelector(\n  [selectActiveDeltaStats],\n  (deltaStats) => {\n    if(!deltaStats) return [];\n\n    let activeMoods = [];\n    deltaStats.forEach(stat => {\n      if(!stat.effects || stat.effects.length === 0) return;\n      const deltaStatActiveMoods = getActiveMoods(stat.effects, stat);\n      deltaStatActiveMoods.forEach(dsam => {\n        if(activeMoods.indexOf(dsam) === -1) activeMoods.push(dsam);\n      })\n    });\n  \n    return activeMoods;\n  }\n);\n\nconst evaluateModifier = (whenObj, statObj) => {\n  if(evaluateCondition(whenObj.when, statObj)){\n    return whenObj.then;\n  }else{\n    return null;\n  }\n};\n\nconst getActiveMoods = (whenMoods, statObj) => {\n\n  let matchedMoods = [];\n  for(let i = 0; i < whenMoods.length; i++){\n    const result = evaluateModifier(whenMoods[i], statObj)\n    if(result && matchedMoods.indexOf(result) === -1) matchedMoods.push(result);\n  }\n\n  return matchedMoods;\n};\n\nconst getFullStatEffectObj = (moods, stat) => {\n  // console.log(stat, moods);\n  const effects = stat.effects || [];\n  return effects.map(effect => ({\n    when: effect.when,\n    then: effect.then,\n    mood: {\n      id: effect.then,\n      ...moods[effect.then]\n    }\n  }));\n};\n\nconst getDeltaStatsArray = (activePet, statRules) => {\n  if(!activePet || !activePet.id) return [];\n\n  const deltaStats = getPetDeltaStats(activePet.id, new Date().getTime());\n\n  return deltaStats.map((stat, idx) => {\n    const statPercent = (stat.current / stat.max) * 100;\n\n    // console.log('ac', activePet)\n    \n    return {\n      id: stat.id,\n      type: stat.type,\n      label: stat.label || stat.id,\n      cur: stat.current,\n      max: stat.max,\n      percent: statPercent,\n      fullIsGood: statRules[idx].fullIsGood,\n      doesKill: statRules[idx].doesKill,\n      fillType: 'fill',\n      effects: getFullStatEffectObj(activePet.data.moods, stat)\n    }\n  });\n} \n\nexport const evaluateMoods = (whenMoods, currentMoods) => {\n  let moodsMatched = [];\n\n  for(let i = 0; i < whenMoods.length; i++){\n    if(currentMoods.indexOf(whenMoods[i]) === -1){\n      break;\n    }else{\n      moodsMatched.push(whenMoods[i]);\n    }\n  }\n\n  return moodsMatched.length === whenMoods.length;\n}\n\nexport const evaluateWhen = (when, moodSwingData) => {\n  // console.log('evaluateWhen()', when, moodSwingData);\n\n  switch(when.type){\n    case 'moods': {\n      if(evaluateMoods(when.moods, moodSwingData.activeMoods)){\n        return when;\n      }else{\n        return null;\n      }\n    }\n    case 'activity': {\n      if(moodSwingData.activities.indexOf(when.activity) > -1){\n        return when;\n      }else{\n        return null;\n      }\n    }\n    case 'stat': {\n      const statValue = moodSwingData.stats.find(s => s.id === when.stat);\n      if(statValue === null){\n        console.error(`evaluateWhen(): stat \"${when.stat}\" does not exist for pet`);\n        return null;\n      }\n\n      const statResult = evaluateCondition(when.value, statValue);\n      if(statResult){\n        return when;\n      }else{\n        // console.log(`....evaluateWhen(): stat \"${when.stat}\" evaluated false for pet`);\n        return null;\n      }\n    }\n    case 'status': {\n      if(when.isDead === true){\n        return moodSwingData.status.isDead === true ? when : null;\n      }else if(when.isDead === false){\n        return moodSwingData.status.isDead === false ? when : null;\n      }else{\n        console.warn(`evaluateWhen(): status is missing \"isDead\" attribute`);\n        return null;\n      }\n    }\n    default: {\n      console.error(`unknown when type \"${when.type}\"`);\n      return null;\n    }\n  }\n};\n\nexport const checkMoodSwingForBehavior = (moodSwings, moodSwingData) => {\n  let behavior = null;\n  // console.log('checkMoodSwingForBehavior', moodSwingData);\n  //- check each swing\n  for(let i = 0; i < moodSwings.length; i++){\n    const m = moodSwings[i];\n\n    let whenResult = null;\n    if(!m.when || m.when.length === 0){\n      whenResult = true;\n    }else{\n      for(let w = 0; w < m.when.length; w++){\n  \n        //- if any when is false, skip this swing\n        whenResult = evaluateWhen(m.when[w], moodSwingData);\n  \n        if(!whenResult){\n          break;\n        }\n      }\n    }\n\n    if(whenResult){\n      behavior = m.then;\n      break;\n    }else{\n      behavior = 'DEFAULT'\n    }\n  };\n  \n  return behavior || 'ERROR';\n};\n\nexport const selectActivePetDefinition = createSelector(\n  [selectActivePet],\n  (activePet) => {\n    return getPetDefinition(activePet?.id);\n  }\n);\n\nexport const selectActivePetPersonality = createSelector(\n  [selectActivePetDefinition],\n  (petDef) => {\n    return petDef?.personality\n  }\n);\n\nexport const selectActivePetBehavior = createSelector(\n  [selectActivePetStatus, selectActiveDeltaStats, selectActivePetActivities, selectActiveMoods, getForcedBehavior],\n  (petStatus, deltaStats, activities, activeMoods, forcedBehavior) => {\n    // console.log('selectActivePetBehavior');\n    if(!petStatus || !petStatus.id){\n      return 'PET NOT FOUND';\n    }\n    const petDef = getPetDefinition(petStatus.id);\n    if(!petDef){\n      return 'PET DEFINTION NOT FOUND';\n    }\n\n    if(forcedBehavior){\n      return forcedBehavior;\n    }else{\n      const status = {\n        isDead: !petStatus.isAlive\n      }\n  \n      const newBehavior = checkMoodSwingForBehavior(petDef.moodSwings, {\n        status: status,\n        stats: deltaStats,\n        activities: activities,\n        activeMoods: activeMoods\n      });\n  \n      // console.warn('newBehavior is ', newBehavior);\n      return newBehavior;\n    }\n  }\n);\n\nexport const selectActivePetAnimationLabel = createSelector(\n  [selectActivePet, selectActivePetBehavior],\n  (activePet, behavior) => {\n    if(!activePet) return null;\n\n    /* example statusObj\n      \"JUMP_LITTLE\": { \"animations\": [ \"Jump_Little\" ] },\n    */\n    const statusObj = activePet.data.behaviors[behavior] || activePet.data.behaviors.DEFAULT;\n\n    if(!statusObj){\n      console.error(`Error getting behavior ${behavior}`);\n      return null;\n    }\n\n    /* behaviors allow for a random set of animations.. if that was ever wanted */\n    const animIdx = Math.floor(Math.random() * statusObj.animations.length);\n    const animationLabel = statusObj.animations[animIdx];\n\n    if(!animationLabel){\n      console.error(`Error getting animationLabel for Pet \"${activePet.id}\" and Behavior \"${behavior}\"`);\n    }\n\n    return animationLabel;\n  }\n);\n\n// id\n// sprites\n// animation\n// personality\nexport const selectPhaserPet = createSelector(\n  [selectActivePetId, selectActivePetGraphics, selectActivePetPersonality],\n  (id, graphics, personality) => {\n    console.log('selectPhaserPet');\n\n    return {\n      id: id,\n      sprites: graphics.sprites,\n      animations: graphics.animations,\n      personality: personality\n    }\n  }\n);\n\nexport const selectPetTaxonomy = createSelector(\n  [getTaxonomy],\n  (taxonomy = []) => {\n    return taxonomy\n  }\n);","import { createAction } from 'redux-actions';\n\nexport const setManifest = createAction('SET_MANIFEST');\nexport const storeManifestItem = createAction('STORE_MANIFEST_ITEM');\nexport const loadExternalItem = createAction('LOAD_EXTERNAL_ITEM');\nexport const setSettingsValue = createAction('SET_SETTINGS_VALUE');\nexport const setOtherData = createAction('SET_OTHER_DATA');\nexport const setActivePetType = createAction('SET_ACTIVE_PET_TYPE');\nexport const setActivePetId = createAction('SET_ACTIVE_PET_ID');\nexport const setItems = createAction('SET_ITEMS');\nexport const ping = createAction('PING');","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { themeGet, shadeColor } from '../../themes';\n\nconst S = {};\nS.NotAButton = styled.div`\n  color: ${themeGet('color', 'grey')};\n  text-shadow: .5px .5px 1.5px ${themeGet('color', 'black')};\n  /* background-color: ${themeGet('color', 'grey')}; */\n  /* border-radius: 1rem; */\n  /* border: .2rem solid rgba(255, 255, 255, 0.2); */\n\n  display:inline-block;\n\n\n  \n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-radius:1rem;\n  border-color:  rgba(0, 0, 0, .2) rgba(255, 255, 255, .2) rgba(255, 255, 255, .2) rgba(0, 0, 0, .2);\n  box-shadow: -.1rem -.1rem .5rem black;\n  background-color: ${themeGet('color', 'black')};\n\n\n  \n  ${p => p.isActive && css`\n    color: ${themeGet('color', 'grey')};\n    text-shadow: .5px .5px .75px ${themeGet('color', 'black')};\n    background-color: ${themeGet('color', 'yellow')};\n  `}\n\n  \n  padding: .5rem 1.5rem;\n  margin: .5rem;\n  font-size: 2rem;\n  font-weight: 600;\n\n  span{\n  }\n`\n\nS.Button = styled.button`\n  cursor:pointer;\n  position:relative;\n\n  pointer-events: all;\n  outline:0;\n  \n  border:none;\n  border-radius: 1rem;\n\n  font-size:3rem;\n\n  color: ${themeGet('color', 'white')};\n  text-shadow: .5px .5px 1.5px ${themeGet('color', 'black')};\n  background-color: ${themeGet('color', 'blue')};\n\n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.2) rgba(255, 255, 255, 0.2);\n  border-radius: 1rem;\n  box-shadow: .1rem .1rem .5rem black;\n\n \n  transition: background-color .1s ease-out;\n\n  &:hover{\n    background-color: ${shadeColor('blue', 10)};\n    text-shadow: 1.5px 1.5px 1.5px ${themeGet('color', 'black')};\n    transform: translate(-1px, -1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n\n    .button-tooltip{\n      opacity:1;\n      left:100%;\n    }\n  }\n  \n  &:active{\n    /* down state wasnt resetting on buttons that slid out */\n\n    \n    /* background-color: ${shadeColor('blue', -10)}; */\n    /* transform: translate(.5px, 1px); */\n    \n    /* transition: background-color .1s ease-out, transform .1s ease-out; */\n  }\n\n  ${p => p.isDisabled && css`\n    color: ${themeGet('color', 'black')};\n    text-shadow: 1px 1px 1.5px ${themeGet('color', 'black')};\n    background-color: ${themeGet('color', 'grey')};\n\n    &:hover{\n      background-color: ${shadeColor('grey', 10)};\n    }\n  `}\n\n  ${p => p.isActive && css`\n    color: ${themeGet('color', 'yellow')};\n    text-shadow: 1px 1px 1.5px ${themeGet('color', 'black')};\n    background-color: ${themeGet('color', 'green')};\n\n    &:hover{\n      background-color: ${shadeColor('green', 10)};\n    }\n  `}\n`;\n\nS.BigButton = styled(S.Button)`\n  padding: 1rem 2rem;\n  margin: 1rem;\n  font-size:3rem;\n  font-weight: 600;\n`;\n\n\nS.LilButton = styled(S.Button)`\n  padding: .5rem 1.5rem;\n  margin: .5rem;\n  font-size: 2rem;\n  font-weight: 600;\n`;\n\nS.Tooltip = styled.div`\n  z-index:1;\n  opacity:0;\n  left:0%;\n\n  pointer-events:none;\n\n  position:absolute;\n  top:50%;\n  transform: translateY(-50%);\n\n\n  transition: opacity .4s ease-in-out, left .2s ease-in-out;\n  padding:.5rem 1rem;\n\n  color: ${themeGet('color', 'black')};\n  background-color: ${themeGet('color', 'white')};\n\n  border-radius:1rem;\n  margin:1;\n  white-space:pre-line;\n  min-width:auto;\n  max-width:auto;\n\n  font-size: 1.5rem;\n  text-shadow:none;\n  margin-left:1rem;\n`;\n\nconst Tooltip = ({ text }) => {\n  return (\n    <S.Tooltip className=\"button-tooltip\">\n      <p>{text}</p>\n    </S.Tooltip>\n  )\n}\n\nexport const Button = ({ text, isActive, isDisabled, onClick, style, tooltip }) => {\n  return (\n    <S.BigButton isActive={isActive} disabled={isDisabled} isDisabled={isDisabled} onClick={(e) => onClick && onClick(e)} style={style} title={tooltip} >\n      <span>{ text }</span>\n      {tooltip && <Tooltip text={tooltip} />}\n    </S.BigButton>\n  );\n}\n\nexport const LilButton = ({ text, isActive, isDisabled, onClick, style, tooltip }) => {\n  return (\n    <S.LilButton isActive={isActive} disabled={isDisabled} isDisabled={isDisabled} onClick={(e) => onClick && onClick(e)} style={style} title={tooltip}>\n      <span>{ text }</span>\n      {tooltip && <Tooltip text={tooltip} />}\n    </S.LilButton>\n  );\n}\n\nexport const NotAButton = ({ text, isActive, isDisabled, onClick, style }) => {\n  return (\n    <S.NotAButton isActive={isActive} onClick={(e) => onClick && onClick(e)} style={style} >\n      <span>{ text }</span>\n    </S.NotAButton>\n  );\n}\n","/* simple data handler for all the pre-parsed pet information that doesnt change */\nimport { clamp, getCookieObj, setObjToCookie, deleteCookie, convertStringsToNumbersInDeepObj } from './tools';\n\nconst SAVE_SCHEMA_VERSION = 5;\n\nexport const DEFAULT_PERSONALITY = {\n  \"thinkRange\": [ 200, 2000 ],\n  \"doRange\": [ 200, 2000 ],\n  \"jumpChance\": 0.01,\n  \"jumpForce\": 0.8,\n  \"xForce\": 1.0,\n  \"yForce\": 1.0,\n  \"maxVx\": 2.0\n}\n\nconst store = {\n  pets:[],\n  taxonomy: []\n}\n\nexport const getPets = () => {\n  return store.pets;\n}\n\nexport const getPetDefinition = petId => {\n  return store.pets.find(p => p.id === petId) || null;\n}\n\n/*\nTAXONOMY EXAMPLE\nallTypes: [\n  {\n    type: 'wildlife',\n    pets: [\n      {\n        id:'wildlife-billybeaver',\n        label:'Billy the Beaver'\n      }\n    ]\n  }\n]\n*/\n\nexport const getTaxonomy = () => {\n  return store.taxonomy;\n}\n\n//- right now this doesnt need to be dynamic, so its run on load one time and stored to easy access variable\nexport const gatherTaxonomy = (pets) => {\n  let allPetTypes = [];\n  pets.forEach(p => {\n    let foundTypeIndex = allPetTypes.findIndex(t => t.type === p.type);\n    if(foundTypeIndex > -1){\n      const foundType = allPetTypes[foundTypeIndex];\n      foundType.pets.push({ id: p.id, label: p.name });\n\n      allPetTypes[foundTypeIndex] = foundType;\n    }else{\n      allPetTypes.push({\n        type: p.type,\n        pets:[]\n      });\n    }\n  });\n\n  return allPetTypes;\n}\n\nexport const addToTaxonomy = (petDef, taxonomy) => {\n  let foundTypeIndex = taxonomy.findIndex(t => t.type === petDef.type);\n  if(foundTypeIndex > -1){\n    const foundType = taxonomy[foundTypeIndex];\n    foundType.pets.push({ id: petDef.id, label: petDef.name });\n    taxonomy[foundTypeIndex] = foundType;\n  }else{\n    taxonomy.push({\n      type: petDef.type,\n      pets:[ { id: petDef.id, label: petDef.name }]\n    });\n  }\n\n  return taxonomy;\n}\n\nexport const getPetTypes = () => {\n\n  let allPetTypes = [];\n  store.pets.forEach(p => {\n    let foundTypeIndex = allPetTypes.findIndex(t => t.type === p.type);\n    if(foundTypeIndex > -1){\n      const foundType = allPetTypes[foundTypeIndex];\n      foundType.pets.push({ id: p.id, label: p.name });\n\n      allPetTypes[foundTypeIndex] = foundType;\n    }else{\n      allPetTypes.push({\n        type: p.type,\n        pets:[]\n      });\n    }\n  });\n\n  return allPetTypes;\n}\n\nexport const setFromPetManifest = (id, petData, manifest) => {\n  // console.log('setFromManifest', id);\n  const savedData = getSavedData();\n  const savedPet = savedData.pets.find(savedPet => savedPet.id === id);\n  const petDef = parsePetData(id, petData, savedPet, savedData, manifest);\n  setPetDefinition(id, petDef);\n\n  store.taxonomy = addToTaxonomy(petDef, store.taxonomy);\n}\n\nconst parseStatEvents = statEvents => {\n  return statEvents.map((sE, idx) => {\n    let retObj = {\n      id: sE.id,\n      label: sE.label,\n      type: sE.type || 'event',\n      cooldown: sE.cooldown ? parseInt(sE.cooldown) : 0,\n      statEffects: sE.statEffects.map(sEff => convertStringsToNumbersInDeepObj(sEff))\n    }\n\n    return retObj;    \n  })\n}\n\nexport const parsePetData = (id, petDef, savedPet, savedData, manifest) => {\n  let defaultBehavior = petDef.behaviors.DEFAULT;\n  if(!defaultBehavior){\n    try{\n      defaultBehavior = petDef.behaviors[Object.keys(petDef.behaviors)[0]];\n    }catch(e){\n      console.error(`could not autodeclare default status for pet \"${id}\"`);\n    }\n  }\n\n  const moodSwings = parseMoodSwings(petDef.moodSwings);\n  const statEvents = parseStatEvents(petDef.statEvents || []);\n\n  const definedStats = petDef.stats;\n  let initialStats = [];\n\n  /* if cookie stats, use them here instead */\n  if(savedPet){\n    initialStats = mergeStats(definedStats, savedPet.stats, true);\n    petDef.isAlive = savedPet.isAlive;\n  }else{\n    initialStats = definedStats;\n    petDef.isAlive = true;\n  }\n\n  petDef.stats_saved = {\n    timestamp: savedData.timestamp || new Date().getTime(),\n    isAlive: savedData.isAlive,\n    stats: initialStats.map(s => formatSavedStatObj(s))\n  }\n  // console.log('personality', petDef.personality)\n\n  petDef.personality = { ...DEFAULT_PERSONALITY, ...petDef.personality };\n\n  return {\n    ...petDef,\n    id: id,\n    dir: manifest.url,\n    behaviors:{\n      ...petDef.behaviors,\n      DEFAULT: defaultBehavior\n    },\n    moodSwings:moodSwings,\n    statEvents: statEvents\n  }\n}\n\nexport const setPetDefinition = (petId, petDef, saveAfter) => {\n  const petIdx = store.pets.findIndex(p => p.id === petId);\n  if(petIdx > -1){\n    store.pets[petIdx] = petDef;\n  }else{\n    store.pets.push(petDef);\n  }\n\n  if(saveAfter)  saveAllPetStatsToCookie();\n}\n\nexport const formatStatObj = statObj => {\n  return {\n    ...statObj,\n    value: Number(statObj.value),\n    perSecond: Number(statObj.perSecond),\n    max: Number(statObj.max)\n  }\n}\n\nexport const getDefaultSavedData = () => ({ \n  schemaVersion: SAVE_SCHEMA_VERSION,\n  timestamp: null, \n  pets: []\n});\n\nexport const parseMoodSwings = (moodSwings) => {\n  return moodSwings || [];\n}\n\nexport const getSavedData = () => {\n  let savedData = getCookieObj('tly_virtualpet');\n  if(savedData && (!savedData.schemaVersion || savedData.schemaVersion < SAVE_SCHEMA_VERSION)){\n    console.warn(`Schema version ${savedData.schemaVersion} is behind version ${SAVE_SCHEMA_VERSION}, resetting all your data, sorry bubs`);\n    deleteCookie('tly_virtualpet');\n    savedData = null;\n  }\n\n  return savedData || getDefaultSavedData();\n}\n\nconst mergeStats = (origArray, newArray, overwrite) => {\n  const retArray = origArray.slice(0);\n  for(let i = 0; i < newArray.length; i++){\n    const newStat = newArray[i];\n    const matchingStatIdx = retArray.findIndex(oStat => oStat.id === newStat.id);\n    if(matchingStatIdx > -1){\n      if(overwrite){\n        retArray[matchingStatIdx] = { ...retArray[matchingStatIdx], ...newStat };\n      }else{\n        //- not unique, dont add it\n      }\n    }else{\n      retArray.push(newStat);\n    }\n  }\n\n  return retArray;\n}\n\nexport const setPetStoreData = (itemType, data) => {\n  return store[itemType] = data;\n}\nexport const getPetStoreData = (itemType) => {\n  return store[itemType];\n}\n\nexport const getStartStats = petId => {\n  const petDef = getPetDefinition(petId);\n  return petDef?.startStats || [];\n}\n\nexport const getStartStat = (petId, statId) => {\n  const startStats = getStartStats(petId);\n  return startStats.find(stat => stat.id === statId) || null;\n}\n\nexport const getStatRules = (petId) => {\n  const petDef = getPetDefinition(petId);\n  if(!petDef) return [];\n\n  return petDef.stats.map(s => ({\n    doesKill: s.doesKill || false,\n    fullIsGood: s.fullIsGood,\n    max: s.max,\n    moods: s.moods || []\n  }));\n}\n\n\nexport const fancyUpSavedStats = (initialStats, savedStats, timestamp) => {\n  const mergedStats = initialStats.map(iS => {\n    const savedStat = savedStats.stats.find(sS => sS.id === iS.id);\n    return {...iS, ...savedStat}\n  });\n\n\n  return {\n    timestamp: savedStats.timestamp || timestamp,\n    stats: mergedStats.map(mS => formatStatObj(mS))\n  }\n\n\n}\n\nexport const getPetDeltaStats = (petId, timestamp) => {\n  const petDef = getPetDefinition(petId);\n  const mergedStats = fancyUpSavedStats(petDef.stats, petDef.stats_saved, timestamp)\n\n  return getDeltaStats(mergedStats, timestamp);\n}\n\nexport const getDeltaStats = (statsObj, timestamp) =>{\n  const oldStats = statsObj.stats || [];\n  const timeDiff = (timestamp - statsObj.timestamp) / 1000;\n\n  return oldStats.map(s => {\n    return {\n      ...s,\n      value: s.value,\n      max: s.max,\n      current: Math.round(clamp(s.value + (s.perSecond * timeDiff), 0, s.max)),\n      moods: s.moods\n    }\n  });\n}\n\nexport const killThisPet = petId => {\n  console.log('KILL THIS PET ', petId)\n  const petDef = getPetDefinition(petId);\n  petDef.isAlive = false;\n  setPetDefinition(petId, petDef, true);\n}\n\nexport const augmentPetStat = (petId, statId, augmentValue) => {\n  const now = new Date().getTime();\n  const stats = getPetDeltaStats(petId, now).slice(0);\n  const idx = stats.findIndex(s => s.id === statId);\n  const newValue = stats[idx].current + augmentValue;\n  stats[idx].current = clamp(newValue, 0, stats[idx].max);\n\n  saveStats(petId, stats, now);\n}\n\n\n/* SAVING */\nexport const saveStats = (petId, stats, timestamp) => {\n  // console.log('SAVING', petId, timestamp);\n  const petDef = getPetDefinition(petId);\n  // console.log(petDef)\n  // console.error('saving isAlive as ', petDef.isAlive)\n  petDef.stats_saved = {\n    timestamp: timestamp,\n    isAlive: petDef.isAlive,\n    stats: stats.map(s => (formatSavedStatObj({ ...s, value: s.current})))\n  }\n  setPetDefinition(petId, petDef, true);\n}\n\nexport const saveAllPetStatsToCookie = () => {\n  console.log('saveAllPetStatsToCookie');\n  setObjToCookie('tly_virtualpet', {\n    schemaVersion: SAVE_SCHEMA_VERSION,\n    timestamp: new Date().getTime(),\n    pets: store.pets.map(p => ({\n      ...p.stats_saved,\n      id: p.id\n    }))\n  });\n}\n\nexport const formatSavedStatObj = stat => {\n\n  //- TODO, only NEED to save id and value, however other stuff depends on (and shouldnt depend on) these being in the cookie\n\n  return {\n    id: stat.id,\n    value: stat.value,\n    type: stat.type,\n    label: stat.label,\n    perSecond: stat.perSecond,\n    max: stat.max,\n    fullIsGood: stat.fullIsGood,\n    doesKill: stat.doesKill\n  }\n} \n\n\nexport const saveAllPetStatsToCookieNow = () => {\n  store.pets.forEach(p => {\n\n    const now = new Date().getTime();\n    const stats = getPetDeltaStats(p.id, now).slice(0);\n\n    p.stats_saved = {\n      timestamp: now,\n      isAlive: p.isAlive,\n      stats: stats.map(s => (formatSavedStatObj({ ...s, value: s.current})))\n    }\n    setPetDefinition(p.id, p);\n  });\n\n  saveAllPetStatsToCookie();\n}\n\n\n/* RESETTING */\nexport const resetPetState = petId => {\n  console.log(`resetting pet \"${petId}\"`);\n\n  const now = new Date().getTime();\n  const petDef = getPetDefinition(petId);\n  const definedStats = petDef.stats;\n\n  petDef.isAlive = true;\n  petDef.stats_saved = {\n    timestamp: now,\n    isAlive: true,\n    stats: definedStats.map(s => formatSavedStatObj(s))\n  }\n  setPetDefinition(petId, petDef)\n}\n\nexport const deleteAllData = () => {\n  store.pets = [];\n  deleteCookie('tly_virtualpet');\n  global.location.reload();\n}\n\n\nglobal.petStore = {\n  getAllData: () => store,\n  deleteAllData: () => deleteAllData(),\n  getSavedData: () => getSavedData(),\n  getPets: () => getPets(),\n  getPetStoreData: (itemType) => getPetStoreData(itemType),\n  getPetDefinition: (id) => getPetDefinition(id),\n  getPetDeltaStats: (petId, timestamp) => getPetDeltaStats(petId, timestamp)\n}\n\n\nexport default store;","import { createAction } from 'redux-actions';\n\nexport const incrementXp = createAction('INCREMENT_XP');\nexport const addActivity = createAction('ADD_ACTIVITY');\nexport const removeActivity = createAction('REMOVE_ACTIVITY');\nexport const setActivities = createAction('SET_ACTIVITIES');\nexport const forceBehavior = createAction('FORCE_BEHAVIOR');\nexport const resetPet = createAction('RESET_PET');\nexport const killPet = createAction('KILL_PET');\nexport const clickPet = createAction('CLICK_PET');\n\nexport const augmentStat = createAction('AUGMENT_STAT', (id, value) => ({\n  id: id,\n  value: value\n}));\n\nexport const augmentStats = createAction('AUGMENT_STATS');","import Pet from './pet';\nimport Item from './item';\nimport { throttle } from 'throttle-debounce';\n\nconst groups = {};\nconst gPetInfo = {};\nconst gItemInfo = {};\nlet sceneContext;\nlet preloadCompleted = false;\nconst THROTTLE_SPEED = 150;\n\nconst setContext = (context) => {\n  sceneContext = context;\n}\n\nconst alterItemsInfo = (items) => {\n  items.forEach(i => {\n    const id = i.id;\n    if(!gItemInfo[id]){\n      gItemInfo[id] = { \n        ...i,\n        registeredSprites: registerSprites(id, './data/items', i.sprites)\n      }\n  \n      // console.log('alterItemInfo, registered: ', gItemInfo[id].registeredSprites);\n    }else {\n      // when you've loaded an item before, so just skip around\n    }\n  });\n\n  if(preloadCompleted){\n    loadItemImagesAfterPreload(items.map(i => i.id));\n  }\n}\n\n\nconst loadItemImagesAfterPreload = itemIds => {\n  // console.log('loadItemImagesAfterPreload');\n  const allSpriteDefs = [itemIds.map(id => gItemInfo[id].registeredSprites)]\n  Object.keys(allSpriteDefs).forEach(spriteDefKey => {\n    sceneContext.load.atlas(\n      allSpriteDefs[spriteDefKey].id, \n      allSpriteDefs[spriteDefKey].image, \n      allSpriteDefs[spriteDefKey].data\n    );\n  });\n\n  sceneContext.load.once('complete', () => onItemImagesReloadComplete(itemIds));\n  sceneContext.load.start();\n}\n\nconst onItemImagesReloadComplete = itemIds => {\n  itemIds.forEach(itemId => {\n    createSpritesFromData(itemId, getItemInfo(itemId).sprites, getItemInfo(itemId).animations, sceneContext);\n  });\n}\n\nconst alterPetInfo = (id, phaserPetDef) => {\n  if(!gPetInfo[id]){\n    gPetInfo[id] = { \n      ...phaserPetDef,\n      registeredSprites: registerSprites(id, './data/pets', phaserPetDef.sprites)\n    }\n\n    if(preloadCompleted){\n      loadPetImagesAfterPreload(phaserPetDef.id);\n    }\n  }else {\n    // when you've loaded a pet before, so just skip around\n  }\n}\n\nconst loadPetImagesAfterPreload = id => {\n  const spriteDefs = getPetInfo(id).registeredSprites;\n  Object.keys(spriteDefs).forEach(spriteDefKey => {\n    sceneContext.load.atlas(\n      spriteDefs[spriteDefKey].id, \n      spriteDefs[spriteDefKey].image, \n      spriteDefs[spriteDefKey].data\n    );\n  });\n\n  sceneContext.load.once('complete', () => onPetImagesReloadComplete(id));\n  sceneContext.load.start();\n}\n\nconst onPetImagesReloadComplete = petId => {\n  createSpritesFromData(petId, getPetInfo(petId).sprites, getPetInfo(petId).animations, sceneContext);\n}\n\nconst getPetInfo = id => {\n  if(!gPetInfo[id]) console.error(`SpawnController: could not get petInfo for ${id}`);\n  return gPetInfo[id] || null;\n}\nconst getItemInfo = id => {\n  if(!gItemInfo[id]) console.error(`SpawnController: could not get itemInfo for ${id}`);\n  return gItemInfo[id] || null;\n}\n\nconst registerSprites = (id, path, sprites) => {\n  let spriteDefs = {};\n  Object.keys(sprites).forEach(spriteKey => {\n    spriteDefs[spriteKey] = {\n      id: spriteKey,\n      image: `${path}/${id}/assets/${sprites[spriteKey].image}`, \n      data: `${path}/${id}/assets/${sprites[spriteKey].data}`,\n      defaults: sprites[spriteKey].defaults || { animation: {}, frameObj: {} }\n    };\n  });\n\n  return spriteDefs;\n}\n\nconst getCleanAnimationDef = (given, defaults) => {\n  return {\n    ...defaults.animation,\n    ...given,\n    frameObj: {\n      ...given.frameObj,\n      ...defaults.frameObj\n    }\n  }\n}\n\nconst createSprites = () => {\n  Object.keys(gPetInfo).forEach(petId => {\n    createSpritesFromData(petId, getPetInfo(petId).sprites, getPetInfo(petId).animations, sceneContext);\n  });\n\n  Object.keys(gItemInfo).forEach(itemId => {\n    createSpritesFromData(itemId, getItemInfo(itemId).sprites, getItemInfo(itemId).animations, sceneContext);\n  });\n}\n\n\nconst createSpritesFromData = (id, spriteDefs, animationDefs, sceneContext) => {\n  Object.keys(animationDefs).forEach(animationKey => {\n    const spriteId = animationDefs[animationKey].sprite;\n    const animationDef = getCleanAnimationDef(animationDefs[animationKey], spriteDefs[spriteId].defaults);\n\n    sceneContext.anims.create({ \n      key: animationKey, \n      frameRate: animationDef.frameRate, \n      frames: sceneContext.anims.generateFrameNames(\n        animationDef.sprite, \n        animationDef.frameObj\n      ),\n      repeat: animationDef.repeat\n    });\n  });\n}\n\nconst preload = (sceneContext) => {\n  preloadSprites(sceneContext);\n\n  preloadCompleted = true;\n}\n\nconst preloadSprites = (sceneContext) => {\n  Object.keys(gPetInfo).forEach(petKey => {\n    preloadSpritesFromData(getPetInfo(petKey).registeredSprites, sceneContext)\n  });\n\n  Object.keys(gItemInfo).forEach(itemKey => {\n    // console.log(\"DO IT\", itemKey, getItemInfo(itemKey))\n    preloadSpritesFromData(getItemInfo(itemKey).registeredSprites, sceneContext)\n  });\n}\n\nconst preloadSpritesFromData = (registeredSprites, sceneContext) => {\n  Object.keys(registeredSprites).forEach(spriteDefKey => {\n    // if(spriteDefKey === 'i_mushroom_default') return;\n    sceneContext.load.atlas(\n      registeredSprites[spriteDefKey].id, \n      registeredSprites[spriteDefKey].image, \n      registeredSprites[spriteDefKey].data\n    );\n  });\n}\n\nconst create = (sceneContext) => {\n  createSprites();\n\n  groups.pets = sceneContext.physics.add.group();\n  groups.items = sceneContext.physics.add.group();\n  return groups;\n}\n\nconst update = () => {\n  groups.pets?.children.iterate(entity => {\n    entity.update();\n  });\n  groups.items?.children.iterate(entity => {\n    entity.update();\n  });\n  \n  throttledUpdate();\n}\n\nconst onThrottledUpdate = () => {\n  groups.pets?.children.iterate(entity => {\n    entity.throttledUpdate();\n  });\n  groups.items?.children.iterate(entity => {\n    entity.throttledUpdate();\n  });\n}\nconst throttledUpdate = throttle(THROTTLE_SPEED, false, onThrottledUpdate);\n\nconst spawnItemId = (itemId, coords) => {\n  coords = coords || { x: 0, y: 0 }\n\n  spawnItem(Item.Entity, itemId, coords, {}, getItemInfo(itemId));\n}\n\n/* right now, there should be only one pet at a time. in the future, support multiples */\nconst spawnPet = (id) => {\n  despawnEverything();\n  spawnIt(Pet.Entity, id, { x: 100, y: 0 }, {}, getPetInfo(id), true);\n  // spawnClones(() => { spawnIt(Pet.Entity, id, { x: 100, y: 0 }, {}, getPetInfo(id).petInfo, false) }, 10)\n}\n\nconst spawnClones = (command, count) => {\n  for(let i = 0; i < count; i++){\n    command();\n  }\n}\n\nconst despawnEverything = () => {\n  groups.pets?.children.iterate(child => {\n    child.destroy();\n  });\n}\n\nconst spawnItem = (EntityRef, id, position, stats, itemInfo) => {\n  // console.log('Spawn.spawnIt: ', id, itemInfo);\n  return new EntityRef(sceneContext, groups.items, {\n    id: id,\n    x: position.x,\n    y: position.y,\n    stats: stats,\n    entityInfo: itemInfo\n  });\n}\n\nconst spawnIt = (EntityRef, id, position, stats, petInfo, canSendUpdates = false) => {\n  // console.log('Spawn.spawnIt: ', id, petInfo);\n  return new EntityRef(sceneContext, groups.pets, {\n    id: id,\n    x: position.x,\n    y: position.y,\n    stats: stats,\n    petInfo: petInfo,\n    canSendUpdates: canSendUpdates\n  });\n}\n\nconst updatePetAnimationLabel = (id, label) => {\n  groups.pets?.children.iterate(entity => {\n    if(entity.id === id){\n      // console.log('playAnimation', label)\n      entity.playAnimation(label);\n    }\n  });\n}\nconst updatePetActivities = (id, data) => {\n  groups.pets?.children.iterate(entity => {\n    if(entity.id === id){\n      entity.updateActivities(data);\n    }\n  });\n}\nconst updatePetMortality = (id, isAlive) => {\n  groups.pets?.children.iterate(entity => {\n    if(entity.id === id){\n      entity.updateMortality(isAlive);\n    }\n  });\n}\n\n\nconst exports = {\n  setContext,\n  preload,\n  create,\n  update,\n  updatePetAnimationLabel,\n  updatePetActivities,\n  updatePetMortality,\n  alterPetInfo,\n  alterItemsInfo,\n  spawnPet,\n  spawnItemId\n}\nexport default exports;","import Phaser from 'phaser';\n\nconst LAZY_STATS = {\n  speed: 250,\n  bounciness: 0,\n  drag: 300\n}\n\nclass Entity extends Phaser.Physics.Arcade.Sprite {\n  constructor (scene, physicsGroup, spawnData) {\n    super(scene, spawnData.x, spawnData.y, spawnData.id);\n\n    this.id = spawnData.entityInfo.id;\n    this.statEvents = spawnData.entityInfo.statEvents || {};\n    this.stats = spawnData.stats || {};\n    const firstSheetKey = Object.keys( spawnData.entityInfo?.sprites)[0];\n\n    this.setBehaviors(spawnData.entityInfo.behaviors);\n    this.spriteScale =  spawnData.entityInfo.sprites[firstSheetKey].scale || 1;\n    const frameDims =  spawnData.entityInfo.sprites[firstSheetKey].frameDims || [ 0, 0 ];\n\n    // maybe remove later? adjusts hitbox for sprite\n    const frameSqueeze =  spawnData.entityInfo.sprites[firstSheetKey].frameSqueeze || { x: 0, y: 0, w: 0, h: 0 };\n\n    //- custom properties\n\n    //- parent stuff\n    scene.add.existing(this);\n    if(physicsGroup){\n      physicsGroup.add(this);\n    }else{\n      scene.physics.add.existing(this);\n    }\n\n    //- physics\n    this.setBounce(LAZY_STATS.bounciness);\n    this.setCollideWorldBounds(true);\n    this.allowGravity = false;\n\n    //- squeeze in hit box from edge of sprite\n    this.body.setSize(frameDims[0] + frameSqueeze.w, frameDims[1] + frameSqueeze.h);\n    this.body.offset.x = frameSqueeze.x;\n    this.body.offset.y = frameSqueeze.y;\n    this.body.setDrag(LAZY_STATS.drag);\n\n    this.playAnimation();\n  }\n\n  setBehaviors(behaviorsData){\n    this.behaviorsData = behaviorsData;\n    this.curBehaviorId = Object.keys(this.behaviorsData)[0];\n  }\n\n  getBehaviorAnimation(){\n    return this.behaviorsData[this.curBehaviorId].animations[0];\n  }\n\n  update(){\n    // console.log()\n    //- turn if facing left\n    if(this.flipX){\n      if(this.body.velocity.x >= 0) this.flipX = false;\n    }else{\n      if(this.body.velocity.x < 0) this.flipX = true;\n    }\n  }\n\n  getItemEffects(){\n    return this.statEvents[0].statEffects.map(sE => ({\n      id: sE.id,\n      value: sE.immediate\n    }));\n  }\n\n  throttledUpdate(){}\n\n  playAnimation(animKey){\n    if(!animKey){\n      animKey = this.getBehaviorAnimation();\n    }\n    if(this.curAnimation !== animKey){\n      this.curAnimation = animKey;\n      this.anims.play(animKey).setScale(this.spriteScale).setOrigin(0);\n    }\n  }\n}\n\nconst exports = {\n  Entity\n}\n\nexport default exports;","import Phaser from 'phaser';\nimport SpawnController from './spawn';\nimport SceneController from './scene';\nimport Events from './event-emitter';\n\nlet game;\nlet sceneContext;\nlet gameLoaded = false;\nlet activePetId = null;\n\nexport const createGame = (jsonData) => {\n  console.log('Phaser.createGame, jsonData:', jsonData);\n\n  const config = {\n    type: Phaser.AUTO,\n    scale:{\n      parent: jsonData.id,\n      mode: Phaser.Scale.RESIZE,\n      autoCenter: Phaser.Scale.CENTER_BOTH,\n      width: 900,\n      height: 500\n    },\n    autoRound: false,\n    physics: {\n        default: 'arcade',\n        arcade: {\n            gravity: { y: 800 },\n            debug: false\n        }\n    },\n    scene: {\n      preload: preload,\n      create: create,\n      update: update\n    }\n  };\n\n  global.game = new Phaser.Game(config);\n}\nglobal.stopGame = () => {\n  sceneContext.scene.stop();\n}\n\nglobal.startGame = () => {\n  sceneContext.scene.start();\n}\n\nglobal.spawnItem = () => {\n  const coords = { \n    x: Math.random() * window.innerWidth, \n    y: 100\n  };\n  spawnItem('mushroom', coords);\n}\n\nexport function updateBounds(x, y, width, height){\n  sceneContext.physics.world.setBounds(x, y, width, height, true, true, true, true);\n  sceneContext.cameras.main.setBounds(x, y, width, height, true, true, true, true);\n\n  SceneController.updateBounds(x, y, width, height);\n}\n\nfunction setSceneContext(context){\n  sceneContext = context;\n  global.scene = sceneContext;\n  SceneController.setContext(context);\n  SpawnController.setContext(context);\n}\n\nfunction preload() {\n  setSceneContext(this);\n  SceneController.preload(this);\n  SpawnController.preload(this);\n}\n\nexport function alterItems(itemDefs){\n  SpawnController.alterItemsInfo(itemDefs);\n}\n\nexport function alterPet(phaserPetDef){\n  activePetId = phaserPetDef.id;\n  SpawnController.alterPetInfo(phaserPetDef.id, phaserPetDef);\n\n  if(gameLoaded){\n    spawnPet(phaserPetDef.id);\n  }\n}\n\nexport function updateScene(sceneInfo){\n  SceneController.setSceneInfo(sceneInfo);\n  global.sc = SceneController;\n}\n\nexport function updatePetAnimationLabel(petId, data){\n  SpawnController.updatePetAnimationLabel(petId, data);\n}\n\nexport function updatePetActivities(petId, data){\n  SpawnController.updatePetActivities(petId, data);\n}\n\nexport function updatePetMortality(petId, isAlive){\n  SpawnController.updatePetMortality(petId, isAlive);\n}\n\nexport function spawnItem(itemId, coords){\n  console.log('Game.spawnItem', itemId, coords);\n  SpawnController.spawnItemId(itemId, coords);\n}\n\nexport function spawnPet(petId){\n  console.log('Game.spawnPet');\n  SpawnController.spawnPet(petId);\n}\n\nfunction onInterface(event, data){\n  // console.log('onInterface', event, data)\n  global.game.onInterface && global.game.onInterface(event, data)\n}\n\nfunction onSendStatus(data){\n  // console.log('onInterface', event, data)\n  global.game.onInterface && global.game.onInterface('sendStatus', data)\n}\n\nfunction create() {\n  console.log('Phaser.create()')\n\n  global.spawnController = SpawnController;\n\n  let sceneGroups = SceneController.create(this);\n  let spawnGroups = SpawnController.create(this);\n  \n  // this.physics.add.collider(spawnGroups.pets, [ sceneGroups.floor, sceneGroups.platforms ], null, collider_petsAndFloor, this);\n  this.physics.add.collider(spawnGroups.pets, sceneGroups.floors, null, collider_thingsAndFloors, this);\n  this.physics.add.collider(spawnGroups.pets, sceneGroups.platforms, null, collider_thingsAndPlatforms, this);\n  this.physics.add.collider(spawnGroups.items, sceneGroups.floors, null, collider_thingsAndFloors, this);\n  this.physics.add.collider(spawnGroups.items, sceneGroups.platforms, null, collider_thingsAndPlatforms, this);\n  this.physics.add.collider(spawnGroups.items, spawnGroups.pets, null, collider_itemsAndPets, this);\n  \n  spawnPet(activePetId);\n\n  Events.on('interface', onInterface, this);\n  Events.on('sendStatus', onSendStatus, this);\n\n  gameLoaded = true;\n}\n\nfunction collider_itemsAndPets(item, pet){\n  const itemEffects = item.getItemEffects();\n  pet.applyItemEffects(itemEffects);\n  item.destroy();\n  return false;\n}\n\nfunction collider_thingsAndFloors(itemOrPet, floors){\n  return true;\n}\nfunction collider_thingsAndPlatforms(itemOrPet, floors){\n  return true;\n  /*\n  // to ignore floor when jumping or something\n  if(pet.isGoingUp()){\n    return false;\n  }else{\n    return true;\n  }\n  */\n}\n\nfunction update (){\n  SpawnController.update();\n}","import Phaser from 'phaser'\nconst eventEmitter = new Phaser.Events.EventEmitter()\nexport default eventEmitter","import { \n  stretchBgToBounds,\n  positionFloor, \n  positionPlatforms,\n} from './utils';\n\nlet sceneContext;\nconst ALPHA_TEXTURE = 1;\nconst ALPHA_BODY = 0;\n\nlet gScenesInfo = {};\nlet gSceneId = null;\n\nlet gBgImage = null;\nlet gGameBounds = {};\nlet group_floors = [];\nlet group_platforms = [];\n\nlet gPreloadCompleted = false;\n\n\nlet physGroup_floors;\nlet physGroup_platforms;\n\n\nconst setContext = (context) => {\n  sceneContext = context;\n}\n\nconst preload = () => {\n  preloadSprites(sceneContext)\n  gPreloadCompleted = true;\n}\n\nconst preloadSprites = (sceneContext) => {\n  sceneContext.load.image(getTextureId('bg'), getSceneInfo().background.imageUrl);\n  Object.keys(getSceneInfo().textures).forEach(spriteName => {\n    sceneContext.load.image(getTextureId(spriteName), getSceneInfo().textures[spriteName].imageUrl);\n  });\n}\n\nconst loadSpritesAfterPreload = sceneId => {\n  sceneContext.load.image(getTextureId('bg'), getSceneInfo().background.imageUrl);\n  Object.keys(getSceneInfo().textures).forEach(spriteName => {\n    sceneContext.load.image(getTextureId(spriteName), getSceneInfo().textures[spriteName].imageUrl);\n  });\n  \n  sceneContext.load.once('complete', () => onSpritesLoadComplete(sceneId));\n  sceneContext.load.start();\n}\n\nconst onSpritesLoadComplete = petId => {\n  removeTheOldStuff();\n  makeTheStuff(physGroup_floors, physGroup_platforms);\n  resize();\n}\n\nconst removeTheOldStuff = () => {\n  global.pP = physGroup_platforms;\n  global.pG = group_platforms\n\n  group_floors.forEach(p => {\n    p.body.destroy();\n    p.texture && p.texture.destroy();\n  })\n\n  group_platforms.forEach(gP => {\n    gP.forEach(p => {\n      p.body.destroy();\n      p.texture && p.texture.destroy();\n    })\n  })\n\n}\n\nconst create = (levelData) => {\n  physGroup_floors = sceneContext.physics.add.staticGroup();\n  physGroup_platforms = sceneContext.physics.add.staticGroup();\n\n  return makeTheStuff(physGroup_floors, physGroup_platforms)\n}\n\nconst makeTheStuff = (physGroup_floors, physGroup_platforms) => {\n  group_floors = [];\n  group_platforms = [];\n\n  group_floors.push(makePlatform(physGroup_floors, getSpriteDef(getSceneInfo().floor.texture)));\n  makePlatforms(physGroup_platforms, getSceneInfo().platforms);\n\n  gBgImage = sceneContext.add.tileSprite(0, 0, 545, 545, getTextureId('bg')).setOrigin(0, 0).setDepth(-1);\n\n  return {\n    floors: physGroup_floors,\n    platforms: physGroup_platforms\n  }\n}\n\n\nconst getTextureId = id => {\n  return `scene-${getSceneInfo().id}-${id}`;\n}\n\nconst updateBounds = (x, y, w, h) => {\n  gGameBounds = {\n    x,\n    y,\n    w,\n    h\n  }\n\n  resize();\n}\n\nconst resize = () => {\n  gBgImage = stretchBgToBounds(gBgImage, getSceneInfo(), gGameBounds);\n  positionPlatforms(group_platforms, getSceneInfo(), gGameBounds);\n  positionFloor(group_floors, getSceneInfo(), gGameBounds);\n}\n\nconst getSpriteDef = textureId => {\n  if(!textureId) return null;\n  try{\n    return getSceneInfo().textures[textureId];\n  }catch(e){\n    console.error(`could not find level texture ${textureId}`);\n    return null;\n  }\n}\n\n\nconst makePlatforms = (group, platformDefs) => {\n  platformDefs.forEach(platformDef => {\n    const textureDef = getSceneInfo().textures[platformDef.texture];\n    group_platforms.push(makePlatformGroup(group, textureDef, platformDef.count));\n  });\n}\nconst makePlatformGroup = (group, textureDef, count) => {\n  let plattys = []\n  for(let i = 0; i < count; i++){\n    plattys.push(makePlatform(group, textureDef));\n  }\n  return plattys;\n}\n\nconst makePlatform = (group, textureDef) => {\n  return {\n    body: group.create(0, 0, null).setScale(1, 1).setOrigin(0,0).setAlpha(ALPHA_BODY).refreshBody(),\n    texture: textureDef ? addTexturedTileSprite(textureDef) : null\n  }\n}\n\nconst addTexturedTileSprite = textureDef => {\n  return sceneContext.add.tileSprite(0, 0, textureDef.width, textureDef.height, getTextureId(textureDef.id)).setOrigin(0, 0).setTileScale(textureDef.spriteScale, textureDef.spriteScale).setAlpha(ALPHA_TEXTURE)\n}\n\nconst getSceneInfo = sceneId => {\n  if(!sceneId) sceneId = gSceneId;\n\n  if(!gScenesInfo[sceneId]) console.error(`SceneController: could not get sceneInfo for ${sceneId}`);\n  return gScenesInfo[sceneId] || null;\n}\n\nconst setSceneInfo = sceneInfo => {\n  console.log('setSceneInfo', sceneInfo)\n  gScenesInfo[sceneInfo.id] = sceneInfo;\n  gSceneId = sceneInfo.id;\n\n  if(gPreloadCompleted){\n    loadSpritesAfterPreload(gSceneId);\n  }\n}\n\nconst exports = {\n  setContext,\n  preload,\n  create,\n  updateBounds,\n  setSceneInfo\n}\n\nexport default exports;","/* simple data handler for all the pre-parsed pet information that doesnt change */\nimport { convertStringsToNumbersInDeepObj, prefixValueInDeepObj } from './tools';\n\nconst store = {\n  items:[],\n  scenes:[]\n}\n\nexport const setFromSceneManifest = (data, manifest) => {\n  // console.log('setFromSceneManifest', data, manifest);\n  // const converted = convertStringsToNumbersInDeepObj(data);\n  const complete = prefixValueInDeepObj('imageUrl', `${manifest.url}/assets/`, data);\n  addSceneDefinition(complete);\n}\nexport const addSceneDefinition = (newDefinition) => {\n  // console.log('adding new scene definition', newDefinition);\n  store.scenes.push(newDefinition);\n}\nexport const getSceneDefinition = id => {\n  return store.scenes.find(p => p.id === id) || null;\n}\n\nexport const setFromItemManifest = (data, manifest) => {\n  // console.log('setFromItemManifest', data, manifest);\n  // const converted = convertStringsToNumbersInDeepObj(data);\n  const complete = prefixValueInDeepObj('imageUrl', `${manifest.url}/assets/`, data);\n  addItemDefinition(complete);\n}\nexport const addItemDefinition = (newDefinition) => {\n  // console.log('adding new item definition', newDefinition);\n  store.items.push(newDefinition);\n}\nexport const getItemDefinition = id => {\n  return store.items.find(p => p.id === id) || null;\n}\nexport const getItems = () => {\n  return store.items;\n}\nexport const getScenes = () => {\n  return store.scenes;\n}\n\nglobal.itemStore = {\n  getAllData: () => store,\n  getItems: () => getItems(),\n  getScenes: () => getScenes(),\n  getSceneDefinition: (id) => getSceneDefinition(id)\n}\n\n\nexport default store;","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { themeGet } from '@themes/';\nimport { clamp } from '@util/tools';\nimport { \n  selectActivePetId\n} from '../../store/selectors';\n\nimport Scene from './components/scene';\n\nimport PhaserComponent from './phaser';\n\nconst S = {};\nS.Cage = styled.div`\n  position:relative;\n\n\n  color: ${themeGet('color', 'blue')};\n\n  h2{\n    color: ${themeGet('color', 'white')};\n  }\n`\n\nclass Cage extends Component {\n  constructor(props){\n    super(props);\n\n    this.containerRef = React.createRef();\n    this.onResize = this.onResize.bind(this);\n\n    this.state = {\n      containerWidth: 500,\n      containerHeight: 500\n    }\n  }\n\n  componentDidUpdate(prevProps){\n    //- when the first canavs is rendered, check the page bounds\n    if(!prevProps.activePetId && this.props.activePetId){\n      this.onResize();\n    }\n  }\n\n  componentDidMount() {\n    global.addEventListener('resize', this.onResize);\n    this.onResize();\n  }\n\n  onResize(){\n    this.updateRedundantDims();\n  }\n\n  updateRedundantDims(){\n    this.setState({\n      containerWidth: window.innerWidth,\n      containerHeight: window.innerHeight\n    })\n  }\n\n  updateCanvasDims(){\n    if(this.containerRef.current){\n      const squishers = {\n        x: clamp((this.containerRef.current.offsetWidth / 1000), .3, 1),\n        y: clamp((this.containerRef.current.offsetHeight / 1000), .3, 1)\n      }\n      // global.spriteScale = squishers.x < squishers.y ? squishers.x : squishers.y;\n      this.setState({\n        containerWidth: this.containerRef.current.offsetWidth,\n        containerHeight: this.containerRef.current.offsetHeight\n      })\n    }\n  }\n\n  render(){\n    const { \n      activePetId\n    } = this.props;\n    global.cage = this;\n\n    if(!activePetId){\n      return null;\n    }else{\n      return(\n        <S.Cage ref={this.containerRef} style={{ width: this.state.containerWidth, height: this.state.containerHeight }}>\n          <PhaserComponent id=\"1\" width={this.state.containerWidth} height={this.state.containerHeight}/>\n          <Scene />\n        </S.Cage>\n      );\n    }\n\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  activePetId: selectActivePetId(state)\n})\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {},\n    dispatch\n  )\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Cage)\n\n","\n\nimport { getValOrRandRange, randBetween } from \"@util/tools\";\n\nexport const stretchBgToBounds = (globalBg, sceneInfo, gameBounds) => {\n  const bg = sceneInfo.background;\n\n  globalBg.width = bg.size[0];\n  globalBg.height = bg.size[0];\n\n  if(bg.scale.width === 'stretch'){\n    globalBg.displayWidth = gameBounds.w;\n  } else if(bg.scale.width === 'auto'){\n    globalBg.displayWidth = bg.size[0] * (bg.spriteScale || 1);\n  }\n\n  if(bg.scale.height === 'stretch'){\n    globalBg.displayHeight = gameBounds.h;\n  } else if(bg.scale.height === 'auto'){\n    globalBg.displayHeight = bg.size[1] * (bg.spriteScale || 1);\n  }\n\n  //diff between image and page height\n  let diff = globalBg.displayHeight - gameBounds.h;\n  globalBg.y = -diff;\n  \n  // just make em big, 1000 isnt pixels here though need to figure out what it is\n  globalBg.width = 1000;\n  globalBg.height = 1000;\n\n  return globalBg;\n}\n\nexport const positionFloor = (group, sceneInfo, gameBounds) => {\n  let floorY = gameBounds.h - sceneInfo.floor.height;\n\n  setPlatformToPosition(group[0].body, group[0].texture, {\n    x: 0,\n    y: floorY,\n    w: gameBounds.w,\n    h: sceneInfo.floor.height,\n  });\n}\n\nexport const positionPlatforms = (group, sceneInfo, gameBounds) => {\n  let floorY = gameBounds.h - sceneInfo.floor.height;\n\n  group.forEach((pGroup, p) => {\n    let pParams = sceneInfo.platforms[p];\n    \n    if(pParams.type === 'rando'){\n      positionPlatformGroup_rando(pGroup, pParams, floorY, gameBounds.w)\n    }else if(pParams.type === 'stairs'){\n      positionPlatformGroup_stairs(pGroup, pParams, floorY, gameBounds.w)\n    } else{\n      console.log('invalid type ', pParams.type)\n    }\n  })\n}\n\nconst setPlatformToPosition = (platform, texture, pos) => {\n  platform.setPosition(pos.x, pos.y);\n  platform.displayWidth = pos.w;\n  platform.displayHeight = pos.h;\n\n  // physics\n  platform.body.position = { x: pos.x, y: pos.y };\n  platform.body.position = { x: pos.x, y: pos.y };\n  platform.body.width = pos.w;\n  platform.body.height = pos.h;\n  platform.body.reset();\n\n  if(texture){\n    texture.setPosition(pos.x, pos.y)\n    texture.width = pos.w;\n    texture.height = pos.h;\n  }\n}\n\n// can make random stairs, needs an \"up and down\" type of thing and needs to get the full widths correct when x becomes random\nconst positionPlatformGroup_stairs = (pGroup, pParams, floorY) => {\n  let xOffset = getValOrRandRange(pParams.x) || 0;\n\n  pGroup.forEach((pObj, i) => {\n    let stepX = getValOrRandRange(pParams.stepX, 1) || 0;\n    let stepY = getValOrRandRange(pParams.stepY, 1) || 0;\n\n    let size = {\n      x: stepX * pParams.size,\n      y: stepY * pParams.size\n    }\n\n    let p = pObj.body;\n    let tex = pObj.texture;\n\n    let pW = size.x * (pGroup.length - i);\n    let pH = size.y;\n\n    let values = {\n      x: xOffset + size.x * i, \n      y: pParams.size * (i) + size.y,\n      w: pW,\n      h: pH\n    };\n    \n    if(pParams.snap){\n      values = snapValues(values, pParams.snap);\n    }\n    values.y = floorY - values.y;\n\n    setPlatformToPosition(p, tex, values);\n  });\n}\n\nconst positionPlatformGroup_rando = (pGroup, pParams, floorY, gameWidth) => {\n  pGroup.forEach((pObj, i) => {\n    let p = pObj.body;\n    let tex = pObj.texture;\n\n    let pW = getValOrRandRange(pParams.width);\n    let pH = getValOrRandRange(pParams.height);\n\n    let values = {\n      x: randBetween([ pParams.xBuffer.left, gameWidth - pW - pParams.xBuffer.right ]),\n      y: pH,\n      w: pW,\n      h: pH\n    };\n    \n    if(pParams.snap){\n      values = snapValues(values, pParams.snap);\n    }\n    values.y = floorY - values.y;\n\n    setPlatformToPosition(p, tex, values);\n\n  });\n}\n\nconst roundSnap = (value, snap) => snap * Math.round(value / snap);\nconst snapValues = (values, snap) => {\n  return {\n    x: roundSnap(values.x, snap),\n    y: roundSnap(values.y, snap),\n    w: roundSnap(values.w, snap),\n    h: roundSnap(values.h, snap)\n  }\n}","const store = {\n  stages: [],\n  stageIdx: 0\n}\n\nconst returnNextStageItem = (manifestStages, nextItemIdx) => {\n  const manifestStageIdx = store.stageIdx;\n\n  if(manifestStageIdx >= manifestStages.length){\n    // console.log(`manifestStageIdx ${manifestStageIdx} is >= ${manifestStages.length}, therefore no stages remain`);\n    return null;\n  }\n\n  const thisStage = manifestStages[manifestStageIdx];\n  const nextItem = thisStage.items[nextItemIdx] || null;\n  if(nextItem){\n    // console.log(`... [${manifestStageIdx}, ${nextItemIdx}]`)\n    return {\n      id: nextItem.id,\n      url: nextItem.url,\n      itemIdx: nextItemIdx,\n      stageIdx: manifestStageIdx\n    };\n  }else{\n    store.stageIdx = store.stageIdx + 1;\n    return returnNextStageItem(manifestStages, 0);\n  }\n}\n\nexport const getNextManifestData = (curItemIdx) => {\n  const nextItemObj = returnNextStageItem(store.stages, curItemIdx);\n  if(nextItemObj){\n    const nextStage = store.stages[nextItemObj.stageIdx]\n\n    return {\n      type: nextStage.type,\n      idx: nextItemObj.itemIdx,\n      id: nextItemObj.id,\n      url: nextItemObj.url\n    }\n  }else{\n    console.log('All manifest items loaded.');\n    // console.log('-------------------------');\n    return null;\n  }\n}\n\nexport const setManifestStages = (stages) => {\n  if(!stages || stages.length === 0){\n    console.error('No manifest items loaded, or there was some error');\n  }\n  store.stages = stages;\n}\n\nglobal.manifestHelper = {\n  getAllData: () => store\n}\n\nexport default store;","import { throttle } from 'throttle-debounce';\n\nconst store = {\n  entries:[-1],  \n  level:0,\n  logIdx:-1,\n  throttleActive: true\n};\n\nconst DEFAULTTHROTTLE_SPEED = 500;\n\nexport const init = (logLevel, throttleSpeed = DEFAULTTHROTTLE_SPEED) => {\n  store.entries = [];\n  store.level = logLevel || 0;\n  store.logIdx = -1;\n  store.throttleSpeed = throttleSpeed;\n  setThrottleSpeed(throttleSpeed);\n}\n\n\nexport const onThrottledLog = (...args) => {\n  if(store.throttleActive){\n    log(args);\n  }\n}\n\nexport let throttledLog = throttle(DEFAULTTHROTTLE_SPEED, false, onThrottledLog);\n\nexport const pause = () => {\n  if(store.throttleActive){\n    log('Logger |');\n    store.throttleActive = !store.throttleActive;\n  }else{\n    log('Logger |>');\n    store.throttleActive = !store.throttleActive;\n  }\n}\n\nexport const setThrottleSpeed = throttleSpeed => {\n  throttledLog = throttle(throttleSpeed, false, onThrottledLog);\n}\n\nexport const doOutput = (logArgs, level) => {\n  if(level === -1) level = store.logLevel;\n\n  //- if level is 'error' then..\n  console.log(...logArgs)\n}\n\nexport const log = (...args) => {\n  doOutput(args, -1);\n}\n\nexport const logSave = (...args) => {\n  store.entries.push(args);\n  store.logIdx = store.entries.length - 1;\n  \n  output();\n}\n\nexport const logQuiet = (...args) => {\n  store.entries.push(args);\n  store.logIdx = store.entries.length - 1;\n}\n\nexport const output = () => {\n  doOutput(store.entries[store.logIdx], store.level);\n}\nexport const outputAll = () => {\n  for (let s = 0; s < store.entries.length; s++){\n    store.logIdx = s;\n    output();\n  };\n}\n\nexport const outputPrevious = () => {\n  if(store.length === 0 || store.logIdx === -1) {\n    return;\n  }else if(store.length === 1 || store.logIdx === 0){\n    doOutput(store.entries[store.logIdx], store.level);\n  }else{\n    store.logIdx--;\n    doOutput(store.entries[store.logIdx], store.level);\n  }\n}\n\nexport const outputNext = () => {\n  if(store.logIdx === store.entries.length - 1){\n    doOutput(store.entries[store.logIdx], store.level);\n  }else{\n    store.logIdx++;\n    doOutput(store.entries[store.logIdx], store.level);\n  }\n}\n\nexport const outputLast = () => {\n  store.logIdx = store.entries.length - 1;\n  if(store.logIdx > -1){\n    console.log('idx', store.logIdx)\n    doOutput(store.entries[store.logIdx], store.level);\n  }\n}\n\n\n\nconst PublicInterface = {\n  init: init,\n  log: log,\n  pause: pause,\n  setThrottleSpeed: setThrottleSpeed,\n  logSave: logSave,\n  logQuiet: logQuiet,\n  doOutput: doOutput,\n  output: output,\n  outputAll: outputAll,\n  outputNext: outputNext,\n  outputPrevious: outputPrevious,\n  outputLast: outputLast,\n  store: store,\n  throttledLog: throttledLog\n}\n\nexport default PublicInterface;","import { createAction } from 'redux-actions';\n\nexport const setTransitionAction = createAction('SET_TRANSITION');\n\nexport const setTransition = (transitionData) => {\n  return dispatch => {\n    dispatch({\n      type: setTransitionAction,\n      payload: transitionData\n    });\n  }\n};\n\nexport const CHAIN_ACTIONS = 'CHAIN_ACTIONS';\nexport const chainActions = (actionInstructions) => {\n  return dispatch => {\n    executeInstructions(actionInstructions, dispatch);\n  }\n}\n\n//- used by the chainActions action\n//- actionInstructions should be [ { action:function, payload:optional }, ... ]\nexport const executeInstructions = (actionInstructions, dispatch) => {\n  return setTimeout(() => {\n    actionInstructions[0].action(actionInstructions[0].payload)(dispatch);\n    actionInstructions.shift();\n\n    if(actionInstructions.length > 0){\n      executeInstructions(actionInstructions, dispatch);\n    }\n  }, actionInstructions[0].delay || 0);\n}\n\n\nexport const slideTransition = (action, payload, dispatch) => {\n  chainActions([\n    {\n      delay: 0,\n      action: setTransition,\n      payload: {\n        label: 'transitionOut'\n      }\n    },\n    {\n      delay: 1000,\n      action: action,\n      payload: payload\n    },\n    {\n      delay: 1000,\n      action: setTransition,\n      payload: {\n        label: 'transitionIn'\n      }\n    }\n  ])(dispatch);\n}\n","import { \n  setManifest,\n  storeManifestItem,\n  loadExternalItem,\n  setActivePetType,\n  setActivePetId,\n  setSettingsValue,\n  setItems,\n  ping\n} from '../actions';\nimport { setTransition } from '../actions/transition';\n\nimport { handleActions } from 'redux-actions';\n\nimport { clamp } from '@util/tools';\nimport { getPetDefinition, setFromPetManifest } from '@util/pet-store';\nimport { setFromSceneManifest, setFromItemManifest } from '@util/item-store';\nimport { getNextManifestData, setManifestStages } from '@util/manifest-helper';\n\nconst VALID_KEYS = [ 'title', 'stages' ];\nconst RESTRICT_KEYS = false;\nconst DEFAULT_PING_RATE = 1000;\nconst DEFAULT_VOLUME = 50;\nconst DEFAULT_ANIMATION_SPEED = 30;\n \nconst initialState = {\n  loadingComplete: false,\n  settings:{\n    pingRate: DEFAULT_PING_RATE,\n    volume: DEFAULT_VOLUME,\n    animationSpeed: DEFAULT_ANIMATION_SPEED\n  },\n  title: 'loading',\n  customData: null,\n  counter: 0,\n  activePetType: null,\n  activePetId: null,\n  ping: 0,\n  nextManifestItem: null,\n  nextExternalItem: null\n}\n\nexport default handleActions({\n  [setManifest.toString()]: (state, action) => {\n    const cleanManifestObj = {};\n    const parsedData = action.payload;\n    const customData = {};\n    for(let key in parsedData){\n      if(VALID_KEYS.indexOf(key) === -1){\n        console.warn(`key supplied in /data.json \"${key}\" is not a valid key`);\n        if(!RESTRICT_KEYS) cleanManifestObj[key] = parsedData[key];\n      }\n      else{\n        cleanManifestObj[key] = parsedData[key];\n        if(key !== 'stages'){\n          customData[key] = parsedData[key];\n        }\n      }\n    }\n\n    let pingRate = state.settings.pingRate;\n    if(parsedData.pingRate !== undefined){\n      try {\n        if(!isNaN(parsedData.pingRate)){\n          pingRate = clamp(parseInt(parsedData.pingRate), 50, 5000);\n        }\n      }catch(e){\n        console.error('there was a problem parsing pingRate');\n      }\n    }\n    \n    // console.log('----------------');\n    // console.log('starting manifest');\n    setManifestStages(parsedData.stages);\n    const nextManifestItem = getNextManifestData(0);\n\n    return {\n      ...state,\n      nextManifestItem,\n      loadingComplete: nextManifestItem === null,\n      settings:{\n        ...state.settings,\n        pingRate\n      },\n      customData\n    }\n  },\n\n  [storeManifestItem.toString()]: (state, action) => {\n    // console.log('storeManifestItem', action.payload);\n    const { manifest, data } = action.payload;\n    // console.log('manifestItem', manifest)\n    if(manifest.type === 'pets'){\n      setFromPetManifest(manifest.id, data, manifest)\n    }else if(manifest.type === 'items'){\n      setFromItemManifest(data, manifest);\n    }else{\n      setFromSceneManifest(data, manifest);\n    }\n\n    if(manifest.isExternal){\n      return {\n        ...state,\n        nextExternalItem: null,\n      }\n    }else{\n      const nextManifestItem = getNextManifestData(manifest.idx + 1);\n      return {\n        ...state,\n        nextManifestItem,\n        loadingComplete: nextManifestItem === null\n      }\n    }\n  },\n\n  [setTransition.toString()]: (state, action) => {\n    return {\n      ...state,\n      transitionLabel: action.payload.label\n    }\n  },\n\n  [loadExternalItem.toString()]: (state, action) => {\n    // console.log('received ', action.payload);\n\n    return {\n      ...state,\n      nextExternalItem: {\n        id: action.payload.id || action.payload.url,\n        idx: 0,\n        type: action.payload.type,\n        url: action.payload.url,\n        isExternal: true\n      }\n    }\n  },\n\n  [setSettingsValue.toString()]: (state, action) => {\n    // console.log('setSettingsValue', action.payload);\n    const settingsKey = action.payload.id;\n    const storedValue = state.settings[settingsKey];\n\n    if(storedValue !== undefined && storedValue !== action.payload.value){\n      return {\n        ...state,\n        settings: {\n          ...state.settings,\n          [settingsKey]: action.payload.value\n        }\n      }\n    }else{\n      return state;\n    }\n  },\n\n  [setActivePetType.toString()]: (state, action) => {\n    // console.log('setActivePetType', action.payload)\n    return {\n      ...state,\n      activePetType: action.payload\n    }\n  },\n\n  [setActivePetId.toString()]: (state, action) => {\n    //- pet existssetPetDefinitions\n    const petDef = getPetDefinition(action.payload);\n    if(petDef){\n      return {\n        ...state,\n        activePetId: action.payload\n      }\n    }else{\n      console.error(`Could not get pet definition for id \"${action.payload}\"`);\n      return {\n        ...state\n      }\n    }\n  },\n\n  [setItems.toString()]: (state, action) => {\n    console.log('setItems', action.payload);\n    let items = state.items || {};\n    action.payload.forEach(i => {\n      items[i.id] = i;\n    });\n\n    return {\n      ...state,\n      items: items\n    }\n  },\n\n  [ping.toString()]: (state) => {\n    return {\n      ...state,\n      ping: state.ping + 1\n    }\n  },\n}, initialState);\n","import { \n  setActivePetId\n} from '../actions';\nimport { \n  addActivity,\n  removeActivity,\n  setActivities,\n  forceBehavior,\n  augmentStat,\n  augmentStats,\n  resetPet,\n  killPet,\n  clickPet\n} from '../actions/pet';\n\nimport { handleActions } from 'redux-actions'; \nimport { getPetDefinition, augmentPetStat, resetPetState, killThisPet } from '@util/pet-store';\nimport { changeQueryObj } from '@util/tools';\n\nconst initialState = {\n  id: null,\n  mood: null,\n  isAlive: true,\n  forcedBehavior: null,\n  activities: []\n};\n\nexport default handleActions({\n  [setActivePetId.toString()]: (state, action) => {\n    const petObj = getPetDefinition(action.payload);\n    //- get stats, etc\n    if(petObj){\n      // const found = allPets.find(p => p.id === activePetId);\n  \n      if(petObj.isAlive){\n        return {\n          ...state,\n          id: petObj.id,\n          isAlive: true,\n          activities: [],\n          mood: null\n        }\n      }else{\n        return {\n          ...state,\n          id: petObj.id,\n          isAlive: false,\n          activities: [],\n          mood: 'DEAD'\n        }\n      }\n    }else{\n      return state;\n    }\n  },\n\n  [augmentStat.toString()]: (state, action) => {\n    augmentPetStat(state.id, action.payload.id, action.payload.value);\n    return state;\n  },\n\n  [augmentStats.toString()]: (state, action) => {\n    action.payload.forEach(statObj => {\n      augmentPetStat(state.id, statObj.id, statObj.value);\n    })\n    return state;\n  },\n\n  [addActivity.toString()]: (state, action) => {\n    const activity = action.payload;\n    // console.log('addActivity > ', activity);\n\n    if(state.activities.indexOf(activity) > -1){\n      return state;\n    }else{\n      return {\n        ...state,\n        activities: [ ...state.activities, activity ]\n      } \n    }\n  },\n\n  [removeActivity.toString()]: (state, action) => {\n    const activity = action.payload;\n    // console.error('removeActivity < ', activity);\n    \n    return {\n      ...state,\n      activities: state.activities.filter(a => a !== activity)\n    }\n  },\n\n  [setActivities.toString()]: (state, action) => {\n    const activities = action.payload;\n    // console.log('setActivities > ', activities);\n    if(activities.sort().join(',') !== state.activities.join(',')){\n      return {\n        ...state,\n        activities: activities.sort()\n      } \n    }else{\n      return state;\n    }\n  },\n\n  [forceBehavior.toString()]: (state, action) => {\n    const newBehavior = state.forcedBehavior !== action.payload ? action.payload : null;\n    return {\n      ...state,\n      forcedBehavior: newBehavior\n    }\n  },\n\n  [resetPet.toString()]: (state, action) => {\n    const petId = action.payload;\n\n    resetPetState(petId);\n\n    return {\n      ...state,\n      isAlive: true,\n      mood: null,\n      activities: []\n    }\n  },\n\n  [killPet.toString()]: (state, action) => {\n    console.log(\" KILL \", action.payload);\n    killThisPet(action.payload);\n\n    return {\n      ...state,\n      isAlive: false,\n      mood: 'DEAD',\n      activities: []\n    }\n  },\n\n  [clickPet.toString()]: (state, action) => {\n    const petId = action.payload;\n\n    if(state.isAlive){\n      killThisPet(action.payload);\n  \n      return {\n        ...state,\n        isAlive: false,\n        mood: 'DEAD',\n        activities: []\n      }\n    }else{\n      resetPetState(petId);\n  \n      return {\n        ...state,\n        isAlive: true,\n        mood: null,\n        activities: []\n      }\n    }\n\n  }\n\n  \n}, initialState);","import { combineReducers } from 'redux';\nimport data from './reducers/data';\nimport activePet from './reducers/active-pet';\n\nexport default combineReducers({\n  data,\n  activePet\n})\n","import { createStore, applyMiddleware, compose } from 'redux'\nimport thunk from 'redux-thunk'\nimport rootReducer from '@store/index.js'\n\nconst initialState = {}\nconst enhancers = []\nconst middleware = [thunk]\n\nif (process.env.NODE_ENV === 'development') {\n  const devToolsExtension = window.__REDUX_DEVTOOLS_EXTENSION__\n\n  if (typeof devToolsExtension === 'function') {\n    enhancers.push(devToolsExtension())\n  }\n}\n\nconst composedEnhancers = compose(\n  applyMiddleware(...middleware),\n  ...enhancers\n)\n\nexport default createStore(\n  rootReducer,\n  initialState,\n  composedEnhancers\n)\n","import React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { Route, withRouter, Redirect } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { setActivePetId, loadExternalItem, setItems } from '@store/actions';\nimport { selectPetFromSearchQuery } from '@store/selectors/routes';\nimport { selectIsLoadingComplete} from '@store/selectors';\nimport { saveAllPetStatsToCookieNow } from '@util/pet-store';\nimport { themeGet } from '@themes/';\n\nimport Loader from './loader';\nimport Pinger from './pinger';\nimport Main from './main';\nimport Editor from '../editor';\nimport Menu from '@scenes/menu';\n\nconst S = {};\nS.App = styled.section`\n  position:absolute;\n  left:0;\n  top:0;\n  right:0;\n  bottom:0;\n  overflow:hidden;\n\n  background-color:  ${themeGet('color', 'black')};\n  color: ${themeGet('color', 'blue')};\n`\n\nclass AppContainer extends Component {\n  constructor(){\n    super();\n    global.spriteScale = 1; //- used to change sprite size/bounds, gets updated in cage.js when window is resized\n\n    window.addEventListener('beforeunload', (e) => {\n      this.onExitPage();\n    });\n  }\n\n  onExitPage(){\n    if(this.props.loadingComplete) saveAllPetStatsToCookieNow();\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if(this.props.loadingComplete && !prevProps.loadingComplete){\n      this.onLoadComplete();\n    }\n  }\n\n  onLoadComplete(){\n    console.log('Load complete.');\n    this.props.setItems(global.itemStore.getItems());\n    this.loadDeeplinkedPet();\n  }\n\n  /* if query starts with \"external_\", then its a url to an external pet/manifest file and should be loaded */\n  loadDeeplinkedPet(force){\n    const petQuery = selectPetFromSearchQuery(this.props.location.search);\n\n    if(petQuery && (force || !this.props.activePetId)){\n      const queryPieces = petQuery.split('external_');\n      if(queryPieces.length > 1){\n        console.log(`--> Loading external pet with id \"${queryPieces[1]}`);\n        \n        this.props.loadExternalItem({ type: 'pets', url: queryPieces[1], id: `external_${queryPieces[1]}` });\n      }else{\n        this.props.setActivePetId(queryPieces[0]);\n      }\n    }\n  }\n\n  render(){\n    return(\n      <S.App id=\"app\" >\n        <Pinger />\n        <Loader/>\n        <Menu />\n        <Route exact path=\"/\" >\n          <Redirect to=\"/pet\" />\n        </Route>\n        <Route path='/pet' component={Main}></Route>\n        <Route path='/editor' component={Editor}></Route>\n      </S.App>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state, props) => ({\n  loadingComplete: selectIsLoadingComplete(state)\n})\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    { setActivePetId, loadExternalItem, setItems },\n    dispatch\n  );\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(AppContainer))\n","\nimport { getSearchObj } from '@util/tools';\n\nexport const selectPetFromSearchQuery = queryString => {\n  if(!queryString) return null;\n\n  const obj = getSearchObj(queryString);\n  return obj.pet || null;\n}","import { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport fetch from 'node-fetch';\nimport { jsonc } from 'jsonc';\n\nimport { setManifest, storeManifestItem, setActivePetId } from '@store/actions';\nimport { selectNextManifestItem, selectNextExternalItem } from '@store/selectors';\n\nlet dataLocation = './data';\n\nclass LoadHelper extends Component {\n\n  constructor(){\n    super();\n\n    this.loadAllData();\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    const nextManifestItem = this.props.nextManifestItem;\n    if(nextManifestItem){\n      if(!prevProps.nextManifestItem || prevProps.nextManifestItem.id !== nextManifestItem.id){\n        //- load each pet def\n        this.loadManifestItem(nextManifestItem);\n      }\n    }\n    \n    const nextExternalItem = this.props.nextExternalItem;\n    if(nextExternalItem){\n      if(!prevProps.nextExternalItem || prevProps.nextExternalItem.url !== nextExternalItem.url){\n        //- load each pet def\n        this.loadManifestItem(nextExternalItem);\n        global.setTimeout(() => {this.props.setActivePetId(nextExternalItem.id)}, 500);\n      }\n    }\n  }\n\n  loadAllData(){\n    this.loadManifestData('manifest', 'manifest.jsonc');\n  }\n\n  loadManifestItem(manifestItemObj){\n    if(!manifestItemObj){\n      console.error('Loader.loadManifestItem, received null manifestItemObj');\n    }\n    // console.log('loadManifestItem', manifestItemObj)\n\n    const url =  `${manifestItemObj.url}/data.jsonc`;\n    // const manifestLabel = `( [${manifestItemObj.type}]: ${manifestItemObj.id} )`;\n    // console.log(`reading manifestItem data for ${manifestLabel} from '${url}'`);\n\n    fetch(url, {\n      mode: 'cors'\n    })\n      .then(res => res.text())\n      .then(\n        text => jsonc.parse(text), \n        err => {\n          console.error(`Error fretching item from manifestObj ${manifestItemObj} from ${url}`, err);\n        }\n      ) //- bad url responds with 200/ok? so this doesnt get thrown\n      .then(\n        json => {\n          // console.log(`manifestItem ${manifestLabel} was read successfully`, json);\n          this.props.storeManifestItem({ manifest: manifestItemObj, data: json })\n\n          return true;\n        }, \n        err => {\n          console.error(`Error parsing data from manifestObj ${manifestItemObj} (or the url (${url}) was bad), skipping`, err?.stack || err);\n        }\n      );\n  }\n\n  loadManifestData(type, location){\n    const url =  `${dataLocation}/${location}`;\n    console.log(`reading ${type} data from '${url}'`);\n\n    fetch(url)\n      .then(res => res.text())\n      .then(\n        text => {\n          return jsonc.parse(text);\n        }, \n        err => {\n          console.error(`Error fretching ${type} data from ${url}`, err);\n        }\n      ) //- bad url responds with 200/ok? so this doesnt get thrown\n      .then(\n        json => {\n          // console.log(`${type} data was read successfully`, json);\n          this.props.setManifest(json);\n          return true;\n        }, \n        err => {\n          console.error(`Error parsing ${type} data (or the url was bad), skipping`, err?.stack || err);\n        }\n      );\n  }\n\n\n  render(){\n    return null;\n  }\n}\n\nconst mapStateToProps = (state, props) => ({\n  nextManifestItem: selectNextManifestItem(state),\n  nextExternalItem: selectNextExternalItem(state)\n})\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    { setManifest, storeManifestItem, setActivePetId  },\n    dispatch\n  )\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(LoadHelper)\n\n","import { Component } from 'react';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { ping } from '@store/actions';\nimport { selectSettingPingRate } from '@store/selectors';\n\nrequire('@themes/app.scss');\n\nclass Pinger extends Component {\n\n  constructor(){\n    super();\n    this.statPinger = null;\n\n    this.state = {\n      pingIdx: 0\n    }\n  }\n\n  componentDidMount(){\n    this.props.ping();\n    this.startStatPinger();\n  }\n\n  onPing(){\n    this.props.ping();\n\n    if(this.props.pingRate && this.props.pingRate > 0){\n      this.startStatPinger(this.props.pingRate);\n    }else{\n      this.killStatPinger();\n    }\n\n  }\n\n  startStatPinger(pingRate){\n    this.killStatPinger();\n\n    this.statPinger = global.setTimeout(() => {\n      this.onPing();\n    }, this.props.pingRate);\n  }\n\n  killStatPinger(){\n    if(this.statPinger){\n      global.clearInterval(this.statPinger);\n      this.statPinger = null;\n    }\n  }\n\n  render(){\n    return null;\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  pingRate: selectSettingPingRate(state)\n})\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    { ping },\n    dispatch\n  )\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Pinger)\n\n","import React, { Component } from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { \n  selectActiveScene\n} from '../../../store/selectors';\n\nconst S = {};\nS.Scene = styled.div`\n  position:absolute;\n  top:0;\n  left:0;\n  right:0;\n  bottom:0;\n  z-index:-1;\n\n  .footer-image{\n    width: 100%;\n    height: 100%;\n  }\n\n  ${p => p.type === 'responsive' && css`\n    .background-image{\n      width: 100%;\n      height: 100%;\n      background-size: cover;\n    }\n  `}\n  \n  ${p => p.type === 'static' && css`\n    .background-image{\n      width: 100%;\n      height: 100%;\n      background-repeat: no-repeat;\n      background-position:50% 50%;\n    }\n  `}\n\n`\n\nS.SceneFloor = styled.div`\n  position:absolute;\n  bottom:0;\n  left:0;\n  right:0;\n  height: ${p => `${p.height}px`};\n\n  background-image: url(${p => p.image});\n  background-color: ${p => p.color};\n`\n\nS.SceneBackground = styled.div`\n  position:absolute;\n  top:0;\n  left:0;\n  right:0;\n  bottom:0;\n  z-index:-1;\n\n`\n\nclass Scene extends Component {\n  render(){\n    // console.log('R: Scene');\n    const { \n      activeScene\n    } = this.props;\n\n\n    if(!activeScene){\n      global.alert('ERROR: scene failed to load');\n      return null;\n    }else{\n      const bgImage = activeScene.background.imageUrl ? activeScene.background.imageUrl : null;\n      const type = activeScene.type;\n      /*\n        TODO, using styled components with background-image was causing flickering for some reason (not because of re-render)\n        so for now, just made them non-styled components\n      */\n      return(\n        <S.Scene type={type}>\n          { activeScene.floor && (\n            <S.SceneFloor height={activeScene.floor.height} color={activeScene.floor?.color} >\n              <div className={'footer-image'} style={{ backgroundImage: `url(${activeScene.floor?.imageUrl})`}} />\n            </S.SceneFloor>\n          )}\n          <S.SceneBackground style={{ backgroundColor: activeScene.background.color }} >\n            <div className={'background-image'} style={{ backgroundImage: `url(${bgImage})`, ...activeScene.background.styles }} />\n          </S.SceneBackground>\n        </S.Scene>\n      );\n    }\n\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  activeScene: selectActiveScene(state)\n})\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {},\n    dispatch\n  )\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Scene)\n\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { \n  createGame, \n  updateBounds, \n  alterPet,\n  alterItems,\n  updateScene,\n  updatePetAnimationLabel,\n  updatePetActivities,\n  updatePetMortality\n} from './game';\nimport { debounce } from 'throttle-debounce';\nimport { \n  selectActivePetGraphics,\n  selectActivePetAnimationLabel,\n  selectActivePetIsAlive,\n  selectPhaserPet,\n  selectActivePetActivities,\n  selectActiveScene,\n  selectActiveItems\n} from '@store/selectors';\n\nimport {\n  addActivity,\n  setActivities,\n  removeActivity,\n  augmentStats\n} from '@store/actions/pet';\n\nconst S = {};\nS.PhaserContainer = styled.div`\n  display:block;\n`;\n\nclass PhaserComponent extends Component {\n  componentDidMount(){\n    createGame({\n      id: `phaser-container-${this.props.id}`\n    });\n\n    this.debouncedUpdateBounds = debounce(500, false, updateBounds);\n    this.debouncedUpdateBounds(0, 0, this.props.width, this.props.height);\n    // changePet(this.props.activePet, this.props.activePetGraphics);\n    alterItems(this.props.activeItems);\n    alterPet(this.props.phaserPet);\n    updateScene(this.props.activeScene);\n\n    global.game.onInterface = (event, payload) => {\n      switch(event){\n        case 'addActivity': this.props.addActivity(payload);\n          break;\n        case 'removeActivity': this.props.removeActivity(payload);\n          break;\n        case 'augmentStats': this.props.augmentStats(payload);\n          break;\n        case 'sendStatus': this.onSendStatus(payload);\n          break;\n        default: console.error('invalid interface command', event);\n      }\n    }\n  }\n\n  onSendStatus(activities){\n    this.props.setActivities(activities);\n  }\n\n  onEmitter(e){\n    console.error('onEmitter', e)\n  }\n\n  componentDidUpdate(prevProps){\n    if(prevProps.width !== this.props.width || prevProps.height !== this.props.height){\n      this.debouncedUpdateBounds(0, 0, this.props.width, this.props.height);\n    }\n\n    if(prevProps.phaserPet !== this.props.phaserPet){\n      // console.log('phaserPet', this.props.phaserPet);\n      alterItems(global.itemStore.getItems());\n      alterPet(this.props.phaserPet);\n    }\n\n    if(prevProps.activePetIsAlive !== this.props.activePetIsAlive){\n      updatePetMortality(this.props.phaserPet.id, this.props.activePetIsAlive);\n    }\n\n    if(prevProps.activePetActivities !== this.props.activePetActivities){\n      updatePetActivities(this.props.phaserPet.id, this.props.activePetActivities)\n    }\n\n    if(prevProps.animationLabel !== this.props.animationLabel){\n      updatePetAnimationLabel(this.props.phaserPet.id, this.props.animationLabel);\n    }\n\n    if(prevProps.activeScene !== this.props.activeScene){\n      updateScene(this.props.activeScene)\n    }\n  }\n\n  render(){\n    return(\n      <S.PhaserContainer id={`phaser-container-${this.props.id}`} />\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  phaserPet: selectPhaserPet(state),\n  activePetGraphics: selectActivePetGraphics(state),\n  activePetIsAlive: selectActivePetIsAlive(state),\n  animationLabel: selectActivePetAnimationLabel(state),\n  activePetActivities: selectActivePetActivities(state),\n  activeScene: selectActiveScene(state),\n  activeItems: selectActiveItems(state)\n});\n\nconst mapDispatchToProps = dispatch => (\n  bindActionCreators(\n    { addActivity, removeActivity, setActivities, augmentStats },\n    dispatch\n  )\n);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PhaserComponent);\n\n","import Phaser from 'phaser';\nimport PetBrain from './pet-brain';\nimport Events from '../event-emitter';\n\n\nconst LAZY_STATS = {\n  speed: 250,\n  jumpHeight: 500,\n  bounciness: 0,\n  drag: 300,\n  roamChance: .01\n}\n\nclass Entity extends Phaser.Physics.Arcade.Sprite {\n  constructor (scene, physicsGroup, spawnData) {\n    super(scene, spawnData.x, spawnData.y, spawnData.id);\n\n    this.id = spawnData.petInfo.id;\n    this.stats = spawnData.stats || {};\n    console.log('spawned with petInfo', spawnData.petInfo)\n    const firstSheetKey = Object.keys( spawnData.petInfo?.sprites)[0];\n\n    this.spriteScale =  spawnData.petInfo.sprites[firstSheetKey].scale || 1;\n    const frameDims =  spawnData.petInfo.sprites[firstSheetKey].frameDims || [ 0, 0 ];\n\n    // maybe remove later? adjusts hitbox for sprite\n    const frameSqueeze =  spawnData.petInfo.sprites[firstSheetKey].frameSqueeze || { x: 0, y: 0, w: 0, h: 0 };\n\n    // sends updates back to redux (activities, etc)\n    this.canSendUpdates = spawnData.canSendUpdates;\n\n    //- custom properties\n\n    //- parent stuff\n    scene.add.existing(this);\n    if(physicsGroup){\n      physicsGroup.add(this);\n    }else{\n      scene.physics.add.existing(this);\n    }\n    \n    //- physics\n    this.setBounce(LAZY_STATS.bounciness);\n    this.setCollideWorldBounds(true);\n    this.allowGravity = false;\n\n    //- squeeze in hit box from edge of sprite\n    this.body.setSize(frameDims[0] + frameSqueeze.w, frameDims[1] + frameSqueeze.h);\n    this.body.offset.x = frameSqueeze.x;\n    this.body.offset.y = frameSqueeze.y;\n    this.body.setDrag(LAZY_STATS.drag);\n\n    global.pet = this;\n    this.isAlive = true;\n    this.personality = spawnData.petInfo.personality;\n    this.activities = [];\n\n    \n    this.petBrain = new PetBrain(this.onBrainDoComplete.bind(this), this.onBrainThinkComplete.bind(this));\n    this.petBrain.setPersonality(this.personality);\n    this.petBrain.setActive();\n  }\n\n\n  update(){\n    // console.log()\n    //- turn if facing left\n    if(this.flipX){\n      if(this.body.velocity.x >= 0) this.flipX = false;\n    }else{\n      if(this.body.velocity.x < 0) this.flipX = true;\n    }\n\n    \n    if(this.isAlive){\n      this.checkRoamingStuff();\n    }\n  }\n\n  throttledUpdate(){\n\n    if(this.isAlive){\n      // if you wanna turn off thinking for some reason (ex, user input)\n      // this.petBrain.pullThePlug();\n      this.petBrain.think([], []);\n    }\n\n\n    // console.log('throttledUpdate');\n\n    if(this.canSendUpdates){\n      /* RIGHT NOW, used for sending status back to the react app */\n      let activities = [];\n      if(!this.body.onFloor() && Math.abs(this.body.velocity.y) > .5){\n        activities.push('JUMPING');\n      }\n      if(Math.abs(this.body.velocity.x) > .5){\n        activities.push('WALKING');\n      }\n      if(this.isRoaming){\n        activities.push('ROAMING');\n      }\n  \n      this.sendActivities(activities);\n    }\n  }\n\n  onBrainDoComplete(){\n    this.stopRoaming();\n  }\n\n  onBrainThinkComplete(){\n    this.startRoaming();\n  }\n\n  startRoaming(){\n    this.isRoaming = true;\n  }\n\n  stopRoaming(forced){\n    this.isRoaming = false;\n  }\n\n  updateActivities(activities){\n    // console.log('updateActivities', activities)\n    this.activities = activities;\n  }\n\n  updateMortality(isAlive){\n    this.isAlive = isAlive;\n    if(isAlive){\n      this.petBrain.setActive(true);\n    }else{\n      this.petBrain.setActive(false);\n    }\n  }\n\n  hasActivity(activity){\n    return this.activities.indexOf(activity) > -1;\n  }\n  \n  setBehaviors(behaviors){\n    this.behaviors = behaviors;\n  }\n\n  hasBehavior(behavior){\n    return this.behaviors.indexOf(behavior) > -1;\n  }\n\n  checkRoamingStuff(){\n    \n    if(this.body.onWall()){\n      this.flipAndMove(1);\n    }else{\n      if(this.body.onFloor() && this.hasActivity('ROAMING')){\n        //idle movements\n        if(Math.random() < this.personality.jumpChance){\n          this.jump(20);\n        }else{\n          this.keepRoaming(1);\n        }\n      }\n    }\n  }\n\n  flipAndMove(mod = 1){\n    if(this.body.velocity.x > 0){\n      this.move(-1 * mod);\n    }else{\n      this.move(1 * mod);\n    }\n  }\n\n  keepRoaming(){\n    let mod = 1;\n    if(this.body.velocity.x < 0){\n      mod = -1;\n    }\n\n    this.move(mod);\n  }\n\n  jump(mod = 0){\n    if(this.body.onFloor()){\n      this.setVelocityY(-1 * LAZY_STATS.jumpHeight);\n      // console.log('JUMP')\n      // this.addActivity('JUMPING');\n    }\n  }\n\n  move(modifier){\n    this.body.velocity.x = LAZY_STATS.speed * modifier;\n  }\n\n\n  // hasActivity(activityKey){\n  //   return this.activities.indexOf(activityKey) > -1\n  // }[]\n\n  applyItemEffects(itemEffects){\n    console.log('pet.applyItemEffect', itemEffects);\n    console.log('doin', itemEffects);\n    Events.emit('interface', 'augmentStats', itemEffects);\n  }\n\n  playAnimation(animKey){\n    // console.log('playAnimation:', this.id, animKey)\n    if(this.curAnimation !== animKey){\n      this.curAnimation = animKey;\n      this.anims.play(animKey).setScale(this.spriteScale).setOrigin(0);\n    }\n  }\n\n  addActivity(activity){\n    if(!this.hasActivity(activity)){\n      // console.log('pet.emit', 'addActivity')\n      Events.emit('interface', 'addActivity', activity);\n    }\n  }\n\n  sendActivities(activities){\n    Events.emit('sendStatus', activities);\n  }\n\n  removeActivity(activity){\n    if(this.hasActivity(activity)){\n      console.log('removiong with ', this.activities)\n      Events.emit('interface', 'removeActivity', activity);\n    }\n  }\n}\n\n\nconst updatePetInfo = (petInfo) => {\n  console.log('Pet.updatePetInfo', petInfo);\n}\n\n\nconst exports = {\n  Entity,\n  updatePetInfo\n}\n\nexport default exports;","import { randBetween } from '@util/tools';\n\nexport const STATUS = {\n  BRAINDEAD: 0,\n  THINKING: 1,\n  DOING: 2\n};\n\nexport const DEFAULT_PERSONALITY = {\n  \"thinkRange\": [ 500, 2000 ],\n  \"doRange\": [ 500, 2000 ],\n  \"jumpChance\": 0\n}\n\nexport const TIME_RANGE = {\n  THINKING: [ 200, 2000 ],\n  DOING: [ 200, 2000 ]\n};\n\nclass PetBrain {\n  constructor(onDoComplete, onThinkComplete) {\n    this.onThinkComplete = onThinkComplete;\n    this.onDoComplete = onDoComplete;\n\n    this.timer = null;\n    this.status = STATUS.BRAINDEAD;\n    this.isActive = false;\n  }\n\n  getStatus(){\n    return this.name;\n  }\n\n  pullThePlug(){\n    this.status = STATUS.BRAINDEAD;\n    this.killTimer();\n  }\n\n  startTimer(type, callback, timerDuration = 1000){\n    this.killTimer();\n    this.timer = window.setTimeout(() => {\n      this.onTimerComplete(type, callback);\n    }, timerDuration)\n  }\n\n  getPersonality(){\n    return this.personality || DEFAULT_PERSONALITY;\n  }\n\n  killTimer(){\n    if(this.timer){\n      window.clearTimeout(this.timer);\n      this.timer = null;\n    }\n  }\n\n  getDuration(statusType){\n    if(statusType === STATUS.THINKING){\n      return randBetween(this.getPersonality().thinkRange);\n    }else if(statusType === STATUS.DOING) {\n      return randBetween(this.getPersonality().doRange);\n    }else{\n      console.error(`unexpected duration type \"${statusType}\"`);\n      return 0;\n    }\n  }\n\n  setActive(state = true){\n    this.isActive = state;\n  }\n\n  setPersonality(personality){\n    this.personality = { ...this.getPersonality(), ...personality };\n  }\n\n  think(stats, inputs){\n    if(inputs.length > 0){\n      // right now, handled outside\n      // this.pullThePlug();\n    }else{\n      // console.log('think', this.status)\n      if(this.status === STATUS.BRAINDEAD){\n        // should i do something?\n        if(this.timer){\n          // no, busy\n        }else{\n          this.startDoing();\n        }\n      }\n    }\n  }\n\n  startDoing(callback){\n    this.status = STATUS.DOING;\n    this.startTimer(this.status, callback, this.getDuration(STATUS.DOING));\n  }\n\n  startThinking(callback){\n    this.status = STATUS.THINKING;\n    this.startTimer(this.status, callback, this.getDuration(STATUS.THINKING));\n  }\n\n  onTimerComplete(type, callback){\n    if(type !== this.status){\n      console.error('I havent really decided what to use yet, but this is unexpected')\n    }\n\n    switch (this.status){\n      case STATUS.THINKING: \n        if(this.isActive){\n          // trigger the DO\n          this.onThinkComplete && this.onThinkComplete();\n          callback && callback();\n          this.startDoing();\n        }\n        break;\n      case STATUS.DOING:\n        if(this.isActive){\n          // trigger the THINK\n          this.onDoComplete && this.onDoComplete();\n          callback && callback();\n          this.startThinking();\n        }\n      break;\n      case STATUS.BRAINDEAD:\n        // do nothing, shouldnt be here anyways\n        console.error('should not have finished a timer in a different status')\n        break;\n      default: \n        break;\n    }\n    // move to the next state\n    // do the callback\n  }\n\n\n}\n\nexport default PetBrain;\n\n\n/*\n  (loop start)\n    based on [ input, status ] then [ moods, stats, ]\n    decide next: X\n    start it:\n      - animation[]\n      - activity\n  (dynamic time)\n    idle animation, \n    start think...\n  (dynamic time)\n    repeat loop\n*/","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { getColor } from '@themes/';\nimport { LilButton } from '@components/ui/button';\n\nconst S = {};\nS.Wrapper = styled.div`\n  position:relative;\n\n  &:hover{\n    .statEventDetail{\n      opacity:1;\n    }\n  }\n`\n\n\nS.CooldownBar = styled.div`\n  width:100%;\n  background-color: ${getColor('grey')};\n  height:5px;\n\n  >div{\n    background-color: ${getColor('blue')};\n    height:100%;\n    transition: width .1s linear;\n  }\n`\n\nclass StatEventButton extends Component {\n  constructor(props){\n    super(props);\n\n    this.cooldownTimer = null;\n\n    this.state = {\n      isCooling: false,\n      coolAt: null\n    }\n  }\n\n  coolDownComplete(){\n    this.setState({\n      isCooling:false,\n      coolAt:null\n    });\n  }\n\n  startCooldown(cooldown){\n    this.setState({\n      isCooling: true,\n      coolAt: new Date().getTime() + cooldown\n    });\n    this.startCooldownTimer(cooldown);\n  }\n\n  startCooldownTimer(cooldown){\n    this.killCooldownTimer();\n    this.cooldownTimer = global.setTimeout(() => {\n      this.coolDownComplete();\n    }, cooldown)\n  }\n\n  killCooldownTimer(){\n    if(this.cooldownTimer){\n      global.clearTimeout(this.cooldownTimer);\n      this.cooldownTimer = null;\n    }\n  }\n\n\n  onButtonClick(statEventObj){\n    // console.log(statEventObj);\n    // console.log('affecting stats: ', statEventObj.statEffects);\n    // console.log('with cooldown', statEventObj.cooldown);\n\n    if(this.state.isCooling){\n      //- if button uses the real disabled, this wont happen\n      console.error('ITEM IS STILL COOLING');\n    }else{\n      if(statEventObj.cooldown){\n        this.startCooldown(statEventObj.cooldown);\n      }\n      this.triggerStatEffects(statEventObj.statEffects);\n    }\n  }\n\n  triggerStatEffects(statEffects){\n    statEffects.forEach(sE => {\n      if(sE.immediate){\n        this.props.onImmediateUpdate(sE.id, sE.immediate);\n      }\n    })\n  }\n\n  renderTooltip(statEventObj){\n\n    let retString ='';\n    statEventObj.statEffects.forEach((sE,idx) => {\n      if(idx > 0) retString += '\\n';\n      retString += `${sE.id}:`;\n      if(sE.immediate){\n        retString += sE.immediate > 0 ? `+${sE.immediate}` : `${sE.immediate}`;\n      }\n    });\n\n    if(statEventObj.cooldown){\n      retString += `\\ncooldown: ${statEventObj.cooldown}`;\n    }\n\n    return retString;\n  }\n\n  getCooldownWidth(cooldown){\n    if(cooldown){\n      if(!this.state.isCooling) return '100%';\n      const percDone = (this.state.coolAt - new Date().getTime()) / cooldown;\n      return Math.round(percDone * 100) + '%'\n    }else{\n      return null;\n    }\n  }\n\n  render(){\n    const { statEventObj } = this.props;\n    const cooldownWidth = this.getCooldownWidth(statEventObj.cooldown);\n\n    return (\n      <S.Wrapper >\n        <LilButton \n          text={statEventObj.label} \n          onClick={e => this.onButtonClick(statEventObj)} \n          isDisabled={this.state.isCooling}\n          tooltip={this.renderTooltip(statEventObj)}>\n        </LilButton>\n        {cooldownWidth && (\n          <S.CooldownBar>\n            <div style={{width: cooldownWidth }} />\n          </S.CooldownBar>\n        )}\n      </S.Wrapper>\n    );\n  }\n}\n\nexport default StatEventButton;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nimport { \n  setActivePetType, \n  setActivePetId,\n  loadExternalItem\n} from '@store/actions';\n\nimport { \n  getActivePetType,\n  getActivePetId,\n  getCounter,\n  selectPetTaxonomy,\n  selectActivePets\n} from '@store/selectors';\n\nimport DropMenu from '@components/ui/dropmenu';\nimport { LilButton } from '@components/ui/button';\n\nconst S = {};\nS.Body = styled.div`\n  ul{\n    padding:0;\n    margin: 0;\n    list-style:none;\n\n    >li{\n      display: inline-block;\n      width:100%;\n\n      &:last-of-type{\n        margin-bottom: 2rem;\n      }\n    }\n  }\n`;\n\n\nclass PetSelection extends Component {\n\n  onSelectPet(id){\n    this.props.history.push({\n      search: `?pet=${id}`\n    });\n    this.props.setActivePetId(id);\n    this.props.onSelectPet(id);\n  }\n\n  showLoadPrompt(){\n    const url = global.prompt('Enter URL to directory containing pet manifest and assets. \\n (use the provided url to load the raccoon externally)', 'http://thomasyancey.com/projects/virtualpet-external/pets/rizzo-raccoon');\n    if(url){\n      this.props.loadExternalItem({ type: 'pets', url: url, id: `external_${url}` });\n    }\n  }\n\n  render(){\n    const { \n      taxonomy,\n      activePetType, \n      activePetId,\n      activeObjects, \n      setActivePetType,\n    } = this.props;\n\n    return(\n      <S.Body>\n        <ul>\n          <li key={0}>\n            <LilButton text={'Load external'} onClick={e => this.showLoadPrompt()} />\n          </li>\n          {taxonomy.map((c, i) => (\n            <li key={`${i}-${c.type}`}>\n              <DropMenu \n                text={c.type} \n                isActive={c.type === activePetType} \n                onClick={() => setActivePetType(c.type)}\n                onItemClick={(payload, e) => this.onSelectPet(payload)}\n                activeId={activePetId}\n                items={activeObjects.map(aO => ({ ...aO, text:aO.name, subText:aO.animal }))}\n                />\n            </li>\n          ))}\n        </ul>\n      </S.Body>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  activePetType: getActivePetType(state),\n  activePetId: getActivePetId(state),\n  counter: getCounter(state),\n  taxonomy: selectPetTaxonomy(state),\n  activeObjects: selectActivePets(state),\n})\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    { setActivePetType, setActivePetId, loadExternalItem },\n    dispatch\n  )\n\nexport default withRouter(connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PetSelection));\n\n","import React, { Component } from 'react';\nimport styled, { css } from 'styled-components';\nimport { themeGet, shadeColor } from '@themes/';\nimport ReactImageFallback from 'react-image-fallback';\nconst S = {};\nS.MenuLabel = styled.div`\n`\n\nS.DropMenu = styled.div`\n  cursor: pointer;\n  padding: 1rem;\n  font-size:3rem;\n  font-weight: 600;\n  margin-top: 1rem;\n  width:100%;\n\n  overflow:hidden;\n \n  background-color: ${themeGet('color', 'blue')};\n  color: ${themeGet('color', 'white')};\n  text-shadow: .5px .5px 1.5px ${themeGet('color', 'black')};\n\n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-radius:1rem;\n  border-color:  rgba(0, 0, 0, .2) rgba(255, 255, 255, .2) rgba(255, 255, 255, .2) rgba(0, 0, 0, .2);\n  box-shadow: -.1rem -.1rem .5rem black;\n\n  &:hover{\n    background-color: ${shadeColor('blue', 10)};\n    text-shadow: 1.5px 1.5px 1.5px ${themeGet('color', 'black')};\n    transform: translate(-1px, -1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n\n  &:active{\n    background-color: ${shadeColor('blue', -10)};\n    transform: translate(.5px, 1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n`;\n\n\n\nS.DropItem = styled.div`\n  padding:2rem 2rem;\n  text-align:right;\n  margin-top: 2rem;\n  max-height:15rem;\n  position:relative;\n\n  >*{\n    :first-child{\n    }\n    :last-child{\n      flex:1;\n    }\n  }\n\n\n  color: ${themeGet('color', 'white')};\n  text-shadow: .5px .5px 1.5px ${themeGet('color', 'black')};\n  background-color: ${themeGet('color', 'blue')};\n\n  border: .2rem solid rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.2) rgba(255, 255, 255, 0.2);\n  border-radius: 1rem;\n  box-shadow: .1rem .1rem .5rem black;\n\n  transition: background-color .1s ease-out;\n\n  &:hover{\n    background-color: ${shadeColor('blue', 10)};\n    text-shadow: 1.5px 1.5px 1.5px ${themeGet('color', 'black')};\n    transform: translate(-1px, -1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n  \n  &:active{\n    background-color: ${shadeColor('blue', -10)};\n    transform: translate(.5px, 1px);\n    \n    transition: background-color .1s ease-out, transform .1s ease-out;\n  }\n\n  ${p => p.isActive && css`\n    color: ${themeGet('color', 'yellow')};\n    text-shadow: 1px 1px 1.5px ${themeGet('color', 'black')};\n    background-color: ${themeGet('color', 'green')};\n\n    &:hover{\n      background-color: ${shadeColor('green', 10)};\n    }\n  `}\n\n  >div{\n    display:inline-block;\n    vertical-align:middle;\n  }\n`\n\nS.DropItemImgContainer = styled.div`\n  width:106px;\n  height:106px;\n\n  img{\n    box-shadow: ${themeGet('shadow', 'z2')};\n    border: .5rem solid ${themeGet('color', 'white')};\n    border-radius: 50%;\n    width:auto;\n    height:100%;\n  }\n\n`;\n\nS.DropItemLabel = styled.div`\n  width:calc(100% - 106px);\n`;\n\nS.DropItems = styled.div`\n`;\n\n// export const DropMenu = ({ text, isActive, onClick, style, items = [] }) => {\nexport default class DropMenu extends Component {\n\n  constructor(props){\n    super(props);\n\n    this.state = {\n      isOpen: false\n    }\n  }\n\n  onItemClicked(payload, e){\n    if(this.props.onItemClick){\n      this.props.onItemClick(payload, e);\n    }\n  }\n  \n  render(){\n    const { \n      text,\n      isActive, \n      activeId,\n      onClick,\n      style, \n      items\n    } = this.props;\n\n    return (\n      <S.DropMenu isActive={isActive} onClick={(e) => onClick && onClick(e)} style={style} >\n        <S.MenuLabel>{ text }</S.MenuLabel>\n        <S.DropItems>\n          {isActive && items.map((i, idx) => (\n            <DropItem key={idx} isActive={i.id === activeId} thumbnail={`${i.dir}/assets/${i.thumbnail}`} text={i.text} subText={i.subText} onClick={e => this.onItemClicked(i.id, e)} />\n          ))}\n        </S.DropItems>\n      </S.DropMenu>\n    );\n  }\n}\n\n\nexport const DropItem = ({ text, subText, isActive, onClick, style, thumbnail }) => {\n  return (\n    <S.DropItem isActive={isActive} onClick={(e) => onClick && onClick(e)} style={style} >\n      <S.DropItemImgContainer>\n        <ReactImageFallback\n          src={thumbnail}\n          fallbackImage={'ui/unknown_thumbnail.jpg'}\n          initialImage={'ui/unknown_thumbnail.jpg'}\n          alt={text} />\n      </S.DropItemImgContainer>\n      <S.DropItemLabel>\n        <h2>{ text }</h2>\n        <h5>{ subText }</h5>\n      </S.DropItemLabel>\n    </S.DropItem>\n  );\n}\n","import React, { Component } from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { themeGet, getColor } from '@themes/';\n\nimport { setSettingsValue } from '@store/actions';\n\n//- how often in milliseconds allowed to send action on dragging slider8\nconst SLIDER_THROTTLE = 100;\n\nconst S = {};\nS.Wrapper = styled.div`\n  width: 100%;\n  margin-bottom: 1rem;\n  \n  ${p => p.isDisabled && css`\n    opacity:.2;\n  `}\n`;\n\nS.Label = styled.div`\n  margin-bottom: .5rem;\n`;\n\n\nS.RangeInput = styled.input`\n\n  -webkit-appearance: none;\n  width: 100%;\n  height: 1rem;\n  border-radius: .5rem;\n  background: ${getColor('purple')};\n  outline: none;\n  cursor: pointer;\n  ${p => p.isInverted && css`\n    direction: rtl;\n  `}\n\n  &:disabled{\n    opacity:.5;\n  }\n  \n  &::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n    background: ${getColor('blue')};\n    box-shadow: ${themeGet('shadow', 'z1')};\n    cursor: grab;\n  }\n\n  &::-moz-range-thumb {\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n    background: ${getColor('blue')};\n    cursor: grab;\n  }\n`;\n\n\nclass SettingsSlider extends Component {\n  constructor(props){\n    super(props);\n\n    this.throttleTimer = null;\n  }\n\n  killThrottleTimer(){\n    if(this.throttleTimer){\n      global.clearTimeout(this.throttleTimer);\n      this.throttleTimer = null;\n    }\n  }\n\n  startThrottleTimer(time, callback){\n    if(this.throttleTimer) return;\n    \n    this.throttleTimer = global.setTimeout(() => {\n      callback && callback();\n      this.killThrottleTimer();\n    }, time)\n  }\n\n  onChangeSlider(value){\n    this.startThrottleTimer(SLIDER_THROTTLE, () => this.props.setSettingsValue({ id: this.props.id, value: value }));\n  }\n\n  render(){\n    const {\n      title,\n      value,\n      min,\n      max,\n      step,\n      isInverted,\n      isDisabled\n    } = this.props;\n\n    return(\n      <S.Wrapper isDisabled={isDisabled}>\n        <S.Label>              \n          <span>{`${title}:`}</span>\n          <span>{` ${value}`}</span>\n        </S.Label>\n        <S.RangeInput id=\"myRange\" type=\"range\" min={min} max={max} step={step} value={value} disabled={isDisabled} onChange={e => this.onChangeSlider(e.target.value)} isInverted={isInverted}/>\n      </S.Wrapper>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n})\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    { setSettingsValue },\n    dispatch\n  )\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SettingsSlider)\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export default __webpack_public_path__ + \"static/media/unfold_more.c42abd3e.svg\";","export default __webpack_public_path__ + \"static/media/unfold_less.7d49cd1e.svg\";","import React, { Component } from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { themeGet, shadeColor } from '@themes/';\nimport ICON_EXPAND from './assets/unfold_more.svg';\nimport ICON_COLLAPSE from './assets/unfold_less.svg';\n\nconst S = {};\n\nS.Base = styled.div`\n  overflow-y:hidden;\n  border-bottom: .5rem solid;\n  box-shadow: 2px 2px 2px black;\n\n  background-color: ${shadeColor('white', 0)};\n  transition: background-color .5s, color .5s;\n\n  &:hover{\n    background-color: ${themeGet('color', 'green')};\n    transition: background-color .5s, color .5s;\n  }\n  color: ${themeGet('color', 'black')};\n`;\n\nS.Header = styled.div`\n  padding: 2rem 3rem;\n  display:flex;\n  align-items:center;\n  cursor:pointer;\n\n  img{\n    width: 30px;\n  }\n  h2{\n    flex:1;\n    color: ${themeGet('color', 'black')};\n    text-shadow: .1px .1px .5px ${themeGet('color', 'black')};\n  }\n\n  &:hover{\n    h2{\n      text-shadow: .25px .25px 1.5px ${themeGet('color', 'black')};\n    }\n  }\n`;\n\nS.Body = styled.div`\n  padding: 0 3rem;\n  max-height:0;\n  ${p => p.isOpen && css`\n    max-height: none;\n  `}\n`;\n\n\nclass PanelBase extends Component {\n  constructor(props){\n    super(props);\n\n    this.onPanelClick = this.onPanelClick.bind(this);\n\n    this.state = {\n      isOpen: false\n    }\n  }\n\n  onPanelClick(e){\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n\n  render(){\n    return(\n      <S.Base>\n        <S.Header onClick={this.onPanelClick}>\n          <h2>{this.props.label}</h2>\n          {this.state.isOpen ? (\n            <img src={ICON_EXPAND} alt=\"loading\"/>\n          ):(\n            <img src={ICON_COLLAPSE} alt=\"loading\"/>\n          )}\n        </S.Header>\n        <S.Body isOpen={this.state.isOpen}>\n          { this.props.children }\n        </S.Body>\n      </S.Base>\n    );\n  }\n}\n\nexport default PanelBase;\n\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { setSettingsValue } from '@store/actions';\nimport { \n  selectSettingPingRate,\n  selectSettingVolume,\n  selectSettingAnimationSpeed\n} from '@store/selectors';\n\nimport SettingsSlider from './settings-slider';\n\nconst S = {};\nS.Body = styled.div`\n  ul{\n    padding:0;\n    margin: 0;\n    list-style:none;\n\n    text-align:left;\n  }\n`;\n\nS.Item = styled.li`\n  display: inline-block;\n  width:100%;\n  margin-bottom: 1rem;\n\n  span:first-of-type{\n    font-weight: bold;\n  }\n\n  span:last-of-type{\n\n  }\n\n  &:last-of-type{\n    margin-bottom: 2rem;\n  }\n`\n\nclass PanelSettings extends Component {\n  constructor(props){\n    super(props);\n\n    this.onPanelClick = this.onPanelClick.bind(this);\n\n    this.state = {\n      isOpen: false\n    }\n  }\n\n  onPanelClick(e){\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n\n  render(){\n    const { \n      pingRate,\n      volume,\n      animationSpeed\n    } = this.props;\n\n    const settingsData = [\n      { \n        id: 'pingRate',\n        title: 'Stat Update Speed',\n        min: 50,\n        max: 5000,\n        step: 10, \n        isDisabled: false,\n        isInverted: true,\n        value: pingRate \n      },\n      { \n        id: 'volume',\n        title: 'Volume',\n        min: 0,\n        max: 100,\n        step: 5, \n        isDisabled: true,\n        isInverted: false,\n        value: volume \n      },\n      { \n        id: 'animationSpeed',\n        title: 'Animation Speed',\n        min: 5,\n        max: 1000,\n        step: 1, \n        isDisabled: true,\n        isInverted: true,\n        value: animationSpeed \n      }\n    ]\n\n    return(\n      <S.Body>\n        <ul>\n          { settingsData.map((c, i) => (\n            <S.Item key={i}>\n              <SettingsSlider \n                id={c.id} \n                title={c.title} \n                value={c.value} \n                min={c.min} \n                max={c.max} \n                step={c.step} \n                isDisabled={c.isDisabled}\n                isInverted={c.isInverted}\n              />\n            </S.Item>\n          ))}\n        </ul>\n      </S.Body>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  pingRate: selectSettingPingRate(state),\n  volume: selectSettingVolume(state),\n  animationSpeed: selectSettingAnimationSpeed(state)\n})\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    { setSettingsValue },\n    dispatch\n  )\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PanelSettings)\n\n","import React, { Component } from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { themeGet, getColor, shadeColor, getBreakpoint } from '@themes/';\n\nimport { LilButton, Button } from '@components/ui/button';\n\nimport PanelBase from './components/panel-base';\nimport PanelPetSelection from './components/panel-petselection';\nimport PanelSettings from './components/panel-settings';\n\nimport { deleteAllData } from '@util/pet-store';\nimport { withRouter } from 'react-router-dom'\n\nrequire('@themes/app.scss');\n\nconst S = {};\nS.Menu = styled.div`\n  position:absolute;\n  top:0;\n  right:0;\n  width:100%;\n  height:100%;\n`;\n\n\nS.MainPanel = styled.div`\n  position:fixed;\n  top:0rem;\n  bottom:0;\n  border-left: 1rem solid ${getColor('white')};\n  box-shadow: ${themeGet('shadow', 'z3')};\n\n\n  @media ${getBreakpoint.mobile_tiny}{\n    max-width: calc(100% - 15rem);\n  }\n  @media ${getBreakpoint.tablet}{\n    max-width: calc(50%);\n  }\n  width:100%;\n\n  padding-right:0;\n  \n\n  ${p => p.isOpen ? \n    css`\n      right:0%;\n      transition:right .2s ease-in;\n    `: \n    css`\n      right:-100%;\n      transition:right .3s ease-in;\n    `\n  }\n`;\nS.PanelContainer = styled.div`\n  width:100%;\n  height:100%;\n  overflow-y:auto;\n`;\n\nS.ResetButton = styled.div`\n  /* position:absolute; */\n  /* right:1rem; */\n  /* bottom:1rem; */\n  button{\n    background-color: ${getColor('black')};\n\n    &:hover{\n      background-color: ${getColor('red')};\n    }\n    &:active{\n      background-color: ${shadeColor('red', -20)};\n    }\n  }\n`\nS.MenuButton = styled.div`\n  z-index:2;\n  position:absolute;\n\n  top:.5rem;\n  right:calc(100% + 2rem);\n`;\n\nS.PanelBg = styled.div`\n  width:100%;\n  height:100%;\n  position:absolute;\n  left:0;\n  right:0;\n  top:0;\n  bottom:0;\n  /* border-radius: 10px 0 0 10px; */\n\n  z-index:-1;\n  background-color: ${shadeColor('black', 0)};\n  opacity:1;\n`\n\nclass MenuPanel extends Component {\n  render(){\n    // console.log('R: Menu', this.props.location);\n    \n    return(\n      <S.Menu id=\"menu\" >\n        <S.MainPanel id=\"main-panel\" isOpen={this.props.isOpen}>\n          <S.MenuButton>\n            <LilButton text={'menu'} onClick={() => this.props.onToggleMenu()}/>\n          </S.MenuButton>\n          <S.PanelContainer>\n            <PanelBase label=\"Pet Selection\">\n              <PanelPetSelection onSelectPet={() => this.props.onToggleMenu(false)} />\n            </PanelBase>\n            <PanelBase label=\"Settings\" >\n              <PanelSettings />\n            </PanelBase>\n            <S.ResetButton>\n              <Button text={'pet'} onClick={() => this.props.history.push(`/pet${this.props.location.search}`)} />\n              <Button text={'editor'} onClick={() => this.props.history.push(`/editor${this.props.location.search}`)} />\n              <Button text={'CLEAR SAVE'} onClick={() => deleteAllData()} style={{backgroundColor: getColor('red')}} />\n            </S.ResetButton>\n          </S.PanelContainer>\n          <S.PanelBg/>\n        </S.MainPanel>\n      </S.Menu>\n    );\n  }\n}\n\nexport default withRouter(MenuPanel);\n\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { LilButton } from '@components/ui/button';\n\n\nimport Menu from './menu-panel';\n\nconst S = {};\nS.MenuContainer = styled.div`\n  position:fixed;\n  top:0;\n  right:0;\n  z-index:2;\n`;\n\nS.MenuButton = styled.div`\n  position:absolute;\n  right:.5rem;\n  top:.5rem;\n`;\n\nclass MenuController extends Component {\n  constructor(){\n    super();\n\n    this.state = {\n      isOpen: false\n    }\n  }\n\n  onToggleMenu(force){\n    this.setState({\n      isOpen: force !== undefined ? force : !this.state.isOpen\n    });\n  }\n\n  render(){\n    return(\n      <S.MenuContainer id=\"menu-container\" >\n        <S.MenuButton>\n          <LilButton text={'menu'} onClick={() => this.onToggleMenu()}/>\n        </S.MenuButton>\n\n        <Menu isOpen={this.state.isOpen} onToggleMenu={f => this.onToggleMenu(f)}/>\n      </S.MenuContainer>\n    );\n  }\n}\n\nexport default MenuController;\n","import React, { Component } from 'react';\nimport styled, { css } from 'styled-components';\nimport { themeGet, getColor } from '@themes/';\nimport { round, parseExpressionString } from '@util/tools';\n\nconst S = {};\nS.EffectMarker = styled.div`\n  box-shadow: ${themeGet('shadow', 'z3')};\n  position:absolute;\n  height:100%;\n  z-index:1;\n  opacity: .5;\n\n  transition: opacity 1s;\n\n  ${p => p.isActive && css`\n    opacity: 1;\n    transition: opacity 1s;\n  `}\n\n  /* &:nth-child(odd){\n    .effect-label{\n      bottom:100%;\n      border-radius: 1rem 1rem 0 0;\n      border-bottom: 0;\n    }\n  }\n  &:nth-child(even){ */\n    .effect-label{\n      top:100%;\n      border-radius: 0 0 1rem 1rem;\n      border-top: 0;\n    }\n  /* } */\n\n`\n\nS.Stick = styled.div`\n  width:8px;\n  height:100%;\n  opacity:1;\n  margin-left:-4px;\n\n  >*{\n    display:inline-block;\n    width:4px;\n    height:100%;\n  }\n\n  ${p => p.direction === 1 && css`\n    >.left{\n      background-color: ${getColor('white')};\n    }\n    >.right{\n      background-color: ${p => p.color};\n    }\n  `}\n  ${p => p.direction === -1 && css`\n    >.left{\n      background-color: ${p => p.color};\n    }\n    >.right{\n      background-color:  ${getColor('white')};\n    }\n  `}\n`\n\n\nS.Bubble = styled.div`\n  box-shadow: ${themeGet('shadow', 'z3')};\n  border: .3rem solid ${p => p.color};\n  background-color: ${p => p.color};\n  position:absolute;\n\n  white-space: nowrap;\n  font-size: 1rem;\n\n\n  width:3rem;\n  height:2rem;\n\n  overflow:hidden;\n\n  >*{\n    position:absolute;\n    left:0;\n    top:0;\n    width:50%;\n    height:100%;\n\n    &.left{\n    }\n\n    &.right{\n      left:calc(50%);\n    }\n  }\n\n  transform:translateX(-50%);\n\n  ${p => p.direction === 1 && css`\n    >.left{\n      background-color: ${getColor('white')};\n    }\n    >.right{\n      background-color: ${p => p.color};\n    }\n  `}\n  ${p => p.direction === -1 && css`\n\n    >.left{\n      background-color: ${p => p.color};\n    }\n    >.right{\n      background-color: ${getColor('white')};\n    }\n  `}\n  ${p => p.direction === 0 && css`\n    background-color: ${getColor('white')};\n  `}\n`\n\nS.BubbleTip = styled.div`\n\n  ${p => p.isShowing ? css`\n    top:100%;\n    opacity: 1;\n  `:css`\n    top:0%;\n    opacity: 0;\n  `}\n\n  pointer-events: none;\n  position:absolute;\n  background-color: ${p => p.color};\n  border-radius: 1rem;\n  padding: 1rem;\n  box-shadow: ${themeGet('shadow', 'z3')};\n  font-size:1.25rem;\n  left:50%;\n  transform:translateX(-50%);\n\n  margin-top:3rem;\n\n  min-width: 15rem;\n\n  transition: opacity .3s, top .2s;\n`\n\n\n/*\n{\n  id\n  label\n  cur\n  max\n  percent\n  fullIsGood\n  doesKill\n  fillType\n  effects:[\n    {\n      when: \"<=_30%\"\n      then \"MOOD_TINY\"\n    }\n  ]\n}\n*/\nconst parseEffect = (effect, statObj) => {\n  const expressionObj = parseExpressionString(effect.when);\n  // console.log('criteria', expressionObj.criteria, expressionObj.isPercent);\n  // sendQuiet(effect, statObj, expressionObj, true);\n\n\n  let percentVal;\n  if(expressionObj.isPercent){\n    percentVal = expressionObj.criteria;\n  }else{\n    percentVal = round(expressionObj.criteria / statObj.max, 2) * 100;\n  }\n\n  return {\n    label: effect.mood.label,\n    position: `${percentVal}%`,\n    direction: expressionObj.direction\n  }\n}\n\nclass EffectMarker extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      tooltipShowing: false\n    }\n  }\n\n  onEnterBubble(e){\n    this.setState({\n      tooltipShowing: true\n    });\n  }\n\n  onLeaveBubble(){\n    this.setState({\n      tooltipShowing: false\n    });\n  }\n\n  renderMessage(effect, statLabel, doesKill, fullIsGood, direction){\n    const retMessages = []\n    retMessages.push(\n    <span key=\"1\">\n      {'when '}\n      <strong>{statLabel}</strong>\n      {' is '}\n      <strong>{effect.when}</strong>\n      {', I feel '}\n      <strong>{`${effect.mood.label}`}</strong>\n    </span>);\n    if(doesKill){\n      if(fullIsGood && direction === -1){\n        retMessages.push(<span key=\"2\">{`if i dont have enough `}<strong>{statLabel}</strong>{` i'll die!`}</span>);\n      }else if(!fullIsGood && direction === 1){\n        retMessages.push(<span key=\"2\">{`if i have too much `}<strong>{statLabel}</strong>{` i'll die!`}</span>);\n      }\n    }\n\n    return retMessages;\n  }\n\n  render(){\n    const { effect, statObj, colorObj, isActive } = {...this.props};\n\n    const effectMarker = parseEffect(effect, statObj);\n  \n    let color = getColor('white');\n    const direction = effectMarker.direction;\n    if(direction === 1){\n      color = colorObj.plus;\n    }else if(direction === -1){\n      color = colorObj.minus;\n    }\n\n    return (\n      <S.EffectMarker style={{ left: effectMarker.position }} isActive={isActive} onMouseEnter={(e) => this.onEnterBubble(e)} onMouseLeave={() => this.onLeaveBubble()}>\n        <S.Stick color={color} isActive={isActive} direction={direction}>\n          <div className=\"left\"></div>\n          <div className=\"right\"></div>\n        </S.Stick>\n        <S.Bubble className=\"effect-label\" color={color} isActive={isActive} direction={direction} alt={effectMarker.label} >\n          <div className=\"left\"></div>\n          <div className=\"right\"></div>\n        </S.Bubble>\n\n        <S.BubbleTip color={color} isShowing={this.state.tooltipShowing} >\n          {this.renderMessage(effect, statObj.label, statObj.doesKill, statObj.fullIsGood, direction)}\n        </S.BubbleTip>\n      </S.EffectMarker>\n    );\n  }\n\n}\n\nexport default EffectMarker;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { themeGet, shadeColor, getColor } from '@themes/';\nimport { LilButton } from '@components/ui/button';\nimport { round } from '@util/tools';\nimport EffectMarker from './effect-marker';\n\nconst STAT_AUGMENT_AMOUNT = 15;\n\nconst S = {};\nS.ProgressBar = styled.div`\n  position:relative;\n  margin: 1rem;\n  margin-bottom: 3rem;\n  \n  color: ${themeGet('color', 'black')};\n`\n\nS.Bar = styled.div`\n  position:relative;\n  border:.5rem solid ${themeGet('color', 'white')};\n  border-radius: 1rem;\n  overflow:hidden;\n  padding:.25rem .5rem;\n  text-align:center;\n  background-color: ${themeGet('color', 'white')};\n\n  box-shadow: 0px -2px 4px ${shadeColor('white', -40)};\n`\n\nS.Value = styled.span`\n  position: relative;\n  z-index:1;\n  /* color: white; */\n`\n\nS.Label = styled.div`\n  position:relative;\n  display:inline;\n\n  background-color:${themeGet('color', 'blue')};\n  padding: .25rem 1rem .5rem 1rem;\n  border-radius: 1rem 1rem 0rem 0rem;\n  border: .5rem solid white;\n  margin:0 0 -1rem .5rem;\n  /* color:${themeGet('color', 'black')}; */\n\n  >*{\n    display:inline-block;\n    vertical-align:middle;\n  }\n\n  h4{\n    width:60%;\n    font-size:2rem;\n  display:inline;\n  }\n  div{\n    width:40%;\n  }\n`\n\nS.BarGroup = styled.div`\n  /* allows canvas clicks behind menu elements */\n  /* pointer-events: all; */\n  \n  position:relative;\n  display:flex;\n  flex-direction:column;\n\n  \n  >*{\n    display:inline-block;\n    vertical-align:middle;\n  }\n\n\n  >div{\n    width:100%;\n  }\n  button{\n    position:absolute;\n    z-index:1;\n    border: 5px solid white;\n    box-shadow: none;\n    margin: 0;\n    padding: .2rem 1rem;\n\n    &:first-child{\n      /* background-color: ${themeGet('color', 'red')}; */\n      left:-1rem;\n      bottom: -1rem;\n    }\n    &:last-child{\n      /* background-color: ${themeGet('color', 'green')}; */\n      right:-1rem;\n      bottom: 1rem;\n    }\n  }\n`\n\nS.Bg = styled.div`\n  position:absolute;\n  top:0;\n  left:0;\n  height:100%; \n  transition: width .3s ease-in-out, background-color .5s ease-in-out;\n`\n\nS.EffectMarkers = styled.div`\n  position:absolute;\n  width:100%;\n  height:100%;\n`\n\nconst getAlertType = (fillType, percent, fullIsGood) => {\n  if(fillType === 'empty'){\n    if(percent < 20){\n      return fullIsGood ? 'bad' : 'good';\n    } else if (percent > 80){\n      return fullIsGood ? 'good' : 'bad';\n    }\n  }else if(fillType === 'fill'){\n    if(percent < 20){\n      return fullIsGood ? 'bad' : 'good';\n    } else if (percent > 80){\n      return fullIsGood ? 'good' : 'bad';\n    }\n  }\n\n  return 'neutral';\n}\n\n\nconst getBarColor = (alertType, barStyles) => {\n  return barStyles[alertType] || barStyles['neutral'] || 'white';\n}\n\nconst ProgressBar = ({ statObj, label, isActive, augmentAction, sceneStyles, moods }) => {\n  // console.log('statObj', statObj);\n  const alertType = getAlertType(statObj.fillType, statObj.percent, statObj.fullIsGood);\n  const barColor = getBarColor(alertType, sceneStyles.bars);\n\n  const bgColor_minus = statObj.fullIsGood ? getColor('red') : getColor('green');\n  const bgColor_plus = statObj.fullIsGood ? getColor('green') : getColor('red');\n\n\n  return (\n    <S.ProgressBar style={{ color: sceneStyles.text }}>\n      <S.Label>\n        <h4>{label}</h4>\n      </S.Label>\n      <S.BarGroup>\n        {augmentAction && (<LilButton text={'-'} onClick={e => augmentAction(statObj.id, -STAT_AUGMENT_AMOUNT)} style={{ backgroundColor: bgColor_minus }} />)}\n        <S.EffectMarkers>\n          { statObj.effects.map((effect, idx) => (\n            <EffectMarker key={idx} isOdd={idx % 2} isActive={moods.indexOf(effect.mood.id) > -1} effect={effect} statObj={statObj} colorObj={{ minus: bgColor_minus, plus: bgColor_plus }} />\n          ))}\n        </S.EffectMarkers>\n        <S.Bar isActive={isActive} >\n          <S.Value>{ `${round(statObj.cur)} / ${statObj.max} (${round(statObj.percent)}%)` }</S.Value>\n          <S.Bg \n            style={{ \n              width:`${statObj.percent}%`,\n              backgroundColor: barColor\n            }} \n          />\n        </S.Bar>\n        {augmentAction && (<LilButton text={'+'} onClick={e => augmentAction(statObj.id, STAT_AUGMENT_AMOUNT)} style={{ backgroundColor: bgColor_plus }} />)}\n      </S.BarGroup>\n    </S.ProgressBar>\n  );\n}\n\nexport default ProgressBar;\n","import React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport styled, { css } from 'styled-components';\n\nimport { themeGet, getColor, mixin_clearBubble } from '@themes/';\n\nimport ProgressBar from './components/progress-bar';\nimport StatEventButton from './components/stat-event-button';\n\nimport { LilButton, Button, NotAButton } from '@components/ui/button';\n\n\nimport {\n  ping\n} from '@store/actions/index';\nimport {\n  augmentStat,\n  forceBehavior,\n  resetPet,\n  killPet\n} from '@store/actions/pet';\nimport { \n  selectActivePet,\n  selectActiveDeltaStats,\n  selectActiveSceneStyles,\n  selectActivePetBehavior,\n  getForcedBehavior,\n  selectActivePetActivities,\n  selectActiveMoods\n} from '@store/selectors';\n\nconst S = {};\nS.Wrapper = styled.div`\n  padding: 1rem;\n  position:relative;\n  ${mixin_clearBubble()}\n\n  >*{\n    /* allows canvas clicks behind menu elements */\n    pointer-events: all;\n  }\n`\n\nS.StatDisplay = styled.div`\n  text-align:right;\n`\n\nS.StatDisplayLabel = styled.span`\n  color: ${themeGet('color', 'white')};\n  font-size:2rem;\n`\nS.StatDisplayValue = styled.span`\n  color: ${themeGet('color', 'green')};\n  margin-left:1rem;\n  font-size:3rem;\n`\n\nS.FooterUi = styled.div`\n  position:fixed;\n  bottom:0;\n  right:0;\n  width:100%;\n`;\n\nS.EffectsContainer = styled.div`\n  position:absolute;\n  left:0;\n  bottom:0;\n`;\n\nS.Name = styled.div`\n  position:absolute;\n  right:2rem;\n  padding: 1rem 2rem;\n  padding-right:4rem;\n  bottom:1rem;\n  border: 4px solid black;\n  \n  border-radius:2rem;\n  background-color:white;\n  color:black;\n  text-align:center;\n`\n\nS.Level = styled.div`\n  border-radius: 2rem;\n  border: 4px solid black;\n  padding: 1rem;\n  position:absolute;\n  right:-1rem;\n  top:-50%;\n  text-align:right;\n\n  font-style: bold;\n\n\n  color: ${themeGet('color', 'blue')};\n  background-color: ${themeGet('color', 'white')};\n`\n\nS.InfoButton = styled.div`\n  position:absolute;\n  right: .5rem;\n  bottom: .5rem;\n  z-index:1;\n`\n\nS.Info = styled.div`\n  ${mixin_clearBubble()}\n  max-height:500px;\n  transition: max-height .5s ease-in-out;\n  overflow: hidden;\n  opacity:1;\n  color: ${p => getColor('black')};\n\n  padding: 1rem;\n  margin: .5rem;\n  font-weight: bold;\n  width:100%;\n\n  ${p => !p.showInfo && css`\n    width:0;\n    max-height:0;\n    opacity:0;\n    transition: max-height .5s ease-in-out, opacity .2s, width .5s;\n    transition-delay: 0s, 0s, .5s;\n  `}\n`\n\nconst StatDisplay = ({ statObj }) => {\n  return (\n    <S.StatDisplay>\n      <S.StatDisplayLabel>{statObj.label}</S.StatDisplayLabel>\n      <S.StatDisplayValue>{statObj.cur}</S.StatDisplayValue>\n    </S.StatDisplay>\n  );\n};\n\nclass PetStats extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      isInfoOpen: false\n    }\n  }\n\n  onToggleShowInfo(force){\n    this.setState({\n      isInfoOpen: force !== undefined ? force : !this.state.isInfoOpen\n    });\n  }\n\n  updateStat(id, val){\n    this.props.augmentStat(id, val);\n    this.props.ping();\n  }\n\n  resetPet(id){\n    console.log('resetters')\n    this.props.resetPet(id);\n    this.props.ping();\n  }\n\n  getDeadStats(deltaStats){\n    return deltaStats.filter(ds => {\n      if(ds.doesKill){\n        // console.log(`${ds.id}, fullIsGood:${ds.fullIsGood}, cur:${ds.cur}, max:${ds.max}`)\n        if(ds.fullIsGood && ds.cur === 0){\n          return true;\n        }else if(!ds.fullIsGood && ds.cur === ds.max){\n          return true;\n        }\n      }\n\n      return false;\n    });\n  }\n\n  checkForDead(deltaStats){\n    if(this.getDeadStats(deltaStats).length > 0){\n      this.props.killPet(this.props.activePet.id)\n    }\n  }\n\n  render(){\n    // console.log('R: Info');\n    const { \n      activePet,\n      behavior,\n      deltaStats,\n      forceBehavior,\n      forcedBehavior,\n      sceneStyles,\n      moods,\n      activities\n    } = this.props;\n    if(!activePet) return null;\n\n    const petData = activePet.data;\n    const behaviorIds = Object.keys(petData.behaviors);\n    const level = deltaStats.find(ds => ds.id === 'level') ? deltaStats.find(ds => ds.id === 'level').cur : -1;\n    const isAlive = activePet.isAlive;\n    \n    if(isAlive) this.checkForDead(deltaStats);\n    const allMoods = Object.keys(petData.moods).map(mKey => ({ id: mKey, label: petData.moods[mKey].label || mKey }));\n    return (\n      <S.Wrapper>\n        {deltaStats.map((s, i) => {\n          if(s.type === 'number'){\n            return (\n              <StatDisplay key={i} statObj={s} />\n            );\n          }else{\n            return (\n              <ProgressBar key={i} sceneStyles={sceneStyles} statObj={s} moods={moods} label={s.label} augmentAction={(id, val) => this.updateStat(id, val)}/>\n            );\n          }\n        })}\n        {/* <S.ResetContainer> */}\n        {/* </S.ResetContainer> */}\n        \n        <S.InfoButton>\n          <LilButton text={'info'} onClick={e => this.onToggleShowInfo()} />\n          <LilButton text={'Reset Pet'} onClick={() => this.resetPet(activePet.id)} style={{backgroundColor: getColor('red')}} />\n        </S.InfoButton>\n        <S.Info showInfo={this.state.isInfoOpen}>\n          <p>{'Activities'}</p>\n            <NotAButton isActive={activities.indexOf('WALKING') > -1} text={'WALKING'} />\n            <NotAButton isActive={activities.indexOf('JUMPING') > -1} text={'JUMPING'} />\n            <NotAButton isActive={activities.indexOf('DUCKING') > -1} text={'DUCKING'} />\n            <NotAButton isActive={activities.indexOf('EATING') > -1} text={'EATING'} />\n            <NotAButton isActive={activities.indexOf('ROAMING') > -1} text={'ROAMING'} />\n          <hr/>\n          <p>{'Moods'}</p>\n            {allMoods.map((mood, idx) => (\n              <NotAButton key={idx} isActive={moods.indexOf(mood.id) > -1} text={mood.label} onClick={() => {}} />\n            ))}\n          <hr/>\n          <p>{'Behaviors (click to toggle override)'}</p>\n            {behaviorIds.map((aId, idx) => \n              {\n                return (forcedBehavior === aId) ? (\n                  <LilButton key={idx} isActive={behavior === aId} text={aId} onClick={() => forceBehavior(aId)} style={{ backgroundColor: getColor('purple') }}/>\n                ):(\n                  <LilButton key={idx} isActive={behavior === aId} text={aId} onClick={() => forceBehavior(aId)} />\n                )\n              }\n            )}\n          <hr/>\n\n        </S.Info>\n        \n        <S.FooterUi>\n          <S.EffectsContainer>\n            {petData.statEvents && petData.statEvents.map((s,idx) => (\n              <StatEventButton key={idx} statEventObj={s} onImmediateUpdate={(stat,val) => this.updateStat(stat,val)} />\n            ))}\n          </S.EffectsContainer>\n          <S.Name>\n            <span>{`${petData.name} the ${petData.animal}`}</span>\n            <S.Level><span>{level}</span></S.Level>\n          </S.Name>\n        </S.FooterUi>\n      </S.Wrapper>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  activePet: selectActivePet(state),\n  deltaStats: selectActiveDeltaStats(state),\n  sceneStyles: selectActiveSceneStyles(state),\n  behavior: selectActivePetBehavior(state),\n  forcedBehavior: getForcedBehavior(state),\n  moods: selectActiveMoods(state),\n  activities: selectActivePetActivities(state)\n})\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      augmentStat,\n      forceBehavior,\n      resetPet,\n      ping,\n      killPet\n    },\n    dispatch\n  )\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PetStats)\n\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport Cage from '@scenes/cage';\nimport Info from '@scenes/info';\n\nconst S = {};\nS.Main = styled.div`\n  position:absolute;\n  top:0;\n  right:0;\n  bottom:0;\n  left:0;\n  z-index:1;\n`\n\nS.Stage = styled.section`\n  position:relative;\n  width: 100%;\n  height: 100%;\n\n  padding: .5rem;\n`\n\nS.CageContainer = styled.div`\n  position:absolute;\n  top:0;\n  right:0;\n  bottom:0;\n  left:0;\n  z-index:-1;\n`;\n\nS.InfoContainer = styled.div`\n  /* allow canvas clicks under menu elements */\n  pointer-events:none;\n\n  margin:1rem;\n  z-index:1;\n  margin-top:5rem;\n`;\n\nclass Main extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      isOpen: false\n    }\n  }\n\n  onToggleMenu(force){\n    this.setState({\n      isOpen: force !== undefined ? force : !this.state.isOpen\n    });\n  }\n\n  render(){\n    return(\n      <S.Main>\n        <S.Stage>\n          <S.InfoContainer  id=\"info-container\">\n            <Info />\n          </S.InfoContainer>\n          <S.CageContainer>\n            <Cage />\n          </S.CageContainer>\n        </S.Stage>\n      </S.Main>\n    );\n  }\n}\n\nexport default Main;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { Button, ThemeProvider, createMuiTheme } from '@material-ui/core';\nimport { getColor } from '@themes/';\nimport Cage from '@scenes/cage';\n\nconst S = {};\nS.PetCell = styled.div`\n  border: 5px solid white;\n  height:200px;\n\n  >div{\n    display:inline-block;\n    vertical-align:middle;\n    height:100%;\n  }\n`\n\nS.PetFrame = styled.div`\n  width: 33%;\n  border:1px solid red;\n`;\n\nS.Controls = styled.div`\n  width: 66%;\n  height: 100px;\n  border:1px solid yellow;\n`;\n\nclass PetCell extends Component {\n  render(){\n    return(\n      <S.PetCell>\n        <S.PetFrame>\n            <Cage />\n        </S.PetFrame>\n        <S.Controls>\n          <Button variant=\"contained\" color=\"primary\">This is a button</Button>\n          <Button variant=\"contained\" color=\"primary\">This is a button</Button>\n          <Button variant=\"contained\" color=\"primary\">This is a button</Button>\n        </S.Controls>\n      </S.PetCell>\n    );\n  }\n}\n\nexport default PetCell;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { Button, ThemeProvider, createMuiTheme } from '@material-ui/core';\nimport ScopedCssBaseline from '@material-ui/core/ScopedCssBaseline';\nimport blue from '@material-ui/core/colors/blue';\nimport PetCell from './pet-cell';\nimport { getColor } from '@themes/';\n\nconst S = {};\nS.Editor = styled.div`\n  position:absolute;\n  top:0;\n  right:0;\n  bottom:0;\n  left:0;\n  z-index:1;\n`\n\nconst theme = createMuiTheme({\n  palette:{\n    type: 'dark',\n    primary:{\n      // main: getColor('blue')\n      main: blue[500]\n    }\n  },\n});\n\nclass Editor extends Component {\n  render(){\n    return(\n      <ThemeProvider theme={theme}>\n        <ScopedCssBaseline>\n          <S.Editor>\n            <PetCell />\n            <PetCell />\n            <PetCell />\n            <PetCell />\n          </S.Editor>\n        </ScopedCssBaseline>\n      </ThemeProvider>\n    );\n  }\n}\n\nexport default Editor;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import App from './routes';\nimport AppContainer from '@scenes/app';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux'\nimport { HashRouter } from \"react-router-dom\";\nimport { ThemeProvider } from 'styled-components'\nimport store from './store'\nimport theme from '@themes/'\nimport Logger, { init as initLogger } from './util/logger';\n\n\nglobal.store = store;\ninitLogger(0);\nglobal.Logger = Logger;\n\nReactDOM.render(\n  <Provider store={store}>\n    <HashRouter>\n      <ThemeProvider theme={theme}>\n        <AppContainer />\n      </ThemeProvider>\n    </HashRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}